<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        margin: 40px;
        background: #f8f9fa;
      }

      .test-container {
        max-width: 800px;
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .test-section {
        margin: 30px 0;
        padding: 20px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
      }

      .test-result {
        padding: 10px;
        margin: 10px 0;
        border-radius: 6px;
      }

      .success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .info {
        background: #d1ecf1;
        color: #0c5460;
        border: 1px solid #b6d4d9;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 12px 24px;
        margin: 8px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.2s ease;
      }

      button:hover {
        background: #0056b3;
        transform: translateY(-2px);
      }

      button:focus {
        outline: 2px solid #4ecdc4;
        outline-offset: 2px;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 10000;
      }

      .modal-content {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 30px;
        border-radius: 12px;
        max-width: 500px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      .close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        color: #666;
        font-size: 24px;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .close-btn:hover {
        background: #f0f0f0;
        transform: none;
      }

      .form-group {
        margin: 15px 0;
      }

      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: 600;
      }

      .form-group input {
        width: 100%;
        padding: 10px;
        border: 2px solid #e0e0e0;
        border-radius: 6px;
        font-size: 16px;
      }

      .form-group input:focus {
        outline: none;
        border-color: #4ecdc4;
        box-shadow: 0 0 0 3px rgba(78, 205, 196, 0.1);
      }

      #results {
        position: fixed;
        top: 20px;
        right: 20px;
        width: 300px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        padding: 20px;
        z-index: 20000;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h1>ğŸ§ª ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</h1>
      <p>UI/UXæ”¹ä¿®ã§å®Ÿè£…ã—ãŸãƒ¢ãƒ¼ãƒ€ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèªã‚’è¡Œã„ã¾ã™</p>

      <div class="test-section">
        <h3>ğŸ“‹ åŸºæœ¬ãƒ¢ãƒ¼ãƒ€ãƒ«æ©Ÿèƒ½</h3>
        <button onclick="openTestModal()">ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã</button>
        <button onclick="runAutomaticTests()">è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ</button>
      </div>

      <div class="test-section">
        <h3>âŒ¨ï¸ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</h3>
        <p>ä»¥ä¸‹ã®é †åºã§Tabã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®å‹•ãã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
        <button tabindex="1">ãƒœã‚¿ãƒ³1</button>
        <button tabindex="2">ãƒœã‚¿ãƒ³2</button>
        <button tabindex="3">ãƒœã‚¿ãƒ³3</button>
        <input tabindex="4" placeholder="å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰" />
      </div>

      <div class="test-section">
        <h3>ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å‹•ä½œãƒ†ã‚¹ãƒˆ</h3>
        <p>ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ï¼ˆF12ï¼‰ã§ãƒ‡ãƒã‚¤ã‚¹ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ç¢ºèªã—ã¦ãã ã•ã„</p>
        <button onclick="testResponsive()">ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹</button>
      </div>
    </div>

    <!-- ãƒ†ã‚¹ãƒˆç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="testModal" class="modal">
      <div class="modal-content">
        <button class="close-btn" onclick="closeTestModal()">&times;</button>
        <h2>ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ«</h2>
        <p>ã“ã®ãƒ¢ãƒ¼ãƒ€ãƒ«ã§ä»¥ä¸‹ã®å‹•ä½œã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p>
        <ul>
          <li>ESCã‚­ãƒ¼ã§é–‰ã˜ã‚‹</li>
          <li>èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹</li>
          <li>Tabã‚­ãƒ¼ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•</li>
          <li>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—æ©Ÿèƒ½</li>
        </ul>

        <div class="form-group">
          <label for="testInput1">ãƒ†ã‚¹ãƒˆå…¥åŠ›1:</label>
          <input type="text" id="testInput1" placeholder="ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ†ã‚¹ãƒˆ" />
        </div>

        <div class="form-group">
          <label for="testInput2">ãƒ†ã‚¹ãƒˆå…¥åŠ›2:</label>
          <input type="text" id="testInput2" placeholder="ã‚¿ãƒ–ç§»å‹•ãƒ†ã‚¹ãƒˆ" />
        </div>

        <div style="margin-top: 20px">
          <button onclick="closeTestModal()">é–‰ã˜ã‚‹</button>
          <button onclick="alert('ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ!')">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</button>
        </div>
      </div>
    </div>

    <!-- çµæœè¡¨ç¤ºãƒ‘ãƒãƒ« -->
    <div id="results" style="display: none">
      <h4>ğŸ¯ ãƒ†ã‚¹ãƒˆçµæœ</h4>
      <div id="resultsList"></div>
      <button onclick="document.getElementById('results').style.display='none'">é–‰ã˜ã‚‹</button>
    </div>

    <script>
      // ãƒ†ã‚¹ãƒˆçµæœè¨˜éŒ²
      const testResults = [];

      function addResult(test, passed, details = '') {
        testResults.push({ test, passed, details, timestamp: new Date() });
        updateResultsDisplay();
      }

      function updateResultsDisplay() {
        const resultsList = document.getElementById('resultsList');
        const results = document.getElementById('results');

        resultsList.innerHTML = testResults
          .map(
            r =>
              `<div class="${r.passed ? 'success' : 'error'}">
                    ${r.passed ? 'âœ…' : 'âŒ'} ${r.test}
                    ${r.details ? '<br><small>' + r.details + '</small>' : ''}
                </div>`
          )
          .join('');

        results.style.display = 'block';
      }

      function openTestModal() {
        const modal = document.getElementById('testModal');
        modal.style.display = 'block';

        // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’æœ€åˆã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ç§»å‹•
        setTimeout(() => {
          document.getElementById('testInput1').focus();
        }, 100);

        addResult('ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º', true, 'display: block ã§æ­£å¸¸ã«è¡¨ç¤º');
      }

      function closeTestModal() {
        const modal = document.getElementById('testModal');
        modal.style.display = 'none';
        addResult('ãƒ¢ãƒ¼ãƒ€ãƒ«éè¡¨ç¤º', true, 'ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æ­£å¸¸ã«éè¡¨ç¤º');
      }

      function runAutomaticTests() {
        // CSSç¢ºèªãƒ†ã‚¹ãƒˆ
        const enhancedCSS = Array.from(document.styleSheets).some(sheet => {
          try {
            return sheet.href && sheet.href.includes('enhanced-interactions.css');
          } catch (e) {
            return false;
          }
        });

        addResult(
          'enhanced-interactions.css èª­ã¿è¾¼ã¿',
          enhancedCSS,
          enhancedCSS ? 'CSSãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™' : 'CSSãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'
        );

        // ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ç¢ºèª
        const modal = document.getElementById('testModal');
        addResult('ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ å­˜åœ¨ç¢ºèª', !!modal, 'DOMå†…ã«ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ãŒå­˜åœ¨ã—ã¾ã™');

        // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹è¦ç´ ç¢ºèª
        const focusableElements = modal.querySelectorAll(
          'button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        addResult(
          'ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ç¢ºèª',
          focusableElements.length > 0,
          `${focusableElements.length}å€‹ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ã‚’ç™ºè¦‹`
        );

        // ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼ãƒ†ã‚¹ãƒˆ
        const buttons = document.querySelectorAll('button');
        let hasHoverEffects = false;
        buttons.forEach(btn => {
          const styles = getComputedStyle(btn);
          if (styles.transition && styles.transition.includes('transform')) {
            hasHoverEffects = true;
          }
        });

        addResult(
          'ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ',
          hasHoverEffects,
          hasHoverEffects ? 'transform transition ãŒé©ç”¨ã•ã‚Œã¦ã„ã¾ã™' : 'ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'
        );
      }

      function testResponsive() {
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;

        addResult('ç¾åœ¨ã®ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆ', true, `${viewportWidth}x${viewportHeight}px`);

        if (viewportWidth <= 768) {
          addResult('ãƒ¢ãƒã‚¤ãƒ«ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆåˆ¤å®š', true, 'ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã§ã™');
        } else if (viewportWidth <= 1024) {
          addResult('ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆåˆ¤å®š', true, 'ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆè¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã§ã™');
        } else {
          addResult('ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆåˆ¤å®š', true, 'ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ã§ã™');
        }
      }

      // ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      document.addEventListener('keydown', e => {
        if (e.key === 'Escape') {
          const modal = document.getElementById('testModal');
          if (modal.style.display === 'block') {
            closeTestModal();
            addResult('ESCã‚­ãƒ¼å‹•ä½œ', true, 'ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒæ­£å¸¸ã«é–‰ã˜ã¾ã—ãŸ');
          }
        }
      });

      // èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      document.getElementById('testModal').addEventListener('click', e => {
        if (e.target.id === 'testModal') {
          closeTestModal();
          addResult('èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯å‹•ä½œ', true, 'èƒŒæ™¯ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒæ­£å¸¸ã«é–‰ã˜ã¾ã—ãŸ');
        }
      });

      // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      document.addEventListener('keydown', e => {
        const modal = document.getElementById('testModal');
        if (modal.style.display === 'block' && e.key === 'Tab') {
          const focusableElements = modal.querySelectorAll(
            'button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
          );
          const firstElement = focusableElements[0];
          const lastElement = focusableElements[focusableElements.length - 1];

          if (e.shiftKey && document.activeElement === firstElement) {
            e.preventDefault();
            lastElement.focus();
            addResult('ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—ï¼ˆé€†æ–¹å‘ï¼‰', true, 'Shift+Tabã§æœ€å¾Œã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹');
          } else if (!e.shiftKey && document.activeElement === lastElement) {
            e.preventDefault();
            firstElement.focus();
            addResult('ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—ï¼ˆæ­£æ–¹å‘ï¼‰', true, 'Tabã§æœ€åˆã®è¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹');
          }
        }
      });

      // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–
      document.addEventListener('DOMContentLoaded', () => {
        addResult('ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿', true, 'ãƒ†ã‚¹ãƒˆãƒšãƒ¼ã‚¸ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
      });
    </script>
  </body>
</html>
