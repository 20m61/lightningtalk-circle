# Lightning Talk Circle - Staging Environment (AWS)
# This file is for AWS staging environment deployment

# Environment
NODE_ENV=staging
PORT=3000
DEBUG=true

# Database Configuration - DynamoDB for staging
DATABASE_TYPE=dynamodb
AWS_REGION=ap-northeast-1

# DynamoDB Tables (managed by CDK)
DYNAMODB_EVENTS_TABLE=lightningtalk-events-staging
DYNAMODB_PARTICIPANTS_TABLE=lightningtalk-participants-staging
DYNAMODB_PRESENTATIONS_TABLE=lightningtalk-presentations-staging
DYNAMODB_TALKS_TABLE=lightningtalk-talks-staging
DYNAMODB_ANALYTICS_TABLE=lightningtalk-analytics-staging

# Email Configuration - SES with staging prefix
EMAIL_ENABLED=true
EMAIL_PROVIDER=ses
EMAIL_FROM=staging-noreply@lightningtalk-circle.com
AWS_SES_REGION=ap-northeast-1

# Security - Retrieved from AWS Secrets Manager (staging)
JWT_SECRET_ARN=arn:aws:secretsmanager:ap-northeast-1:ACCOUNT:secret:lightningtalk-circle/staging/jwt
SESSION_SECRET_ARN=arn:aws:secretsmanager:ap-northeast-1:ACCOUNT:secret:lightningtalk-circle/staging/session
API_KEYS_SECRET_ARN=arn:aws:secretsmanager:ap-northeast-1:ACCOUNT:secret:lightningtalk-circle/staging/api-keys

# CORS Configuration
CORS_ORIGIN=https://staging.lightningtalk-circle.com

# File Uploads - S3 for staging
UPLOAD_PROVIDER=s3
S3_BUCKET_NAME=lightningtalk-circle-uploads-staging
S3_REGION=ap-northeast-1
MAX_FILE_SIZE=5mb

# External Services
GITHUB_INTEGRATION_ENABLED=true
GITHUB_SECRET_ARN=arn:aws:secretsmanager:ap-northeast-1:ACCOUNT:secret:lightningtalk-circle/staging/github

# Staging URLs
API_BASE_URL=https://staging-api.lightningtalk-circle.com/api
FRONTEND_URL=https://staging.lightningtalk-circle.com
STATIC_ASSETS_URL=https://staging.lightningtalk-circle.com

# Logging - CloudWatch for staging
LOG_LEVEL=debug
LOG_FORMAT=json
AWS_CLOUDWATCH_LOG_GROUP=/aws/lambda/lightningtalk-api-staging
ENABLE_REQUEST_LOGGING=true

# Performance (staging optimized)
REQUEST_TIMEOUT=45000
MAX_PAYLOAD_SIZE=2mb
ENABLE_COMPRESSION=true

# Monitoring and Observability
ENABLE_METRICS=true
ENABLE_TRACING=true
METRICS_NAMESPACE=LightningTalkCircle-Staging

# Security Headers
ENABLE_SECURITY_HEADERS=true
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW=15
RATE_LIMIT_MAX_REQUESTS=200

# Staging Features
AUTO_RESTART=false
LIVE_RELOAD=false
ERROR_STACK_TRACES=true
ENABLE_TEST_ROUTES=true