# イベント管理機能設計書

## 概要

ログイン後の管理者向けイベント管理機能をモバイルファーストで設計・実装する。

## 機能要件

### 1. イベント一覧表示

- 全イベントの一覧表示（開催済み、開催予定、下書き）
- フィルタリング機能（ステータス、日付、検索）
- ソート機能（日付、参加者数、ステータス）
- ページネーション

### 2. イベントCRUD操作

#### Create（作成）

- イベント基本情報入力
  - タイトル
  - 開催日時
  - 会場（オンライン/オフライン/ハイブリッド）
  - 定員
  - 説明文
  - カバー画像
- 下書き保存機能
- プレビュー機能

#### Read（詳細表示）

- イベント詳細情報
- 参加者リスト
- 統計情報（参加率、キャンセル率等）
- QRコード生成（受付用）

#### Update（編集）

- 全項目の編集
- 変更履歴の記録
- 参加者への通知オプション

#### Delete（削除）

- ソフトデリート（論理削除）
- 削除確認ダイアログ
- 関連データの扱い

### 3. 参加者管理

- 参加者一覧
- CSVエクスポート
- 参加者への一括メール送信
- チェックイン機能

### 4. 統計・レポート

- 参加率グラフ
- 人気イベント分析
- 参加者属性分析

## UI/UXデザイン方針

### モバイルファースト設計

1. **タッチ操作最適化**
   - 44px以上のタッチターゲット
   - スワイプ操作対応
   - 長押しメニュー

2. **レスポンシブレイアウト**
   - Mobile: 単一カラム
   - Tablet: 2カラムグリッド
   - Desktop: 3カラムグリッド + サイドバー

3. **プログレッシブエンハンスメント**
   - 基本機能はJavaScript無しでも動作
   - 高度な機能は段階的に追加

### コンポーネント設計

```
/admin
├── EventList.js         # イベント一覧
├── EventForm.js         # イベント作成/編集フォーム
├── EventDetail.js       # イベント詳細
├── ParticipantList.js   # 参加者一覧
├── Statistics.js        # 統計ダッシュボード
└── AdminLayout.js       # 管理画面レイアウト
```

### API設計

```
GET    /api/admin/events              # イベント一覧
POST   /api/admin/events              # イベント作成
GET    /api/admin/events/:id          # イベント詳細
PUT    /api/admin/events/:id          # イベント更新
DELETE /api/admin/events/:id          # イベント削除
GET    /api/admin/events/:id/participants  # 参加者一覧
POST   /api/admin/events/:id/checkin       # チェックイン
GET    /api/admin/statistics              # 統計情報
```

## セキュリティ要件

- 管理者権限の確認（JWT認証）
- CSRF対策
- XSS対策（入力値のサニタイズ）
- SQLインジェクション対策

## パフォーマンス要件

- 初期表示: 3秒以内
- API応答: 1秒以内
- 画像最適化（WebP対応）
- 遅延読み込み

## アクセシビリティ要件

- WCAG 2.1 AA準拠
- キーボードナビゲーション
- スクリーンリーダー対応
- 高コントラストモード

## テスト計画

1. **ユニットテスト**
   - 各コンポーネント
   - API エンドポイント
   - バリデーション

2. **統合テスト**
   - CRUD フロー
   - 権限チェック
   - エラーハンドリング

3. **E2Eテスト**
   - イベント作成〜公開フロー
   - 参加者管理フロー
   - モバイル操作

## 実装優先順位

1. イベント一覧表示（Read）
2. イベント作成（Create）
3. イベント編集（Update）
4. 参加者一覧
5. イベント削除（Delete）
6. 統計機能
7. 高度な機能（一括操作、エクスポート等）
