<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lightning Talk æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .test-category {
            margin-bottom: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
        }
        
        .test-category.passed {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.05);
        }
        
        .test-category.failed {
            border-color: #F44336;
            background: rgba(244, 67, 54, 0.05);
        }
        
        .test-category.warning {
            border-color: #FF9800;
            background: rgba(255, 152, 0, 0.05);
        }
        
        .category-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-item {
            margin: 15px 0;
            padding: 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .test-item.pass {
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
        }
        
        .test-item.fail {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #F44336;
        }
        
        .test-item.warn {
            background: rgba(255, 152, 0, 0.1);
            border-left: 4px solid #FF9800;
        }
        
        .test-status {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }
        
        .status-pass {
            background: #4CAF50;
            color: white;
        }
        
        .status-fail {
            background: #F44336;
            color: white;
        }
        
        .status-warn {
            background: #FF9800;
            color: white;
        }
        
        .test-controls {
            text-align: center;
            margin: 30px 0;
        }
        
        .test-btn {
            background: linear-gradient(135deg, #FF6B35, #F7931E);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 0 10px;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 53, 0.3);
        }
        
        .test-progress {
            width: 100%;
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .test-summary {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background: white;
        }
        
        .summary-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .device-test {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fafafa;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .performance-metric {
            display: inline-block;
            margin: 5px;
            padding: 8px 12px;
            background: #e3f2fd;
            border-radius: 20px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ§ª Lightning Talk æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ</h1>
            <p>è¶…æ¥½ã—ã„UXç‰ˆã®å…¨æ©Ÿèƒ½ãƒ»ä»•æ§˜å®Ÿç¾åº¦ã‚’æ¤œè¨¼</p>
        </div>

        <div class="test-controls">
            <button class="test-btn" onclick="runAllTests()">ğŸš€ å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            <button class="test-btn" onclick="runQuickTest()">âš¡ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆ</button>
            <button class="test-btn" onclick="runPerformanceTest()">ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</button>
            <button class="test-btn" onclick="clearResults()">ğŸ—‘ï¸ çµæœã‚¯ãƒªã‚¢</button>
        </div>

        <div class="test-progress">
            <div class="progress-bar" id="progressBar"></div>
        </div>

        <div class="console-output" id="consoleOutput">
            <div>ğŸ”§ ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†</div>
            <div>ğŸ“‹ ãƒ†ã‚¹ãƒˆå¯¾è±¡: lightning-talk-super-fun.html</div>
            <div>â° æº–å‚™å®Œäº† - ãƒ†ã‚¹ãƒˆé–‹å§‹ã‚’ãŠå¾…ã¡ã—ã¦ã„ã¾ã™...</div>
        </div>

        <!-- åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="basicFunctions">
            <div class="category-title">
                <span>ğŸ”§</span>
                <span>åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ</span>
                <span id="basicStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div class="test-item" id="test-page-load">
                <span>ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-dom-elements">
                <span>DOMè¦ç´ ã®å­˜åœ¨ç¢ºèª</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-css-loading">
                <span>CSSã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-js-initialization">
                <span>JavaScriptåˆæœŸåŒ–</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-local-storage">
                <span>ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ©Ÿèƒ½</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
        </div>

        <!-- UIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="uiInteractions">
            <div class="category-title">
                <span>ğŸ®</span>
                <span>UIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</span>
                <span id="uiStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div class="test-item" id="test-button-clicks">
                <span>ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯å¿œç­”</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-form-validation">
                <span>ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-modal-functionality">
                <span>ãƒ¢ãƒ¼ãƒ€ãƒ«é–‹é–‰æ©Ÿèƒ½</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-chat-widget">
                <span>ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-survey-voting">
                <span>ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆæŠ•ç¥¨æ©Ÿèƒ½</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
        </div>

        <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="animations">
            <div class="category-title">
                <span>âœ¨</span>
                <span>ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ</span>
                <span id="animationStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div class="test-item" id="test-particle-system">
                <span>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ </span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-confetti-effect">
                <span>ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-hover-animations">
                <span>ãƒ›ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-scroll-animations">
                <span>ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-micro-interactions">
                <span>ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
        </div>

        <!-- ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="gamification">
            <div class="category-title">
                <span>ğŸ†</span>
                <span>ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ</span>
                <span id="gameStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div class="test-item" id="test-achievement-system">
                <span>é”æˆã‚·ã‚¹ãƒ†ãƒ </span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-score-tracking">
                <span>ã‚¹ã‚³ã‚¢è¿½è·¡</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-progress-tracking">
                <span>ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¿½è·¡</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-notification-system">
                <span>é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ </span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
        </div>

        <!-- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="responsive">
            <div class="category-title">
                <span>ğŸ“±</span>
                <span>ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ</span>
                <span id="responsiveStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div class="device-test">
                <strong>ãƒ‡ãƒã‚¤ã‚¹åˆ¥ãƒ†ã‚¹ãƒˆçµæœ:</strong>
                <div id="deviceTestResults"></div>
            </div>
        </div>

        <!-- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="accessibility">
            <div class="category-title">
                <span>â™¿</span>
                <span>ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ</span>
                <span id="a11yStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div class="test-item" id="test-keyboard-navigation">
                <span>ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-aria-attributes">
                <span>ARIAå±æ€§</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-color-contrast">
                <span>è‰²ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
            <div class="test-item" id="test-screen-reader">
                <span>ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ</span>
                <span class="test-status">æœªå®Ÿè¡Œ</span>
            </div>
        </div>

        <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ -->
        <div class="test-category" id="performance">
            <div class="category-title">
                <span>âš¡</span>
                <span>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ</span>
                <span id="perfStatus" class="test-status">å¾…æ©Ÿä¸­</span>
            </div>
            <div id="performanceMetrics"></div>
        </div>

        <!-- ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼ -->
        <div class="test-summary">
            <h3>ğŸ“Š ãƒ†ã‚¹ãƒˆçµæœã‚µãƒãƒªãƒ¼</h3>
            <div class="summary-grid">
                <div class="summary-item">
                    <div class="summary-number" style="color: #4CAF50;" id="passedCount">0</div>
                    <div>æˆåŠŸ</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number" style="color: #F44336;" id="failedCount">0</div>
                    <div>å¤±æ•—</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number" style="color: #FF9800;" id="warningCount">0</div>
                    <div>è­¦å‘Š</div>
                </div>
                <div class="summary-item">
                    <div class="summary-number" style="color: #2196F3;" id="totalCount">0</div>
                    <div>ç·è¨ˆ</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class LightningTalkTestSuite {
            constructor() {
                this.testResults = {
                    passed: 0,
                    failed: 0,
                    warnings: 0,
                    total: 0
                };
                this.testTarget = null;
                this.consoleOutput = document.getElementById('consoleOutput');
                this.progressBar = document.getElementById('progressBar');
                this.currentProgress = 0;
            }

            log(message, type = 'info') {
                const timestamp = new Date().toLocaleTimeString();
                const colors = {
                    'info': '#00ff00',
                    'success': '#00ff88',
                    'error': '#ff4444',
                    'warning': '#ffaa00'
                };
                
                const logDiv = document.createElement('div');
                logDiv.style.color = colors[type] || colors.info;
                logDiv.textContent = `[${timestamp}] ${message}`;
                this.consoleOutput.appendChild(logDiv);
                this.consoleOutput.scrollTop = this.consoleOutput.scrollHeight;
            }

            updateProgress(percent) {
                this.currentProgress = percent;
                this.progressBar.style.width = percent + '%';
            }

            setTestResult(testId, status, message = '') {
                const testElement = document.getElementById(testId);
                if (!testElement) return;

                testElement.className = `test-item ${status}`;
                const statusElement = testElement.querySelector('.test-status');
                
                const statusClasses = {
                    'pass': 'status-pass',
                    'fail': 'status-fail',
                    'warn': 'status-warn'
                };
                
                const statusTexts = {
                    'pass': 'âœ… æˆåŠŸ',
                    'fail': 'âŒ å¤±æ•—',
                    'warn': 'âš ï¸ è­¦å‘Š'
                };
                
                statusElement.className = `test-status ${statusClasses[status]}`;
                statusElement.textContent = statusTexts[status];
                
                this.testResults[status === 'pass' ? 'passed' : status === 'fail' ? 'failed' : 'warnings']++;
                this.testResults.total++;
                
                this.updateSummary();
                
                if (message) {
                    this.log(`${testId}: ${message}`, status === 'pass' ? 'success' : status === 'fail' ? 'error' : 'warning');
                }
            }

            updateSummary() {
                document.getElementById('passedCount').textContent = this.testResults.passed;
                document.getElementById('failedCount').textContent = this.testResults.failed;
                document.getElementById('warningCount').textContent = this.testResults.warnings;
                document.getElementById('totalCount').textContent = this.testResults.total;
            }

            setCategoryStatus(categoryId, status) {
                const category = document.getElementById(categoryId);
                const statusElement = document.getElementById(categoryId.replace(/s$/, 'Status'));
                
                category.className = `test-category ${status}`;
                
                const statusTexts = {
                    'passed': 'âœ… å®Œäº†',
                    'failed': 'âŒ å•é¡Œã‚ã‚Š',
                    'warning': 'âš ï¸ æ³¨æ„'
                };
                
                statusElement.textContent = statusTexts[status] || 'â³ å®Ÿè¡Œä¸­';
            }

            // åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
            async testBasicFunctions() {
                this.log('ğŸ”§ åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('basicFunctions', 'running');

                // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ãƒ†ã‚¹ãƒˆ
                try {
                    // æ–°ã—ã„iframeã‚’ä½œæˆã—ã¦ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚’èª­ã¿è¾¼ã¿
                    const iframe = document.createElement('iframe');
                    iframe.style.display = 'none';
                    iframe.src = './lightning-talk-super-fun.html';
                    document.body.appendChild(iframe);
                    
                    await new Promise((resolve, reject) => {
                        iframe.onload = () => {
                            this.testTarget = iframe.contentWindow;
                            this.setTestResult('test-page-load', 'pass', 'ãƒšãƒ¼ã‚¸ãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ');
                            resolve();
                        };
                        iframe.onerror = () => {
                            this.setTestResult('test-page-load', 'fail', 'ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ');
                            reject();
                        };
                        
                        // 5ç§’ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
                        setTimeout(() => {
                            if (iframe.contentDocument.readyState !== 'complete') {
                                this.setTestResult('test-page-load', 'warn', 'ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ãŒé…ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                                resolve();
                            }
                        }, 5000);
                    });

                    // DOMè¦ç´ å­˜åœ¨ç¢ºèª
                    const requiredElements = [
                        'header', 'nav', 'main', 'footer',
                        '#hero-heading', '#event-heading', '#about-heading', '#join-heading',
                        '.btn', '.hero-stats', '.event-card', '.chat-widget'
                    ];

                    let elementsFound = 0;
                    requiredElements.forEach(selector => {
                        if (iframe.contentDocument.querySelector(selector)) {
                            elementsFound++;
                        }
                    });

                    if (elementsFound === requiredElements.length) {
                        this.setTestResult('test-dom-elements', 'pass', `å…¨${requiredElements.length}å€‹ã®å¿…é ˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
                    } else {
                        this.setTestResult('test-dom-elements', 'warn', `${elementsFound}/${requiredElements.length}å€‹ã®è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
                    }

                    // CSSã‚¹ã‚¿ã‚¤ãƒ«é©ç”¨ç¢ºèª
                    const bodyStyles = iframe.contentWindow.getComputedStyle(iframe.contentDocument.body);
                    if (bodyStyles.fontFamily && bodyStyles.background) {
                        this.setTestResult('test-css-loading', 'pass', 'CSSã‚¹ã‚¿ã‚¤ãƒ«ãŒæ­£å¸¸ã«é©ç”¨ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-css-loading', 'fail', 'CSSã‚¹ã‚¿ã‚¤ãƒ«ã®é©ç”¨ã«å•é¡ŒãŒã‚ã‚Šã¾ã™');
                    }

                    // JavaScriptåˆæœŸåŒ–ç¢ºèª
                    if (iframe.contentWindow.superFunLightningTalkApp) {
                        this.setTestResult('test-js-initialization', 'pass', 'JavaScriptã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒåˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸ');
                    } else {
                        this.setTestResult('test-js-initialization', 'fail', 'JavaScriptã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ');
                    }

                    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ
                    try {
                        iframe.contentWindow.localStorage.setItem('test', 'value');
                        const testValue = iframe.contentWindow.localStorage.getItem('test');
                        if (testValue === 'value') {
                            this.setTestResult('test-local-storage', 'pass', 'ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒåˆ©ç”¨å¯èƒ½ã§ã™');
                            iframe.contentWindow.localStorage.removeItem('test');
                        } else {
                            this.setTestResult('test-local-storage', 'fail', 'ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®èª­ã¿æ›¸ãã«å¤±æ•—ã—ã¾ã—ãŸ');
                        }
                    } catch (e) {
                        this.setTestResult('test-local-storage', 'fail', 'ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                    }

                    this.setCategoryStatus('basicFunctions', 'passed');

                } catch (error) {
                    this.log(`åŸºæœ¬æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.setCategoryStatus('basicFunctions', 'failed');
                }
            }

            // UIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
            async testUIInteractions() {
                this.log('ğŸ® UIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('uiInteractions', 'running');

                if (!this.testTarget) {
                    this.log('ãƒ†ã‚¹ãƒˆå¯¾è±¡ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“', 'error');
                    return;
                }

                try {
                    const doc = this.testTarget.document;
                    
                    // ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
                    const buttons = doc.querySelectorAll('.btn');
                    if (buttons.length > 0) {
                        this.setTestResult('test-button-clicks', 'pass', `${buttons.length}å€‹ã®ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`);
                    } else {
                        this.setTestResult('test-button-clicks', 'fail', 'ãƒœã‚¿ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
                    const forms = doc.querySelectorAll('form');
                    const inputs = doc.querySelectorAll('input[required]');
                    if (inputs.length > 0) {
                        this.setTestResult('test-form-validation', 'pass', `${inputs.length}å€‹ã®å¿…é ˆå…¥åŠ›é …ç›®ãŒã‚ã‚Šã¾ã™`);
                    } else {
                        this.setTestResult('test-form-validation', 'warn', 'å¿…é ˆå…¥åŠ›é …ç›®ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    // ãƒ¢ãƒ¼ãƒ€ãƒ«æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
                    const modal = doc.getElementById('registerModal');
                    if (modal) {
                        this.setTestResult('test-modal-functionality', 'pass', 'ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ãŒå­˜åœ¨ã—ã¾ã™');
                    } else {
                        this.setTestResult('test-modal-functionality', 'fail', 'ãƒ¢ãƒ¼ãƒ€ãƒ«è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    // ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
                    const chatWidget = doc.getElementById('chatWidget');
                    const chatToggle = doc.getElementById('chatToggle');
                    if (chatWidget && chatToggle) {
                        this.setTestResult('test-chat-widget', 'pass', 'ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-chat-widget', 'fail', 'ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã«å•é¡ŒãŒã‚ã‚Šã¾ã™');
                    }

                    // ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆæŠ•ç¥¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
                    const surveyButtons = doc.querySelectorAll('.survey-btn');
                    if (surveyButtons.length >= 2) {
                        this.setTestResult('test-survey-voting', 'pass', 'ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆæŠ•ç¥¨ãƒœã‚¿ãƒ³ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-survey-voting', 'fail', 'ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆæŠ•ç¥¨æ©Ÿèƒ½ã«å•é¡ŒãŒã‚ã‚Šã¾ã™');
                    }

                    this.setCategoryStatus('uiInteractions', 'passed');

                } catch (error) {
                    this.log(`UIã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.setCategoryStatus('uiInteractions', 'failed');
                }
            }

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ†ã‚¹ãƒˆ
            async testAnimations() {
                this.log('âœ¨ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('animations', 'running');

                if (!this.testTarget) return;

                try {
                    const doc = this.testTarget.document;
                    
                    // ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
                    const particles = doc.getElementById('particles');
                    const particleElements = doc.querySelectorAll('.particle');
                    if (particles && particleElements.length > 0) {
                        this.setTestResult('test-particle-system', 'pass', `${particleElements.length}å€‹ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™`);
                    } else {
                        this.setTestResult('test-particle-system', 'fail', 'ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚·ã‚¹ãƒ†ãƒ ãŒå‹•ä½œã—ã¦ã„ã¾ã›ã‚“');
                    }

                    // CSS ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª
                    const animatedElements = doc.querySelectorAll('[style*="animation"], .fade-in, .scale-in');
                    if (animatedElements.length > 0) {
                        this.setTestResult('test-hover-animations', 'pass', `${animatedElements.length}å€‹ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ãŒã‚ã‚Šã¾ã™`);
                    } else {
                        this.setTestResult('test-hover-animations', 'warn', 'ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ãŒå°‘ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                    }

                    // ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆï¼ˆæ©Ÿèƒ½ã®å­˜åœ¨ç¢ºèªï¼‰
                    if (this.testTarget.superFunLightningTalkApp && 
                        typeof this.testTarget.superFunLightningTalkApp.createConfetti === 'function') {
                        this.setTestResult('test-confetti-effect', 'pass', 'ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆæ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-confetti-effect', 'fail', 'ã‚³ãƒ³ãƒ•ã‚§ãƒƒãƒ†ã‚£ã‚¨ãƒ•ã‚§ã‚¯ãƒˆæ©Ÿèƒ½ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
                    const scrollElements = doc.querySelectorAll('.fade-in, .scale-in');
                    if (scrollElements.length > 0) {
                        this.setTestResult('test-scroll-animations', 'pass', 'ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-scroll-animations', 'warn', 'ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒä¸ååˆ†ã§ã™');
                    }

                    // ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³
                    const interactiveElements = doc.querySelectorAll('.btn, .topic-item, .participation-card');
                    if (interactiveElements.length > 0) {
                        this.setTestResult('test-micro-interactions', 'pass', `${interactiveElements.length}å€‹ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ ãŒã‚ã‚Šã¾ã™`);
                    } else {
                        this.setTestResult('test-micro-interactions', 'fail', 'ãƒã‚¤ã‚¯ãƒ­ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³è¦ç´ ãŒä¸è¶³ã—ã¦ã„ã¾ã™');
                    }

                    this.setCategoryStatus('animations', 'passed');

                } catch (error) {
                    this.log(`ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.setCategoryStatus('animations', 'failed');
                }
            }

            // ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
            async testGamification() {
                this.log('ğŸ† ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('gamification', 'running');

                if (!this.testTarget) return;

                try {
                    const app = this.testTarget.superFunLightningTalkApp;
                    
                    if (!app) {
                        this.setTestResult('test-achievement-system', 'fail', 'ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                        this.setCategoryStatus('gamification', 'failed');
                        return;
                    }

                    // é”æˆã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
                    if (app.achievements && Array.isArray(app.achievements)) {
                        this.setTestResult('test-achievement-system', 'pass', `${app.achievements.length}å€‹ã®é”æˆé …ç›®ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™`);
                    } else {
                        this.setTestResult('test-achievement-system', 'fail', 'é”æˆã‚·ã‚¹ãƒ†ãƒ ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                    }

                    // ã‚¹ã‚³ã‚¢è¿½è·¡ãƒ†ã‚¹ãƒˆ
                    if (app.data && typeof app.data.gameScore !== 'undefined') {
                        this.setTestResult('test-score-tracking', 'pass', 'ã‚¹ã‚³ã‚¢è¿½è·¡æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-score-tracking', 'fail', 'ã‚¹ã‚³ã‚¢è¿½è·¡æ©Ÿèƒ½ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¿½è·¡ãƒ†ã‚¹ãƒˆ
                    if (typeof app.addInteractionScore === 'function') {
                        this.setTestResult('test-progress-tracking', 'pass', 'ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¿½è·¡æ©Ÿèƒ½ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-progress-tracking', 'fail', 'ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹è¿½è·¡æ©Ÿèƒ½ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    // é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
                    if (typeof app.showAchievementNotification === 'function') {
                        this.setTestResult('test-notification-system', 'pass', 'é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™');
                    } else {
                        this.setTestResult('test-notification-system', 'fail', 'é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                    }

                    this.setCategoryStatus('gamification', 'passed');

                } catch (error) {
                    this.log(`ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.setCategoryStatus('gamification', 'failed');
                }
            }

            // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆ
            async testResponsiveDesign() {
                this.log('ğŸ“± ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('responsive', 'running');

                const deviceSizes = [
                    { name: 'Desktop', width: 1920, height: 1080 },
                    { name: 'Laptop', width: 1366, height: 768 },
                    { name: 'Tablet', width: 768, height: 1024 },
                    { name: 'Mobile Large', width: 414, height: 896 },
                    { name: 'Mobile', width: 375, height: 667 },
                    { name: 'Mobile Small', width: 320, height: 568 }
                ];

                const resultsContainer = document.getElementById('deviceTestResults');
                resultsContainer.innerHTML = '';

                let passedDevices = 0;

                for (const device of deviceSizes) {
                    try {
                        // ãƒ‡ãƒã‚¤ã‚¹ã‚µã‚¤ã‚ºã®ãƒ†ã‚¹ãƒˆçµæœã‚’è¡¨ç¤º
                        const deviceResult = document.createElement('div');
                        deviceResult.style.cssText = `
                            margin: 10px 0; 
                            padding: 10px; 
                            border-radius: 5px; 
                            background: #f0f0f0;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        `;

                        // å®Ÿéš›ã®ãƒ†ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯ï¼ˆç°¡æ˜“ç‰ˆï¼‰
                        const isSupported = device.width >= 320; // æœ€å°å¹…è¦ä»¶
                        const hasBreakpoint = this.checkBreakpointSupport(device.width);
                        
                        if (isSupported && hasBreakpoint) {
                            deviceResult.innerHTML = `
                                <span>${device.name} (${device.width}x${device.height})</span>
                                <span style="color: #4CAF50; font-weight: bold;">âœ… å¯¾å¿œ</span>
                            `;
                            passedDevices++;
                        } else {
                            deviceResult.innerHTML = `
                                <span>${device.name} (${device.width}x${device.height})</span>
                                <span style="color: #F44336; font-weight: bold;">âŒ å•é¡Œ</span>
                            `;
                        }

                        resultsContainer.appendChild(deviceResult);

                    } catch (error) {
                        this.log(`${device.name}ã®ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    }
                }

                if (passedDevices === deviceSizes.length) {
                    this.setCategoryStatus('responsive', 'passed');
                    this.log(`å…¨${deviceSizes.length}ãƒ‡ãƒã‚¤ã‚¹ã§ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã‚’ç¢ºèª`, 'success');
                } else if (passedDevices >= deviceSizes.length * 0.8) {
                    this.setCategoryStatus('responsive', 'warning');
                    this.log(`${passedDevices}/${deviceSizes.length}ãƒ‡ãƒã‚¤ã‚¹ã§å¯¾å¿œæ¸ˆã¿`, 'warning');
                } else {
                    this.setCategoryStatus('responsive', 'failed');
                    this.log(`ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œãŒä¸ååˆ†: ${passedDevices}/${deviceSizes.length}`, 'error');
                }
            }

            checkBreakpointSupport(width) {
                // CSS breakpoints ã®ãƒã‚§ãƒƒã‚¯
                const breakpoints = [320, 576, 768, 992, 1200];
                return breakpoints.some(bp => Math.abs(width - bp) <= 100);
            }

            // ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ
            async testAccessibility() {
                this.log('â™¿ ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('accessibility', 'running');

                if (!this.testTarget) return;

                try {
                    const doc = this.testTarget.document;

                    // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
                    const focusableElements = doc.querySelectorAll(
                        'a, button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
                    );
                    if (focusableElements.length > 0) {
                        this.setTestResult('test-keyboard-navigation', 'pass', 
                            `${focusableElements.length}å€‹ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ãŒã‚ã‚Šã¾ã™`);
                    } else {
                        this.setTestResult('test-keyboard-navigation', 'fail', 
                            'ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯èƒ½è¦ç´ ãŒä¸è¶³ã—ã¦ã„ã¾ã™');
                    }

                    // ARIAå±æ€§ãƒ†ã‚¹ãƒˆ
                    const ariaElements = doc.querySelectorAll('[aria-label], [aria-labelledby], [aria-describedby], [role]');
                    if (ariaElements.length > 0) {
                        this.setTestResult('test-aria-attributes', 'pass', 
                            `${ariaElements.length}å€‹ã®è¦ç´ ã«ARIAå±æ€§ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™`);
                    } else {
                        this.setTestResult('test-aria-attributes', 'warn', 
                            'ARIAå±æ€§ã®ä½¿ç”¨ãŒå°‘ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™');
                    }

                    // è‰²ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ†ã‚¹ãƒˆï¼ˆç°¡æ˜“ï¼‰
                    const colorTestPassed = this.testColorContrast(doc);
                    if (colorTestPassed) {
                        this.setTestResult('test-color-contrast', 'pass', 'è‰²ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãŒé©åˆ‡ã§ã™');
                    } else {
                        this.setTestResult('test-color-contrast', 'warn', 'è‰²ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆã®ç¢ºèªãŒå¿…è¦ã§ã™');
                    }

                    // ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œãƒ†ã‚¹ãƒˆ
                    const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
                    const landmarks = doc.querySelectorAll('header, nav, main, footer, [role="banner"], [role="navigation"], [role="main"], [role="contentinfo"]');
                    if (headings.length > 0 && landmarks.length > 0) {
                        this.setTestResult('test-screen-reader', 'pass', 
                            `è¦‹å‡ºã—${headings.length}å€‹ã€ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯${landmarks.length}å€‹ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™`);
                    } else {
                        this.setTestResult('test-screen-reader', 'warn', 
                            'è¦‹å‡ºã—æ§‹é€ ã¾ãŸã¯ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã®æ”¹å–„ãŒå¿…è¦ã§ã™');
                    }

                    this.setCategoryStatus('accessibility', 'passed');

                } catch (error) {
                    this.log(`ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.setCategoryStatus('accessibility', 'failed');
                }
            }

            testColorContrast(doc) {
                // ç°¡æ˜“çš„ãªè‰²ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒ†ã‚¹ãƒˆ
                // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã‚ˆã‚Šè©³ç´°ãªè¨ˆç®—ãŒå¿…è¦
                const textElements = doc.querySelectorAll('p, span, div, button, a');
                let contrastIssues = 0;
                
                for (let i = 0; i < Math.min(textElements.length, 20); i++) {
                    const element = textElements[i];
                    const styles = this.testTarget.getComputedStyle(element);
                    const color = styles.color;
                    const backgroundColor = styles.backgroundColor;
                    
                    // ç°¡æ˜“ãƒã‚§ãƒƒã‚¯ï¼ˆå®Ÿéš›ã«ã¯è‰²ã®æ˜åº¦ã‚’è¨ˆç®—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰
                    if (color && backgroundColor && color !== backgroundColor) {
                        // åŸºæœ¬çš„ãªã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆãƒã‚§ãƒƒã‚¯é€šé
                        continue;
                    } else {
                        contrastIssues++;
                    }
                }
                
                return contrastIssues < textElements.length * 0.1; // 10%æœªæº€ã®å•é¡Œãªã‚‰åˆæ ¼
            }

            // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
            async testPerformance() {
                this.log('âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹...');
                this.setCategoryStatus('performance', 'running');

                const metricsContainer = document.getElementById('performanceMetrics');
                metricsContainer.innerHTML = '';

                try {
                    // Performance API ã‚’ä½¿ç”¨
                    const navigation = performance.getEntriesByType('navigation')[0];
                    const metrics = {};

                    if (navigation) {
                        metrics['DNS Lookup'] = Math.round(navigation.domainLookupEnd - navigation.domainLookupStart);
                        metrics['TCP Connection'] = Math.round(navigation.connectEnd - navigation.connectStart);
                        metrics['Request/Response'] = Math.round(navigation.responseEnd - navigation.requestStart);
                        metrics['DOM Processing'] = Math.round(navigation.domContentLoadedEventEnd - navigation.responseEnd);
                        metrics['Load Event'] = Math.round(navigation.loadEventEnd - navigation.loadEventStart);
                        metrics['Total Load Time'] = Math.round(navigation.loadEventEnd - navigation.navigationStart);
                    }

                    // ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ï¼ˆå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ï¼‰
                    if (performance.memory) {
                        metrics['Memory Used'] = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + ' MB';
                        metrics['Memory Total'] = Math.round(performance.memory.totalJSHeapSize / 1024 / 1024) + ' MB';
                    }

                    // FPSè¨ˆæ¸¬ï¼ˆç°¡æ˜“ï¼‰
                    const fpsMetric = await this.measureFPS();
                    metrics['Average FPS'] = fpsMetric;

                    // ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º
                    Object.entries(metrics).forEach(([key, value]) => {
                        const metricElement = document.createElement('span');
                        metricElement.className = 'performance-metric';
                        metricElement.textContent = `${key}: ${value}${typeof value === 'number' && key.includes('Time') ? 'ms' : ''}`;
                        metricsContainer.appendChild(metricElement);
                    });

                    // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è©•ä¾¡
                    const totalLoadTime = metrics['Total Load Time'];
                    if (totalLoadTime < 3000) {
                        this.setCategoryStatus('performance', 'passed');
                        this.log(`å„ªç§€ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ${totalLoadTime}ms`, 'success');
                    } else if (totalLoadTime < 5000) {
                        this.setCategoryStatus('performance', 'warning');
                        this.log(`æ™®é€šã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ${totalLoadTime}ms`, 'warning');
                    } else {
                        this.setCategoryStatus('performance', 'failed');
                        this.log(`æ”¹å–„ãŒå¿…è¦ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹: ${totalLoadTime}ms`, 'error');
                    }

                } catch (error) {
                    this.log(`ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼: ${error.message}`, 'error');
                    this.setCategoryStatus('performance', 'failed');
                }
            }

            async measureFPS() {
                return new Promise((resolve) => {
                    let frames = 0;
                    const startTime = performance.now();
                    
                    function countFrames() {
                        frames++;
                        if (frames < 60) {
                            requestAnimationFrame(countFrames);
                        } else {
                            const endTime = performance.now();
                            const fps = Math.round((frames * 1000) / (endTime - startTime));
                            resolve(fps);
                        }
                    }
                    
                    requestAnimationFrame(countFrames);
                });
            }

            // å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
            async runAllTests() {
                this.log('ğŸš€ å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...', 'info');
                this.clearResults();
                
                const tests = [
                    { name: 'basicFunctions', func: this.testBasicFunctions, progress: 20 },
                    { name: 'uiInteractions', func: this.testUIInteractions, progress: 35 },
                    { name: 'animations', func: this.testAnimations, progress: 50 },
                    { name: 'gamification', func: this.testGamification, progress: 65 },
                    { name: 'responsive', func: this.testResponsiveDesign, progress: 80 },
                    { name: 'accessibility', func: this.testAccessibility, progress: 90 },
                    { name: 'performance', func: this.testPerformance, progress: 100 }
                ];

                for (const test of tests) {
                    this.updateProgress(test.progress);
                    await test.func.call(this);
                    await new Promise(resolve => setTimeout(resolve, 1000)); // ãƒ†ã‚¹ãƒˆé–“ã®å¾…æ©Ÿæ™‚é–“
                }

                this.log('âœ… å…¨ãƒ†ã‚¹ãƒˆå®Œäº†', 'success');
                this.generateTestReport();
            }

            async runQuickTest() {
                this.log('âš¡ ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...', 'info');
                this.clearResults();
                
                await this.testBasicFunctions();
                this.updateProgress(50);
                await this.testUIInteractions();
                this.updateProgress(100);
                
                this.log('âœ… ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†', 'success');
            }

            async runPerformanceTest() {
                this.log('ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™...', 'info');
                this.clearResults();
                
                await this.testPerformance();
                this.updateProgress(100);
                
                this.log('âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆå®Œäº†', 'success');
            }

            clearResults() {
                this.testResults = { passed: 0, failed: 0, warnings: 0, total: 0 };
                this.updateSummary();
                this.updateProgress(0);
                
                // å…¨ãƒ†ã‚¹ãƒˆé …ç›®ã‚’ãƒªã‚»ãƒƒãƒˆ
                document.querySelectorAll('.test-item').forEach(item => {
                    item.className = 'test-item';
                    const status = item.querySelector('.test-status');
                    if (status) {
                        status.className = 'test-status';
                        status.textContent = 'æœªå®Ÿè¡Œ';
                    }
                });

                // ã‚«ãƒ†ã‚´ãƒªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
                document.querySelectorAll('[id$="Status"]').forEach(status => {
                    status.className = 'test-status';
                    status.textContent = 'å¾…æ©Ÿä¸­';
                });

                document.querySelectorAll('.test-category').forEach(category => {
                    category.className = 'test-category';
                });

                this.consoleOutput.innerHTML = '<div>ğŸ”§ ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ</div>';
            }

            generateTestReport() {
                const { passed, failed, warnings, total } = this.testResults;
                const successRate = total > 0 ? Math.round((passed / total) * 100) : 0;
                
                this.log('ğŸ“‹ ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†:', 'info');
                this.log(`æˆåŠŸç‡: ${successRate}% (${passed}/${total})`, successRate >= 80 ? 'success' : 'warning');
                this.log(`è©³ç´°: æˆåŠŸ=${passed}, å¤±æ•—=${failed}, è­¦å‘Š=${warnings}`, 'info');
                
                if (successRate >= 90) {
                    this.log('ğŸ‰ å„ªç§€ãªå“è³ªã§ã™ï¼', 'success');
                } else if (successRate >= 70) {
                    this.log('ğŸ‘ è‰¯å¥½ãªå“è³ªã§ã™', 'success');
                } else {
                    this.log('âš ï¸ æ”¹å–„ãŒå¿…è¦ã§ã™', 'warning');
                }
            }
        }

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°
        let testSuite;

        function initTestSuite() {
            testSuite = new LightningTalkTestSuite();
        }

        function runAllTests() {
            if (!testSuite) initTestSuite();
            testSuite.runAllTests();
        }

        function runQuickTest() {
            if (!testSuite) initTestSuite();
            testSuite.runQuickTest();
        }

        function runPerformanceTest() {
            if (!testSuite) initTestSuite();
            testSuite.runPerformanceTest();
        }

        function clearResults() {
            if (!testSuite) initTestSuite();
            testSuite.clearResults();
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initTestSuite();
            testSuite.log('ğŸ¯ ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆæº–å‚™å®Œäº† - ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¦ãã ã•ã„', 'success');
        });
    </script>
</body>
</html>