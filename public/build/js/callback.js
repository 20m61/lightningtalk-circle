import{c as m,j as e,b as n,a as u}from"./auth-Cj71Dr4d.js";const g=()=>{const[r,t]=n.useState("processing"),[a,o]=n.useState("認証情報を処理しています..."),[c,i]=n.useState(null);n.useEffect(()=>{l()},[]);const l=async()=>{try{t("processing"),o("認証情報を処理しています...");const s=await u.handleCallback();s.success?(t("success"),o("ログインに成功しました。リダイレクトしています..."),setTimeout(()=>{const d=sessionStorage.getItem("redirectAfterLogin")||"/";sessionStorage.removeItem("redirectAfterLogin"),window.location.href=d},2e3)):(t("error"),i(s.error||"認証に失敗しました"),o("認証処理中にエラーが発生しました"),setTimeout(()=>{window.location.href="/"},5e3))}catch(s){console.error("Callback error:",s),t("error"),i(s.message||"予期しないエラーが発生しました"),o("認証処理中にエラーが発生しました"),setTimeout(()=>{window.location.href="/"},5e3)}};return e.jsxs("div",{className:"text-center",children:[r==="processing"&&e.jsx("p",{className:"text-gray-500",children:a}),r==="success"&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mt-4",children:e.jsx("p",{className:"text-sm text-green-600",children:a})}),r==="error"&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mt-4",children:e.jsxs("p",{className:"text-sm text-red-600",children:[c&&`認証に失敗しました: ${c}`,e.jsx("br",{}),e.jsx("a",{href:"/",className:"underline hover:text-red-700",children:"ホームページに戻る"})]})})]})};class h{constructor(){this.root=null,this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.mount()):this.mount()}mount(){const t=document.getElementById("status-message");if(!t){console.error("Status message container not found");return}this.root=m.createRoot(t),this.render()}render(){this.root.render(e.jsx(g,{}))}}new h;
