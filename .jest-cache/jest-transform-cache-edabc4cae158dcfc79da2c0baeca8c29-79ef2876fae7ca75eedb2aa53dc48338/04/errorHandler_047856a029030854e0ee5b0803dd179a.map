{"version":3,"names":["cov_2004zaq7y6","actualCoverage","s","errorHandler","err","req","res","next","f","error","message","console","name","b","status","code","Object","values","errors","map","val","json","success","process","env","NODE_ENV","stack"],"sources":["errorHandler.js"],"sourcesContent":["/**\n * Error handling middleware\n */\n\nexport const errorHandler = (err, req, res, next) => {\n    let error = { ...err };\n    error.message = err.message;\n\n    // Log error\n    console.error(err);\n\n    // Mongoose bad ObjectId\n    if (err.name === 'CastError') {\n        const message = 'Resource not found';\n        error = { message, status: 404 };\n    }\n\n    // Mongoose duplicate key\n    if (err.code === 11000) {\n        const message = 'Duplicate field value entered';\n        error = { message, status: 400 };\n    }\n\n    // Mongoose validation error\n    if (err.name === 'ValidationError') {\n        const message = Object.values(err.errors).map(val => val.message);\n        error = { message, status: 400 };\n    }\n\n    res.status(error.status || 500).json({\n        success: false,\n        error: error.message || 'Server Error',\n        ...(process.env.NODE_ENV === 'development' && { stack: err.stack })\n    });\n};"],"mappings":"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","ignoreList":[]}