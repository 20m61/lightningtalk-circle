985371087ade30d52dc496898bba4ae6
/**
 * Database Service for Lightning Talk Event Management
 * File-based JSON database with in-memory caching for development
 * Can be easily replaced with PostgreSQL/MongoDB for production
 */

import fs from 'fs/promises';
import path from 'path';
import { fileURLToPath } from 'url';
import { EventEmitter } from 'events';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
export class DatabaseService extends EventEmitter {
  constructor() {
    super();
    this.dataDir = path.join(__dirname, '../data');
    this.cache = new Map();
    this.initialized = false;
    this.saveQueue = new Map();
    this.saveTimeout = null;
  }
  async initialize() {
    try {
      // Ensure data directory exists
      await fs.mkdir(this.dataDir, {
        recursive: true
      });

      // Initialize collections
      this.collections = {
        events: 'events.json',
        participants: 'participants.json',
        talks: 'talks.json',
        settings: 'settings.json',
        analytics: 'analytics.json'
      };

      // Load or create each collection
      for (const [collection, filename] of Object.entries(this.collections)) {
        await this.initializeCollection(collection, filename);
      }

      // Initialize settings
      await this.initializeSettings();
      this.initialized = true;
      this.emit('ready');
      console.log('📦 Database service initialized');
    } catch (error) {
      console.error('Failed to initialize database:', error);
      throw error;
    }
  }
  async initializeCollection(collection, filename) {
    const filePath = path.join(this.dataDir, filename);
    try {
      const data = await fs.readFile(filePath, 'utf8');
      this.cache.set(collection, JSON.parse(data));
    } catch (error) {
      if (error.code === 'ENOENT') {
        // File doesn't exist, create empty collection
        const emptyData = [];
        this.cache.set(collection, emptyData);
        await this.saveCollection(collection);
        console.log(`📝 Created new collection: ${collection}`);
      } else {
        throw error;
      }
    }
  }
  async initializeSettings() {
    const defaultSettings = {
      siteName: 'なんでもライトニングトーク',
      siteUrl: process.env.SITE_URL || 'http://localhost:3000',
      adminEmail: process.env.ADMIN_EMAIL || 'admin@example.com',
      emailEnabled: process.env.EMAIL_ENABLED === 'true',
      analyticsEnabled: true,
      registrationSettings: {
        requireApproval: false,
        allowWalkIn: true,
        maxParticipants: 100,
        autoConfirmation: true
      },
      talkSettings: {
        requireApproval: false,
        allowLastMinute: true,
        maxDuration: 5,
        categories: ['tech', 'hobby', 'learning', 'travel', 'food', 'game', 'lifehack', 'pet', 'garden', 'money', 'sports', 'music', 'other']
      },
      notificationSettings: {
        emailOnRegistration: true,
        emailOnTalkSubmission: true,
        reminderEmails: true,
        reminderDays: [7, 1]
      },
      createdAt: new Date().toISOString(),
      updatedAt: new Date().toISOString()
    };
    const existingSettings = this.cache.get('settings');
    if (!existingSettings || existingSettings.length === 0) {
      this.cache.set('settings', [defaultSettings]);
      await this.saveCollection('settings');
    }
  }
  async waitForConnection() {
    if (this.initialized) {
      return;
    }
    return new Promise(resolve => {
      this.once('ready', resolve);
    });
  }

  // CRUD Operations
  async findAll(collection, filter = {}) {
    this.validateCollection(collection);
    const data = this.cache.get(collection) || [];
    if (Object.keys(filter).length === 0) {
      return data;
    }
    return data.filter(item => this.matchesFilter(item, filter));
  }
  async findById(collection, id) {
    this.validateCollection(collection);
    const data = this.cache.get(collection) || [];
    return data.find(item => item.id === id);
  }
  async findOne(collection, filter) {
    this.validateCollection(collection);
    const data = this.cache.get(collection) || [];
    return data.find(item => this.matchesFilter(item, filter));
  }
  async create(collection, document) {
    this.validateCollection(collection);

    // Add metadata
    const now = new Date().toISOString();
    const newDocument = {
      id: this.generateId(),
      ...document,
      createdAt: now,
      updatedAt: now
    };

    // Add to cache
    const data = this.cache.get(collection) || [];
    data.push(newDocument);
    this.cache.set(collection, data);

    // Queue save
    this.queueSave(collection);

    // Emit event
    this.emit('created', {
      collection,
      document: newDocument
    });
    return newDocument;
  }
  async update(collection, id, updates) {
    this.validateCollection(collection);
    const data = this.cache.get(collection) || [];
    const index = data.findIndex(item => item.id === id);
    if (index === -1) {
      throw new Error(`Document with id ${id} not found in ${collection}`);
    }

    // Apply updates
    const updatedDocument = {
      ...data[index],
      ...updates,
      updatedAt: new Date().toISOString()
    };
    data[index] = updatedDocument;
    this.cache.set(collection, data);

    // Queue save
    this.queueSave(collection);

    // Emit event
    this.emit('updated', {
      collection,
      document: updatedDocument
    });
    return updatedDocument;
  }
  async delete(collection, id) {
    this.validateCollection(collection);
    const data = this.cache.get(collection) || [];
    const index = data.findIndex(item => item.id === id);
    if (index === -1) {
      throw new Error(`Document with id ${id} not found in ${collection}`);
    }
    const deletedDocument = data[index];
    data.splice(index, 1);
    this.cache.set(collection, data);

    // Queue save
    this.queueSave(collection);

    // Emit event
    this.emit('deleted', {
      collection,
      document: deletedDocument
    });
    return deletedDocument;
  }

  // Aggregation methods
  async count(collection, filter = {}) {
    const results = await this.findAll(collection, filter);
    return results.length;
  }
  async countByField(collection, field) {
    const data = await this.findAll(collection);
    const counts = {};
    data.forEach(item => {
      const value = item[field] || 'unknown';
      counts[value] = (counts[value] || 0) + 1;
    });
    return counts;
  }
  async getStats(collection) {
    const data = await this.findAll(collection);
    return {
      total: data.length,
      createdToday: data.filter(item => {
        const created = new Date(item.createdAt);
        const today = new Date();
        return created.toDateString() === today.toDateString();
      }).length,
      createdThisWeek: data.filter(item => {
        const created = new Date(item.createdAt);
        const weekAgo = new Date();
        weekAgo.setDate(weekAgo.getDate() - 7);
        return created >= weekAgo;
      }).length,
      lastUpdated: data.length > 0 ? Math.max(...data.map(item => new Date(item.updatedAt))) : null
    };
  }

  // Event-specific methods
  async getCurrentEvent() {
    const events = await this.findAll('events', {
      status: 'upcoming'
    });
    return events.sort((a, b) => new Date(a.date) - new Date(b.date))[0];
  }
  async getEventParticipants(eventId) {
    return await this.findAll('participants', {
      eventId
    });
  }
  async getEventTalks(eventId) {
    return await this.findAll('talks', {
      eventId
    });
  }
  async getEventAnalytics(eventId) {
    const participants = await this.getEventParticipants(eventId);
    const talks = await this.getEventTalks(eventId);
    return {
      participantCount: participants.length,
      speakerCount: talks.length,
      participationTypes: await this.countByField('participants', 'participationType'),
      talkCategories: await this.countByField('talks', 'category'),
      registrationTrend: this.getRegistrationTrend(participants),
      avgRating: this.calculateAverageRating(talks)
    };
  }
  getRegistrationTrend(participants) {
    const trend = {};
    participants.forEach(participant => {
      const date = new Date(participant.createdAt).toDateString();
      trend[date] = (trend[date] || 0) + 1;
    });
    return trend;
  }
  calculateAverageRating(talks) {
    const ratingsArray = talks.filter(talk => talk.rating).map(talk => talk.rating);
    if (ratingsArray.length === 0) {
      return null;
    }
    return ratingsArray.reduce((sum, rating) => sum + rating, 0) / ratingsArray.length;
  }

  // Settings management
  async getSettings() {
    const settings = this.cache.get('settings') || [];
    return settings[0] || {};
  }
  async updateSettings(updates) {
    const settings = await this.getSettings();
    const updatedSettings = {
      ...settings,
      ...updates,
      updatedAt: new Date().toISOString()
    };
    this.cache.set('settings', [updatedSettings]);
    await this.queueSave('settings');
    return updatedSettings;
  }

  // Data seeding for development
  async seed(seedData) {
    for (const [collection, data] of Object.entries(seedData)) {
      if (this.collections[collection]) {
        this.cache.set(collection, data);
        await this.saveCollection(collection);
        console.log(`🌱 Seeded ${collection} with ${data.length} items`);
      }
    }
  }

  // Data export/backup
  async exportData() {
    const exportData = {};
    for (const collection of Object.keys(this.collections)) {
      exportData[collection] = this.cache.get(collection) || [];
    }
    return {
      ...exportData,
      exportedAt: new Date().toISOString(),
      version: '1.0.0'
    };
  }
  async importData(importData) {
    for (const [collection, data] of Object.entries(importData)) {
      if (this.collections[collection] && Array.isArray(data)) {
        this.cache.set(collection, data);
        await this.saveCollection(collection);
        console.log(`📥 Imported ${collection} with ${data.length} items`);
      }
    }
  }

  // Helper methods
  validateCollection(collection) {
    if (!this.collections[collection]) {
      throw new Error(`Invalid collection: ${collection}`);
    }
  }
  matchesFilter(item, filter) {
    return Object.entries(filter).every(([key, value]) => {
      if (typeof value === 'object' && value !== null) {
        // Handle operators like { $gte: value }
        return Object.entries(value).every(([operator, operatorValue]) => {
          switch (operator) {
            case '$gte':
              return item[key] >= operatorValue;
            case '$lte':
              return item[key] <= operatorValue;
            case '$gt':
              return item[key] > operatorValue;
            case '$lt':
              return item[key] < operatorValue;
            case '$ne':
              return item[key] !== operatorValue;
            case '$in':
              return Array.isArray(operatorValue) && operatorValue.includes(item[key]);
            case '$nin':
              return Array.isArray(operatorValue) && !operatorValue.includes(item[key]);
            default:
              return false;
          }
        });
      }
      return item[key] === value;
    });
  }
  generateId() {
    return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
  }
  queueSave(collection) {
    this.saveQueue.set(collection, true);
    if (this.saveTimeout) {
      clearTimeout(this.saveTimeout);
    }
    this.saveTimeout = setTimeout(async () => {
      const collectionsToSave = Array.from(this.saveQueue.keys());
      this.saveQueue.clear();
      for (const collection of collectionsToSave) {
        await this.saveCollection(collection);
      }
    }, 1000); // Batch saves every 1 second
  }
  async saveCollection(collection) {
    try {
      const filename = this.collections[collection];
      const filePath = path.join(this.dataDir, filename);
      const data = this.cache.get(collection) || [];
      await fs.writeFile(filePath, JSON.stringify(data, null, 2));
    } catch (error) {
      console.error(`Failed to save collection ${collection}:`, error);
      throw error;
    }
  }
  async close() {
    // Save all pending changes
    if (this.saveTimeout) {
      clearTimeout(this.saveTimeout);
    }
    const collectionsToSave = Array.from(this.saveQueue.keys());
    for (const collection of collectionsToSave) {
      await this.saveCollection(collection);
    }
    console.log('📦 Database service closed');
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInBhdGgiLCJmaWxlVVJMVG9QYXRoIiwiRXZlbnRFbWl0dGVyIiwiX19maWxlbmFtZSIsImltcG9ydCIsIm1ldGEiLCJ1cmwiLCJfX2Rpcm5hbWUiLCJkaXJuYW1lIiwiRGF0YWJhc2VTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJkYXRhRGlyIiwiam9pbiIsImNhY2hlIiwiTWFwIiwiaW5pdGlhbGl6ZWQiLCJzYXZlUXVldWUiLCJzYXZlVGltZW91dCIsImluaXRpYWxpemUiLCJta2RpciIsInJlY3Vyc2l2ZSIsImNvbGxlY3Rpb25zIiwiZXZlbnRzIiwicGFydGljaXBhbnRzIiwidGFsa3MiLCJzZXR0aW5ncyIsImFuYWx5dGljcyIsImNvbGxlY3Rpb24iLCJmaWxlbmFtZSIsIk9iamVjdCIsImVudHJpZXMiLCJpbml0aWFsaXplQ29sbGVjdGlvbiIsImluaXRpYWxpemVTZXR0aW5ncyIsImVtaXQiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJmaWxlUGF0aCIsImRhdGEiLCJyZWFkRmlsZSIsInNldCIsIkpTT04iLCJwYXJzZSIsImNvZGUiLCJlbXB0eURhdGEiLCJzYXZlQ29sbGVjdGlvbiIsImRlZmF1bHRTZXR0aW5ncyIsInNpdGVOYW1lIiwic2l0ZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTSVRFX1VSTCIsImFkbWluRW1haWwiLCJBRE1JTl9FTUFJTCIsImVtYWlsRW5hYmxlZCIsIkVNQUlMX0VOQUJMRUQiLCJhbmFseXRpY3NFbmFibGVkIiwicmVnaXN0cmF0aW9uU2V0dGluZ3MiLCJyZXF1aXJlQXBwcm92YWwiLCJhbGxvd1dhbGtJbiIsIm1heFBhcnRpY2lwYW50cyIsImF1dG9Db25maXJtYXRpb24iLCJ0YWxrU2V0dGluZ3MiLCJhbGxvd0xhc3RNaW51dGUiLCJtYXhEdXJhdGlvbiIsImNhdGVnb3JpZXMiLCJub3RpZmljYXRpb25TZXR0aW5ncyIsImVtYWlsT25SZWdpc3RyYXRpb24iLCJlbWFpbE9uVGFsa1N1Ym1pc3Npb24iLCJyZW1pbmRlckVtYWlscyIsInJlbWluZGVyRGF5cyIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInVwZGF0ZWRBdCIsImV4aXN0aW5nU2V0dGluZ3MiLCJnZXQiLCJsZW5ndGgiLCJ3YWl0Rm9yQ29ubmVjdGlvbiIsIlByb21pc2UiLCJyZXNvbHZlIiwib25jZSIsImZpbmRBbGwiLCJmaWx0ZXIiLCJ2YWxpZGF0ZUNvbGxlY3Rpb24iLCJrZXlzIiwiaXRlbSIsIm1hdGNoZXNGaWx0ZXIiLCJmaW5kQnlJZCIsImlkIiwiZmluZCIsImZpbmRPbmUiLCJjcmVhdGUiLCJkb2N1bWVudCIsIm5vdyIsIm5ld0RvY3VtZW50IiwiZ2VuZXJhdGVJZCIsInB1c2giLCJxdWV1ZVNhdmUiLCJ1cGRhdGUiLCJ1cGRhdGVzIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJFcnJvciIsInVwZGF0ZWREb2N1bWVudCIsImRlbGV0ZSIsImRlbGV0ZWREb2N1bWVudCIsInNwbGljZSIsImNvdW50IiwicmVzdWx0cyIsImNvdW50QnlGaWVsZCIsImZpZWxkIiwiY291bnRzIiwiZm9yRWFjaCIsInZhbHVlIiwiZ2V0U3RhdHMiLCJ0b3RhbCIsImNyZWF0ZWRUb2RheSIsImNyZWF0ZWQiLCJ0b2RheSIsInRvRGF0ZVN0cmluZyIsImNyZWF0ZWRUaGlzV2VlayIsIndlZWtBZ28iLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImxhc3RVcGRhdGVkIiwiTWF0aCIsIm1heCIsIm1hcCIsImdldEN1cnJlbnRFdmVudCIsInN0YXR1cyIsInNvcnQiLCJhIiwiYiIsImRhdGUiLCJnZXRFdmVudFBhcnRpY2lwYW50cyIsImV2ZW50SWQiLCJnZXRFdmVudFRhbGtzIiwiZ2V0RXZlbnRBbmFseXRpY3MiLCJwYXJ0aWNpcGFudENvdW50Iiwic3BlYWtlckNvdW50IiwicGFydGljaXBhdGlvblR5cGVzIiwidGFsa0NhdGVnb3JpZXMiLCJyZWdpc3RyYXRpb25UcmVuZCIsImdldFJlZ2lzdHJhdGlvblRyZW5kIiwiYXZnUmF0aW5nIiwiY2FsY3VsYXRlQXZlcmFnZVJhdGluZyIsInRyZW5kIiwicGFydGljaXBhbnQiLCJyYXRpbmdzQXJyYXkiLCJ0YWxrIiwicmF0aW5nIiwicmVkdWNlIiwic3VtIiwiZ2V0U2V0dGluZ3MiLCJ1cGRhdGVTZXR0aW5ncyIsInVwZGF0ZWRTZXR0aW5ncyIsInNlZWQiLCJzZWVkRGF0YSIsImV4cG9ydERhdGEiLCJleHBvcnRlZEF0IiwidmVyc2lvbiIsImltcG9ydERhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJldmVyeSIsImtleSIsIm9wZXJhdG9yIiwib3BlcmF0b3JWYWx1ZSIsImluY2x1ZGVzIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiY29sbGVjdGlvbnNUb1NhdmUiLCJmcm9tIiwiY2xlYXIiLCJ3cml0ZUZpbGUiLCJzdHJpbmdpZnkiLCJjbG9zZSJdLCJzb3VyY2VzIjpbImRhdGFiYXNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YWJhc2UgU2VydmljZSBmb3IgTGlnaHRuaW5nIFRhbGsgRXZlbnQgTWFuYWdlbWVudFxuICogRmlsZS1iYXNlZCBKU09OIGRhdGFiYXNlIHdpdGggaW4tbWVtb3J5IGNhY2hpbmcgZm9yIGRldmVsb3BtZW50XG4gKiBDYW4gYmUgZWFzaWx5IHJlcGxhY2VkIHdpdGggUG9zdGdyZVNRTC9Nb25nb0RCIGZvciBwcm9kdWN0aW9uXG4gKi9cblxuaW1wb3J0IGZzIGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZmlsZVVSTFRvUGF0aCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xuXG5jb25zdCBfX2ZpbGVuYW1lID0gZmlsZVVSTFRvUGF0aChpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgX19kaXJuYW1lID0gcGF0aC5kaXJuYW1lKF9fZmlsZW5hbWUpO1xuXG5leHBvcnQgY2xhc3MgRGF0YWJhc2VTZXJ2aWNlIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmRhdGFEaXIgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vZGF0YScpO1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5pbml0aWFsaXplZCA9IGZhbHNlO1xuICAgIHRoaXMuc2F2ZVF1ZXVlID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuc2F2ZVRpbWVvdXQgPSBudWxsO1xuICB9XG5cbiAgYXN5bmMgaW5pdGlhbGl6ZSgpIHtcbiAgICB0cnkge1xuICAgICAgLy8gRW5zdXJlIGRhdGEgZGlyZWN0b3J5IGV4aXN0c1xuICAgICAgYXdhaXQgZnMubWtkaXIodGhpcy5kYXRhRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBjb2xsZWN0aW9uc1xuICAgICAgdGhpcy5jb2xsZWN0aW9ucyA9IHtcbiAgICAgICAgZXZlbnRzOiAnZXZlbnRzLmpzb24nLFxuICAgICAgICBwYXJ0aWNpcGFudHM6ICdwYXJ0aWNpcGFudHMuanNvbicsXG4gICAgICAgIHRhbGtzOiAndGFsa3MuanNvbicsXG4gICAgICAgIHNldHRpbmdzOiAnc2V0dGluZ3MuanNvbicsXG4gICAgICAgIGFuYWx5dGljczogJ2FuYWx5dGljcy5qc29uJ1xuICAgICAgfTtcblxuICAgICAgLy8gTG9hZCBvciBjcmVhdGUgZWFjaCBjb2xsZWN0aW9uXG4gICAgICBmb3IgKGNvbnN0IFtjb2xsZWN0aW9uLCBmaWxlbmFtZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5jb2xsZWN0aW9ucykpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ29sbGVjdGlvbihjb2xsZWN0aW9uLCBmaWxlbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEluaXRpYWxpemUgc2V0dGluZ3NcbiAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZVNldHRpbmdzKCk7XG5cbiAgICAgIHRoaXMuaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5lbWl0KCdyZWFkeScpO1xuXG4gICAgICBjb25zb2xlLmxvZygn8J+TpiBEYXRhYmFzZSBzZXJ2aWNlIGluaXRpYWxpemVkJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemVDb2xsZWN0aW9uKGNvbGxlY3Rpb24sIGZpbGVuYW1lKSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5kYXRhRGlyLCBmaWxlbmFtZSk7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmOCcpO1xuICAgICAgdGhpcy5jYWNoZS5zZXQoY29sbGVjdGlvbiwgSlNPTi5wYXJzZShkYXRhKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnRU5PRU5UJykge1xuICAgICAgICAvLyBGaWxlIGRvZXNuJ3QgZXhpc3QsIGNyZWF0ZSBlbXB0eSBjb2xsZWN0aW9uXG4gICAgICAgIGNvbnN0IGVtcHR5RGF0YSA9IFtdO1xuICAgICAgICB0aGlzLmNhY2hlLnNldChjb2xsZWN0aW9uLCBlbXB0eURhdGEpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuICAgICAgICBjb25zb2xlLmxvZyhg8J+TnSBDcmVhdGVkIG5ldyBjb2xsZWN0aW9uOiAke2NvbGxlY3Rpb259YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplU2V0dGluZ3MoKSB7XG4gICAgY29uc3QgZGVmYXVsdFNldHRpbmdzID0ge1xuICAgICAgc2l0ZU5hbWU6ICfjgarjgpPjgafjgoLjg6njgqTjg4jjg4vjg7PjgrDjg4jjg7zjgq8nLFxuICAgICAgc2l0ZVVybDogcHJvY2Vzcy5lbnYuU0lURV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcsXG4gICAgICBhZG1pbkVtYWlsOiBwcm9jZXNzLmVudi5BRE1JTl9FTUFJTCB8fCAnYWRtaW5AZXhhbXBsZS5jb20nLFxuICAgICAgZW1haWxFbmFibGVkOiBwcm9jZXNzLmVudi5FTUFJTF9FTkFCTEVEID09PSAndHJ1ZScsXG4gICAgICBhbmFseXRpY3NFbmFibGVkOiB0cnVlLFxuICAgICAgcmVnaXN0cmF0aW9uU2V0dGluZ3M6IHtcbiAgICAgICAgcmVxdWlyZUFwcHJvdmFsOiBmYWxzZSxcbiAgICAgICAgYWxsb3dXYWxrSW46IHRydWUsXG4gICAgICAgIG1heFBhcnRpY2lwYW50czogMTAwLFxuICAgICAgICBhdXRvQ29uZmlybWF0aW9uOiB0cnVlXG4gICAgICB9LFxuICAgICAgdGFsa1NldHRpbmdzOiB7XG4gICAgICAgIHJlcXVpcmVBcHByb3ZhbDogZmFsc2UsXG4gICAgICAgIGFsbG93TGFzdE1pbnV0ZTogdHJ1ZSxcbiAgICAgICAgbWF4RHVyYXRpb246IDUsXG4gICAgICAgIGNhdGVnb3JpZXM6IFtcbiAgICAgICAgICAndGVjaCcsXG4gICAgICAgICAgJ2hvYmJ5JyxcbiAgICAgICAgICAnbGVhcm5pbmcnLFxuICAgICAgICAgICd0cmF2ZWwnLFxuICAgICAgICAgICdmb29kJyxcbiAgICAgICAgICAnZ2FtZScsXG4gICAgICAgICAgJ2xpZmVoYWNrJyxcbiAgICAgICAgICAncGV0JyxcbiAgICAgICAgICAnZ2FyZGVuJyxcbiAgICAgICAgICAnbW9uZXknLFxuICAgICAgICAgICdzcG9ydHMnLFxuICAgICAgICAgICdtdXNpYycsXG4gICAgICAgICAgJ290aGVyJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgbm90aWZpY2F0aW9uU2V0dGluZ3M6IHtcbiAgICAgICAgZW1haWxPblJlZ2lzdHJhdGlvbjogdHJ1ZSxcbiAgICAgICAgZW1haWxPblRhbGtTdWJtaXNzaW9uOiB0cnVlLFxuICAgICAgICByZW1pbmRlckVtYWlsczogdHJ1ZSxcbiAgICAgICAgcmVtaW5kZXJEYXlzOiBbNywgMV1cbiAgICAgIH0sXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIGNvbnN0IGV4aXN0aW5nU2V0dGluZ3MgPSB0aGlzLmNhY2hlLmdldCgnc2V0dGluZ3MnKTtcbiAgICBpZiAoIWV4aXN0aW5nU2V0dGluZ3MgfHwgZXhpc3RpbmdTZXR0aW5ncy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY2FjaGUuc2V0KCdzZXR0aW5ncycsIFtkZWZhdWx0U2V0dGluZ3NdKTtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbGxlY3Rpb24oJ3NldHRpbmdzJyk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgd2FpdEZvckNvbm5lY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICB0aGlzLm9uY2UoJ3JlYWR5JywgcmVzb2x2ZSk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBDUlVEIE9wZXJhdGlvbnNcbiAgYXN5bmMgZmluZEFsbChjb2xsZWN0aW9uLCBmaWx0ZXIgPSB7fSkge1xuICAgIHRoaXMudmFsaWRhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNhY2hlLmdldChjb2xsZWN0aW9uKSB8fCBbXTtcblxuICAgIGlmIChPYmplY3Qua2V5cyhmaWx0ZXIpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGEuZmlsdGVyKGl0ZW0gPT4gdGhpcy5tYXRjaGVzRmlsdGVyKGl0ZW0sIGZpbHRlcikpO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5SWQoY29sbGVjdGlvbiwgaWQpIHtcbiAgICB0aGlzLnZhbGlkYXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5jYWNoZS5nZXQoY29sbGVjdGlvbikgfHwgW107XG4gICAgcmV0dXJuIGRhdGEuZmluZChpdGVtID0+IGl0ZW0uaWQgPT09IGlkKTtcbiAgfVxuXG4gIGFzeW5jIGZpbmRPbmUoY29sbGVjdGlvbiwgZmlsdGVyKSB7XG4gICAgdGhpcy52YWxpZGF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuY2FjaGUuZ2V0KGNvbGxlY3Rpb24pIHx8IFtdO1xuICAgIHJldHVybiBkYXRhLmZpbmQoaXRlbSA9PiB0aGlzLm1hdGNoZXNGaWx0ZXIoaXRlbSwgZmlsdGVyKSk7XG4gIH1cblxuICBhc3luYyBjcmVhdGUoY29sbGVjdGlvbiwgZG9jdW1lbnQpIHtcbiAgICB0aGlzLnZhbGlkYXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uKTtcblxuICAgIC8vIEFkZCBtZXRhZGF0YVxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICBjb25zdCBuZXdEb2N1bWVudCA9IHtcbiAgICAgIGlkOiB0aGlzLmdlbmVyYXRlSWQoKSxcbiAgICAgIC4uLmRvY3VtZW50LFxuICAgICAgY3JlYXRlZEF0OiBub3csXG4gICAgICB1cGRhdGVkQXQ6IG5vd1xuICAgIH07XG5cbiAgICAvLyBBZGQgdG8gY2FjaGVcbiAgICBjb25zdCBkYXRhID0gdGhpcy5jYWNoZS5nZXQoY29sbGVjdGlvbikgfHwgW107XG4gICAgZGF0YS5wdXNoKG5ld0RvY3VtZW50KTtcbiAgICB0aGlzLmNhY2hlLnNldChjb2xsZWN0aW9uLCBkYXRhKTtcblxuICAgIC8vIFF1ZXVlIHNhdmVcbiAgICB0aGlzLnF1ZXVlU2F2ZShjb2xsZWN0aW9uKTtcblxuICAgIC8vIEVtaXQgZXZlbnRcbiAgICB0aGlzLmVtaXQoJ2NyZWF0ZWQnLCB7IGNvbGxlY3Rpb24sIGRvY3VtZW50OiBuZXdEb2N1bWVudCB9KTtcblxuICAgIHJldHVybiBuZXdEb2N1bWVudDtcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZShjb2xsZWN0aW9uLCBpZCwgdXBkYXRlcykge1xuICAgIHRoaXMudmFsaWRhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuY2FjaGUuZ2V0KGNvbGxlY3Rpb24pIHx8IFtdO1xuICAgIGNvbnN0IGluZGV4ID0gZGF0YS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpZCk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERvY3VtZW50IHdpdGggaWQgJHtpZH0gbm90IGZvdW5kIGluICR7Y29sbGVjdGlvbn1gKTtcbiAgICB9XG5cbiAgICAvLyBBcHBseSB1cGRhdGVzXG4gICAgY29uc3QgdXBkYXRlZERvY3VtZW50ID0ge1xuICAgICAgLi4uZGF0YVtpbmRleF0sXG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgZGF0YVtpbmRleF0gPSB1cGRhdGVkRG9jdW1lbnQ7XG4gICAgdGhpcy5jYWNoZS5zZXQoY29sbGVjdGlvbiwgZGF0YSk7XG5cbiAgICAvLyBRdWV1ZSBzYXZlXG4gICAgdGhpcy5xdWV1ZVNhdmUoY29sbGVjdGlvbik7XG5cbiAgICAvLyBFbWl0IGV2ZW50XG4gICAgdGhpcy5lbWl0KCd1cGRhdGVkJywgeyBjb2xsZWN0aW9uLCBkb2N1bWVudDogdXBkYXRlZERvY3VtZW50IH0pO1xuXG4gICAgcmV0dXJuIHVwZGF0ZWREb2N1bWVudDtcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZShjb2xsZWN0aW9uLCBpZCkge1xuICAgIHRoaXMudmFsaWRhdGVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pO1xuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuY2FjaGUuZ2V0KGNvbGxlY3Rpb24pIHx8IFtdO1xuICAgIGNvbnN0IGluZGV4ID0gZGF0YS5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLmlkID09PSBpZCk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYERvY3VtZW50IHdpdGggaWQgJHtpZH0gbm90IGZvdW5kIGluICR7Y29sbGVjdGlvbn1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWxldGVkRG9jdW1lbnQgPSBkYXRhW2luZGV4XTtcbiAgICBkYXRhLnNwbGljZShpbmRleCwgMSk7XG4gICAgdGhpcy5jYWNoZS5zZXQoY29sbGVjdGlvbiwgZGF0YSk7XG5cbiAgICAvLyBRdWV1ZSBzYXZlXG4gICAgdGhpcy5xdWV1ZVNhdmUoY29sbGVjdGlvbik7XG5cbiAgICAvLyBFbWl0IGV2ZW50XG4gICAgdGhpcy5lbWl0KCdkZWxldGVkJywgeyBjb2xsZWN0aW9uLCBkb2N1bWVudDogZGVsZXRlZERvY3VtZW50IH0pO1xuXG4gICAgcmV0dXJuIGRlbGV0ZWREb2N1bWVudDtcbiAgfVxuXG4gIC8vIEFnZ3JlZ2F0aW9uIG1ldGhvZHNcbiAgYXN5bmMgY291bnQoY29sbGVjdGlvbiwgZmlsdGVyID0ge30pIHtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5maW5kQWxsKGNvbGxlY3Rpb24sIGZpbHRlcik7XG4gICAgcmV0dXJuIHJlc3VsdHMubGVuZ3RoO1xuICB9XG5cbiAgYXN5bmMgY291bnRCeUZpZWxkKGNvbGxlY3Rpb24sIGZpZWxkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZmluZEFsbChjb2xsZWN0aW9uKTtcbiAgICBjb25zdCBjb3VudHMgPSB7fTtcblxuICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gaXRlbVtmaWVsZF0gfHwgJ3Vua25vd24nO1xuICAgICAgY291bnRzW3ZhbHVlXSA9IChjb3VudHNbdmFsdWVdIHx8IDApICsgMTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb3VudHM7XG4gIH1cblxuICBhc3luYyBnZXRTdGF0cyhjb2xsZWN0aW9uKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZmluZEFsbChjb2xsZWN0aW9uKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0b3RhbDogZGF0YS5sZW5ndGgsXG4gICAgICBjcmVhdGVkVG9kYXk6IGRhdGEuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBjb25zdCBjcmVhdGVkID0gbmV3IERhdGUoaXRlbS5jcmVhdGVkQXQpO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkLnRvRGF0ZVN0cmluZygpID09PSB0b2RheS50b0RhdGVTdHJpbmcoKTtcbiAgICAgIH0pLmxlbmd0aCxcbiAgICAgIGNyZWF0ZWRUaGlzV2VlazogZGF0YS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWQgPSBuZXcgRGF0ZShpdGVtLmNyZWF0ZWRBdCk7XG4gICAgICAgIGNvbnN0IHdlZWtBZ28gPSBuZXcgRGF0ZSgpO1xuICAgICAgICB3ZWVrQWdvLnNldERhdGUod2Vla0Fnby5nZXREYXRlKCkgLSA3KTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWQgPj0gd2Vla0FnbztcbiAgICAgIH0pLmxlbmd0aCxcbiAgICAgIGxhc3RVcGRhdGVkOiBkYXRhLmxlbmd0aCA+IDAgPyBNYXRoLm1heCguLi5kYXRhLm1hcChpdGVtID0+IG5ldyBEYXRlKGl0ZW0udXBkYXRlZEF0KSkpIDogbnVsbFxuICAgIH07XG4gIH1cblxuICAvLyBFdmVudC1zcGVjaWZpYyBtZXRob2RzXG4gIGFzeW5jIGdldEN1cnJlbnRFdmVudCgpIHtcbiAgICBjb25zdCBldmVudHMgPSBhd2FpdCB0aGlzLmZpbmRBbGwoJ2V2ZW50cycsIHsgc3RhdHVzOiAndXBjb21pbmcnIH0pO1xuICAgIHJldHVybiBldmVudHMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYS5kYXRlKSAtIG5ldyBEYXRlKGIuZGF0ZSkpWzBdO1xuICB9XG5cbiAgYXN5bmMgZ2V0RXZlbnRQYXJ0aWNpcGFudHMoZXZlbnRJZCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoJ3BhcnRpY2lwYW50cycsIHsgZXZlbnRJZCB9KTtcbiAgfVxuXG4gIGFzeW5jIGdldEV2ZW50VGFsa3MoZXZlbnRJZCkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRBbGwoJ3RhbGtzJywgeyBldmVudElkIH0pO1xuICB9XG5cbiAgYXN5bmMgZ2V0RXZlbnRBbmFseXRpY3MoZXZlbnRJZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IHRoaXMuZ2V0RXZlbnRQYXJ0aWNpcGFudHMoZXZlbnRJZCk7XG4gICAgY29uc3QgdGFsa3MgPSBhd2FpdCB0aGlzLmdldEV2ZW50VGFsa3MoZXZlbnRJZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFydGljaXBhbnRDb3VudDogcGFydGljaXBhbnRzLmxlbmd0aCxcbiAgICAgIHNwZWFrZXJDb3VudDogdGFsa3MubGVuZ3RoLFxuICAgICAgcGFydGljaXBhdGlvblR5cGVzOiBhd2FpdCB0aGlzLmNvdW50QnlGaWVsZCgncGFydGljaXBhbnRzJywgJ3BhcnRpY2lwYXRpb25UeXBlJyksXG4gICAgICB0YWxrQ2F0ZWdvcmllczogYXdhaXQgdGhpcy5jb3VudEJ5RmllbGQoJ3RhbGtzJywgJ2NhdGVnb3J5JyksXG4gICAgICByZWdpc3RyYXRpb25UcmVuZDogdGhpcy5nZXRSZWdpc3RyYXRpb25UcmVuZChwYXJ0aWNpcGFudHMpLFxuICAgICAgYXZnUmF0aW5nOiB0aGlzLmNhbGN1bGF0ZUF2ZXJhZ2VSYXRpbmcodGFsa3MpXG4gICAgfTtcbiAgfVxuXG4gIGdldFJlZ2lzdHJhdGlvblRyZW5kKHBhcnRpY2lwYW50cykge1xuICAgIGNvbnN0IHRyZW5kID0ge307XG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocGFydGljaXBhbnQgPT4ge1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHBhcnRpY2lwYW50LmNyZWF0ZWRBdCkudG9EYXRlU3RyaW5nKCk7XG4gICAgICB0cmVuZFtkYXRlXSA9ICh0cmVuZFtkYXRlXSB8fCAwKSArIDE7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRyZW5kO1xuICB9XG5cbiAgY2FsY3VsYXRlQXZlcmFnZVJhdGluZyh0YWxrcykge1xuICAgIGNvbnN0IHJhdGluZ3NBcnJheSA9IHRhbGtzLmZpbHRlcih0YWxrID0+IHRhbGsucmF0aW5nKS5tYXAodGFsayA9PiB0YWxrLnJhdGluZyk7XG5cbiAgICBpZiAocmF0aW5nc0FycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJhdGluZ3NBcnJheS5yZWR1Y2UoKHN1bSwgcmF0aW5nKSA9PiBzdW0gKyByYXRpbmcsIDApIC8gcmF0aW5nc0FycmF5Lmxlbmd0aDtcbiAgfVxuXG4gIC8vIFNldHRpbmdzIG1hbmFnZW1lbnRcbiAgYXN5bmMgZ2V0U2V0dGluZ3MoKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLmNhY2hlLmdldCgnc2V0dGluZ3MnKSB8fCBbXTtcbiAgICByZXR1cm4gc2V0dGluZ3NbMF0gfHwge307XG4gIH1cblxuICBhc3luYyB1cGRhdGVTZXR0aW5ncyh1cGRhdGVzKSB7XG4gICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCB0aGlzLmdldFNldHRpbmdzKCk7XG4gICAgY29uc3QgdXBkYXRlZFNldHRpbmdzID0ge1xuICAgICAgLi4uc2V0dGluZ3MsXG4gICAgICAuLi51cGRhdGVzLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuXG4gICAgdGhpcy5jYWNoZS5zZXQoJ3NldHRpbmdzJywgW3VwZGF0ZWRTZXR0aW5nc10pO1xuICAgIGF3YWl0IHRoaXMucXVldWVTYXZlKCdzZXR0aW5ncycpO1xuXG4gICAgcmV0dXJuIHVwZGF0ZWRTZXR0aW5ncztcbiAgfVxuXG4gIC8vIERhdGEgc2VlZGluZyBmb3IgZGV2ZWxvcG1lbnRcbiAgYXN5bmMgc2VlZChzZWVkRGF0YSkge1xuICAgIGZvciAoY29uc3QgW2NvbGxlY3Rpb24sIGRhdGFdIG9mIE9iamVjdC5lbnRyaWVzKHNlZWREYXRhKSkge1xuICAgICAgaWYgKHRoaXMuY29sbGVjdGlvbnNbY29sbGVjdGlvbl0pIHtcbiAgICAgICAgdGhpcy5jYWNoZS5zZXQoY29sbGVjdGlvbiwgZGF0YSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn4yxIFNlZWRlZCAke2NvbGxlY3Rpb259IHdpdGggJHtkYXRhLmxlbmd0aH0gaXRlbXNgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBEYXRhIGV4cG9ydC9iYWNrdXBcbiAgYXN5bmMgZXhwb3J0RGF0YSgpIHtcbiAgICBjb25zdCBleHBvcnREYXRhID0ge307XG5cbiAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgT2JqZWN0LmtleXModGhpcy5jb2xsZWN0aW9ucykpIHtcbiAgICAgIGV4cG9ydERhdGFbY29sbGVjdGlvbl0gPSB0aGlzLmNhY2hlLmdldChjb2xsZWN0aW9uKSB8fCBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uZXhwb3J0RGF0YSxcbiAgICAgIGV4cG9ydGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgaW1wb3J0RGF0YShpbXBvcnREYXRhKSB7XG4gICAgZm9yIChjb25zdCBbY29sbGVjdGlvbiwgZGF0YV0gb2YgT2JqZWN0LmVudHJpZXMoaW1wb3J0RGF0YSkpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dICYmIEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgdGhpcy5jYWNoZS5zZXQoY29sbGVjdGlvbiwgZGF0YSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5OlIEltcG9ydGVkICR7Y29sbGVjdGlvbn0gd2l0aCAke2RhdGEubGVuZ3RofSBpdGVtc2ApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhlbHBlciBtZXRob2RzXG4gIHZhbGlkYXRlQ29sbGVjdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgaWYgKCF0aGlzLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbjogJHtjb2xsZWN0aW9ufWApO1xuICAgIH1cbiAgfVxuXG4gIG1hdGNoZXNGaWx0ZXIoaXRlbSwgZmlsdGVyKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGZpbHRlcikuZXZlcnkoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgLy8gSGFuZGxlIG9wZXJhdG9ycyBsaWtlIHsgJGd0ZTogdmFsdWUgfVxuICAgICAgICByZXR1cm4gT2JqZWN0LmVudHJpZXModmFsdWUpLmV2ZXJ5KChbb3BlcmF0b3IsIG9wZXJhdG9yVmFsdWVdKSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgICAgICAgICAgY2FzZSAnJGd0ZSc6XG4gICAgICAgICAgICAgIHJldHVybiBpdGVtW2tleV0gPj0gb3BlcmF0b3JWYWx1ZTtcbiAgICAgICAgICAgIGNhc2UgJyRsdGUnOlxuICAgICAgICAgICAgICByZXR1cm4gaXRlbVtrZXldIDw9IG9wZXJhdG9yVmFsdWU7XG4gICAgICAgICAgICBjYXNlICckZ3QnOlxuICAgICAgICAgICAgICByZXR1cm4gaXRlbVtrZXldID4gb3BlcmF0b3JWYWx1ZTtcbiAgICAgICAgICAgIGNhc2UgJyRsdCc6XG4gICAgICAgICAgICAgIHJldHVybiBpdGVtW2tleV0gPCBvcGVyYXRvclZhbHVlO1xuICAgICAgICAgICAgY2FzZSAnJG5lJzpcbiAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1ba2V5XSAhPT0gb3BlcmF0b3JWYWx1ZTtcbiAgICAgICAgICAgIGNhc2UgJyRpbic6XG4gICAgICAgICAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9wZXJhdG9yVmFsdWUpICYmIG9wZXJhdG9yVmFsdWUuaW5jbHVkZXMoaXRlbVtrZXldKTtcbiAgICAgICAgICAgIGNhc2UgJyRuaW4nOlxuICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvcGVyYXRvclZhbHVlKSAmJiAhb3BlcmF0b3JWYWx1ZS5pbmNsdWRlcyhpdGVtW2tleV0pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXRlbVtrZXldID09PSB2YWx1ZTtcbiAgICB9KTtcbiAgfVxuXG4gIGdlbmVyYXRlSWQoKSB7XG4gICAgcmV0dXJuIGAke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gIH1cblxuICBxdWV1ZVNhdmUoY29sbGVjdGlvbikge1xuICAgIHRoaXMuc2F2ZVF1ZXVlLnNldChjb2xsZWN0aW9uLCB0cnVlKTtcblxuICAgIGlmICh0aGlzLnNhdmVUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zYXZlVGltZW91dCk7XG4gICAgfVxuXG4gICAgdGhpcy5zYXZlVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29sbGVjdGlvbnNUb1NhdmUgPSBBcnJheS5mcm9tKHRoaXMuc2F2ZVF1ZXVlLmtleXMoKSk7XG4gICAgICB0aGlzLnNhdmVRdWV1ZS5jbGVhcigpO1xuXG4gICAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNUb1NhdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29sbGVjdGlvbihjb2xsZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9LCAxMDAwKTsgLy8gQmF0Y2ggc2F2ZXMgZXZlcnkgMSBzZWNvbmRcbiAgfVxuXG4gIGFzeW5jIHNhdmVDb2xsZWN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSB0aGlzLmNvbGxlY3Rpb25zW2NvbGxlY3Rpb25dO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5kYXRhRGlyLCBmaWxlbmFtZSk7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5jYWNoZS5nZXQoY29sbGVjdGlvbikgfHwgW107XG5cbiAgICAgIGF3YWl0IGZzLndyaXRlRmlsZShmaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gc2F2ZSBjb2xsZWN0aW9uICR7Y29sbGVjdGlvbn06YCwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2xvc2UoKSB7XG4gICAgLy8gU2F2ZSBhbGwgcGVuZGluZyBjaGFuZ2VzXG4gICAgaWYgKHRoaXMuc2F2ZVRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnNhdmVUaW1lb3V0KTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xsZWN0aW9uc1RvU2F2ZSA9IEFycmF5LmZyb20odGhpcy5zYXZlUXVldWUua2V5cygpKTtcbiAgICBmb3IgKGNvbnN0IGNvbGxlY3Rpb24gb2YgY29sbGVjdGlvbnNUb1NhdmUpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ/Cfk6YgRGF0YWJhc2Ugc2VydmljZSBjbG9zZWQnKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEVBQUUsTUFBTSxhQUFhO0FBQzVCLE9BQU9DLElBQUksTUFBTSxNQUFNO0FBQ3ZCLFNBQVNDLGFBQWEsUUFBUSxLQUFLO0FBQ25DLFNBQVNDLFlBQVksUUFBUSxRQUFRO0FBRXJDLE1BQU1DLFVBQVUsR0FBR0YsYUFBYSxDQUFDRyxNQUFNLENBQUNDLElBQUksQ0FBQ0MsR0FBRyxDQUFDO0FBQ2pELE1BQU1DLFNBQVMsR0FBR1AsSUFBSSxDQUFDUSxPQUFPLENBQUNMLFVBQVUsQ0FBQztBQUUxQyxPQUFPLE1BQU1NLGVBQWUsU0FBU1AsWUFBWSxDQUFDO0VBQ2hEUSxXQUFXQSxDQUFBLEVBQUc7SUFDWixLQUFLLENBQUMsQ0FBQztJQUNQLElBQUksQ0FBQ0MsT0FBTyxHQUFHWCxJQUFJLENBQUNZLElBQUksQ0FBQ0wsU0FBUyxFQUFFLFNBQVMsQ0FBQztJQUM5QyxJQUFJLENBQUNNLEtBQUssR0FBRyxJQUFJQyxHQUFHLENBQUMsQ0FBQztJQUN0QixJQUFJLENBQUNDLFdBQVcsR0FBRyxLQUFLO0lBQ3hCLElBQUksQ0FBQ0MsU0FBUyxHQUFHLElBQUlGLEdBQUcsQ0FBQyxDQUFDO0lBQzFCLElBQUksQ0FBQ0csV0FBVyxHQUFHLElBQUk7RUFDekI7RUFFQSxNQUFNQyxVQUFVQSxDQUFBLEVBQUc7SUFDakIsSUFBSTtNQUNGO01BQ0EsTUFBTW5CLEVBQUUsQ0FBQ29CLEtBQUssQ0FBQyxJQUFJLENBQUNSLE9BQU8sRUFBRTtRQUFFUyxTQUFTLEVBQUU7TUFBSyxDQUFDLENBQUM7O01BRWpEO01BQ0EsSUFBSSxDQUFDQyxXQUFXLEdBQUc7UUFDakJDLE1BQU0sRUFBRSxhQUFhO1FBQ3JCQyxZQUFZLEVBQUUsbUJBQW1CO1FB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