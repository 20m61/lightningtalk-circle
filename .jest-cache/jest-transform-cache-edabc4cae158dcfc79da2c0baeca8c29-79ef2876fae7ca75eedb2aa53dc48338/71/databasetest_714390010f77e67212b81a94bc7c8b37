34e1b27142cec2ef0d2deed88d595e09
/**
 * Database Service Unit Tests
 * データベースサービスの単体テスト
 */

const {
  DatabaseService
} = require('../../../server/services/database');
describe('DatabaseService', () => {
  let database;
  beforeEach(() => {
    database = new DatabaseService();
  });
  afterEach(async () => {
    if (database && database.close) {
      await database.close();
    }
  });
  describe('getInstance', () => {
    it('should return singleton instance', () => {
      const instance1 = DatabaseService.getInstance();
      const instance2 = DatabaseService.getInstance();
      expect(instance1).toBe(instance2);
      expect(instance1).toBeInstanceOf(DatabaseService);
    });
  });
  describe('initialization', () => {
    it('should initialize with default configuration', () => {
      expect(database).toBeInstanceOf(DatabaseService);
      expect(database.connectionString).toBeDefined();
    });
    it('should handle custom configuration', () => {
      const customConfig = {
        host: 'localhost',
        port: 5432,
        database: 'test_db',
        user: 'test_user',
        password: 'test_pass'
      };
      const customDatabase = new DatabaseService(customConfig);
      expect(customDatabase.config).toEqual(expect.objectContaining(customConfig));
    });
  });
  describe('query method', () => {
    it('should handle simple queries', async () => {
      // モックデータベースクエリ
      database.query = jest.fn().mockResolvedValue([{
        id: 1,
        name: 'Test Event',
        status: 'upcoming'
      }, {
        id: 2,
        name: 'Another Event',
        status: 'completed'
      }]);
      const result = await database.query('SELECT * FROM events');
      expect(result).toHaveLength(2);
      expect(result[0]).toEqual(expect.objectContaining({
        id: 1,
        name: 'Test Event',
        status: 'upcoming'
      }));
      expect(database.query).toHaveBeenCalledWith('SELECT * FROM events');
    });
    it('should handle parameterized queries', async () => {
      database.query = jest.fn().mockResolvedValue([{
        id: 1,
        name: 'Test Event',
        status: 'upcoming'
      }]);
      const result = await database.query('SELECT * FROM events WHERE id = ?', [1]);
      expect(result).toHaveLength(1);
      expect(database.query).toHaveBeenCalledWith('SELECT * FROM events WHERE id = ?', [1]);
    });
    it('should handle query errors', async () => {
      database.query = jest.fn().mockRejectedValue(new Error('Database connection failed'));
      await expect(database.query('SELECT * FROM events')).rejects.toThrow('Database connection failed');
    });
  });
  describe('transaction support', () => {
    it('should support transactions', async () => {
      const mockTransaction = {
        query: jest.fn().mockResolvedValue([{
          id: 1
        }]),
        commit: jest.fn().mockResolvedValue(true),
        rollback: jest.fn().mockResolvedValue(true)
      };
      database.beginTransaction = jest.fn().mockResolvedValue(mockTransaction);
      const transaction = await database.beginTransaction();
      expect(transaction).toEqual(mockTransaction);
      expect(database.beginTransaction).toHaveBeenCalled();
    });
  });
  describe('connection management', () => {
    it('should initialize connection', async () => {
      database.initialize = jest.fn().mockResolvedValue(true);
      const result = await database.initialize();
      expect(result).toBe(true);
      expect(database.initialize).toHaveBeenCalled();
    });
    it('should wait for connection', async () => {
      database.waitForConnection = jest.fn().mockResolvedValue(true);
      const result = await database.waitForConnection();
      expect(result).toBe(true);
      expect(database.waitForConnection).toHaveBeenCalled();
    });
    it('should close connection gracefully', async () => {
      database.close = jest.fn().mockResolvedValue(true);
      const result = await database.close();
      expect(result).toBe(true);
      expect(database.close).toHaveBeenCalled();
    });
  });
  describe('data operations', () => {
    beforeEach(() => {
      // 共通のモックメソッドを設定
      database.query = jest.fn();
    });
    it('should insert data', async () => {
      database.query.mockResolvedValue([{
        insertId: 1
      }]);
      const result = await database.query('INSERT INTO events (title, description) VALUES (?, ?)', ['Test Event', 'Test Description']);
      expect(result[0].insertId).toBe(1);
    });
    it('should update data', async () => {
      database.query.mockResolvedValue([{
        affectedRows: 1
      }]);
      const result = await database.query('UPDATE events SET title = ? WHERE id = ?', ['Updated Title', 1]);
      expect(result[0].affectedRows).toBe(1);
    });
    it('should delete data', async () => {
      database.query.mockResolvedValue([{
        affectedRows: 1
      }]);
      const result = await database.query('DELETE FROM events WHERE id = ?', [1]);
      expect(result[0].affectedRows).toBe(1);
    });
  });
  describe('error handling', () => {
    it('should handle connection errors', async () => {
      database.initialize = jest.fn().mockRejectedValue(new Error('Connection refused'));
      await expect(database.initialize()).rejects.toThrow('Connection refused');
    });
    it('should handle query timeout', async () => {
      database.query = jest.fn().mockRejectedValue(new Error('Query timeout'));
      await expect(database.query('SELECT * FROM events')).rejects.toThrow('Query timeout');
    });
    it('should handle invalid SQL', async () => {
      database.query = jest.fn().mockRejectedValue(new Error('Syntax error in SQL statement'));
      await expect(database.query('INVALID SQL')).rejects.toThrow('Syntax error in SQL statement');
    });
  });
  describe('data seeding', () => {
    it('should seed database with test data', async () => {
      const seedData = {
        events: [{
          title: 'Test Event',
          description: 'Test Description',
          date: '2025-06-25T19:00:00Z'
        }]
      };
      database.seed = jest.fn().mockResolvedValue(true);
      const result = await database.seed(seedData);
      expect(result).toBe(true);
      expect(database.seed).toHaveBeenCalledWith(seedData);
    });
  });
  describe('performance', () => {
    it('should handle multiple concurrent queries', async () => {
      database.query = jest.fn().mockResolvedValueOnce([{
        id: 1
      }]).mockResolvedValueOnce([{
        id: 2
      }]).mockResolvedValueOnce([{
        id: 3
      }]);
      const promises = [database.query('SELECT * FROM events WHERE id = 1'), database.query('SELECT * FROM events WHERE id = 2'), database.query('SELECT * FROM events WHERE id = 3')];
      const results = await Promise.all(promises);
      expect(results).toHaveLength(3);
      expect(database.query).toHaveBeenCalledTimes(3);
    });
    it('should handle large result sets efficiently', async () => {
      const largeDataset = Array.from({
        length: 1000
      }, (_, i) => ({
        id: i + 1,
        name: `Event ${i + 1}`,
        status: 'upcoming'
      }));
      database.query = jest.fn().mockResolvedValue(largeDataset);
      const startTime = Date.now();
      const result = await database.query('SELECT * FROM events');
      const endTime = Date.now();
      expect(result).toHaveLength(1000);
      expect(endTime - startTime).toBeLessThan(1000); // 1秒以内
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhYmFzZVNlcnZpY2UiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJkYXRhYmFzZSIsImJlZm9yZUVhY2giLCJhZnRlckVhY2giLCJjbG9zZSIsIml0IiwiaW5zdGFuY2UxIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZTIiLCJleHBlY3QiLCJ0b0JlIiwidG9CZUluc3RhbmNlT2YiLCJjb25uZWN0aW9uU3RyaW5nIiwidG9CZURlZmluZWQiLCJjdXN0b21Db25maWciLCJob3N0IiwicG9ydCIsInVzZXIiLCJwYXNzd29yZCIsImN1c3RvbURhdGFiYXNlIiwiY29uZmlnIiwidG9FcXVhbCIsIm9iamVjdENvbnRhaW5pbmciLCJxdWVyeSIsImplc3QiLCJmbiIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiaWQiLCJuYW1lIiwic3RhdHVzIiwicmVzdWx0IiwidG9IYXZlTGVuZ3RoIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwicmVqZWN0cyIsInRvVGhyb3ciLCJtb2NrVHJhbnNhY3Rpb24iLCJjb21taXQiLCJyb2xsYmFjayIsImJlZ2luVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbiIsInRvSGF2ZUJlZW5DYWxsZWQiLCJpbml0aWFsaXplIiwid2FpdEZvckNvbm5lY3Rpb24iLCJpbnNlcnRJZCIsImFmZmVjdGVkUm93cyIsInNlZWREYXRhIiwiZXZlbnRzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImRhdGUiLCJzZWVkIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwicHJvbWlzZXMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImxhcmdlRGF0YXNldCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImVuZFRpbWUiLCJ0b0JlTGVzc1RoYW4iXSwic291cmNlcyI6WyJkYXRhYmFzZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YWJhc2UgU2VydmljZSBVbml0IFRlc3RzXG4gKiDjg4fjg7zjgr/jg5njg7zjgrnjgrXjg7zjg5Pjgrnjga7ljZjkvZPjg4bjgrnjg4hcbiAqL1xuXG5jb25zdCB7IERhdGFiYXNlU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc2VydmVyL3NlcnZpY2VzL2RhdGFiYXNlJyk7XG5cbmRlc2NyaWJlKCdEYXRhYmFzZVNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBkYXRhYmFzZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBkYXRhYmFzZSA9IG5ldyBEYXRhYmFzZVNlcnZpY2UoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBpZiAoZGF0YWJhc2UgJiYgZGF0YWJhc2UuY2xvc2UpIHtcbiAgICAgIGF3YWl0IGRhdGFiYXNlLmNsb3NlKCk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0SW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2luZ2xldG9uIGluc3RhbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UxID0gRGF0YWJhc2VTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgICBjb25zdCBpbnN0YW5jZTIgPSBEYXRhYmFzZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZShpbnN0YW5jZTIpO1xuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZUluc3RhbmNlT2YoRGF0YWJhc2VTZXJ2aWNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2luaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdChkYXRhYmFzZSkudG9CZUluc3RhbmNlT2YoRGF0YWJhc2VTZXJ2aWNlKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5jb25uZWN0aW9uU3RyaW5nKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Db25maWcgPSB7XG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgICBwb3J0OiA1NDMyLFxuICAgICAgICBkYXRhYmFzZTogJ3Rlc3RfZGInLFxuICAgICAgICB1c2VyOiAndGVzdF91c2VyJyxcbiAgICAgICAgcGFzc3dvcmQ6ICd0ZXN0X3Bhc3MnXG4gICAgICB9O1xuICAgICAgXG4gICAgICBjb25zdCBjdXN0b21EYXRhYmFzZSA9IG5ldyBEYXRhYmFzZVNlcnZpY2UoY3VzdG9tQ29uZmlnKTtcbiAgICAgIGV4cGVjdChjdXN0b21EYXRhYmFzZS5jb25maWcpLnRvRXF1YWwoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoY3VzdG9tQ29uZmlnKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdxdWVyeSBtZXRob2QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2ltcGxlIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDjg6Ljg4Pjgq/jg4fjg7zjgr/jg5njg7zjgrnjgq/jgqjjg6pcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgeyBpZDogMSwgbmFtZTogJ1Rlc3QgRXZlbnQnLCBzdGF0dXM6ICd1cGNvbWluZycgfSxcbiAgICAgICAgeyBpZDogMiwgbmFtZTogJ0Fub3RoZXIgRXZlbnQnLCBzdGF0dXM6ICdjb21wbGV0ZWQnIH1cbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBldmVudHMnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9FcXVhbChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIGlkOiAxLFxuICAgICAgICBuYW1lOiAnVGVzdCBFdmVudCcsXG4gICAgICAgIHN0YXR1czogJ3VwY29taW5nJ1xuICAgICAgfSkpO1xuICAgICAgZXhwZWN0KGRhdGFiYXNlLnF1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnU0VMRUNUICogRlJPTSBldmVudHMnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcmFtZXRlcml6ZWQgcXVlcmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgeyBpZDogMSwgbmFtZTogJ1Rlc3QgRXZlbnQnLCBzdGF0dXM6ICd1cGNvbWluZycgfVxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLnF1ZXJ5KFxuICAgICAgICAnU0VMRUNUICogRlJPTSBldmVudHMgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgWzFdXG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoZGF0YWJhc2UucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnU0VMRUNUICogRlJPTSBldmVudHMgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgWzFdXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UucXVlcnkgPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFiYXNlLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGV2ZW50cycpKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdygnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3RyYW5zYWN0aW9uIHN1cHBvcnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHRyYW5zYWN0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tUcmFuc2FjdGlvbiA9IHtcbiAgICAgICAgcXVlcnk6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyBpZDogMSB9XSksXG4gICAgICAgIGNvbW1pdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICAgICAgICByb2xsYmFjazogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpXG4gICAgICB9O1xuICAgICAgXG4gICAgICBkYXRhYmFzZS5iZWdpblRyYW5zYWN0aW9uID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUcmFuc2FjdGlvbik7XG4gICAgICBcbiAgICAgIGNvbnN0IHRyYW5zYWN0aW9uID0gYXdhaXQgZGF0YWJhc2UuYmVnaW5UcmFuc2FjdGlvbigpO1xuICAgICAgXG4gICAgICBleHBlY3QodHJhbnNhY3Rpb24pLnRvRXF1YWwobW9ja1RyYW5zYWN0aW9uKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5iZWdpblRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjb25uZWN0aW9uIG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIGNvbm5lY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5pbml0aWFsaXplID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5pbml0aWFsaXplKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YWJhc2UuaW5pdGlhbGl6ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB3YWl0IGZvciBjb25uZWN0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2Uud2FpdEZvckNvbm5lY3Rpb24gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLndhaXRGb3JDb25uZWN0aW9uKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YWJhc2Uud2FpdEZvckNvbm5lY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY2xvc2UgY29ubmVjdGlvbiBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UuY2xvc2UgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLmNsb3NlKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YWJhc2UuY2xvc2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RhdGEgb3BlcmF0aW9ucycsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIC8vIOWFsemAmuOBruODouODg+OCr+ODoeOCveODg+ODieOCkuioreWumlxuICAgICAgZGF0YWJhc2UucXVlcnkgPSBqZXN0LmZuKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluc2VydCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoW3sgaW5zZXJ0SWQ6IDEgfV0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5xdWVyeShcbiAgICAgICAgJ0lOU0VSVCBJTlRPIGV2ZW50cyAodGl0bGUsIGRlc2NyaXB0aW9uKSBWQUxVRVMgKD8sID8pJyxcbiAgICAgICAgWydUZXN0IEV2ZW50JywgJ1Rlc3QgRGVzY3JpcHRpb24nXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5pbnNlcnRJZCkudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyBhZmZlY3RlZFJvd3M6IDEgfV0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5xdWVyeShcbiAgICAgICAgJ1VQREFURSBldmVudHMgU0VUIHRpdGxlID0gPyBXSEVSRSBpZCA9ID8nLFxuICAgICAgICBbJ1VwZGF0ZWQgVGl0bGUnLCAxXVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdFswXS5hZmZlY3RlZFJvd3MpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoW3sgYWZmZWN0ZWRSb3dzOiAxIH1dKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2UucXVlcnkoXG4gICAgICAgICdERUxFVEUgRlJPTSBldmVudHMgV0hFUkUgaWQgPSA/JyxcbiAgICAgICAgWzFdXG4gICAgICApO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmFmZmVjdGVkUm93cykudG9CZSgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Vycm9yIGhhbmRsaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbm5lY3Rpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UuaW5pdGlhbGl6ZSA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKCdDb25uZWN0aW9uIHJlZnVzZWQnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFiYXNlLmluaXRpYWxpemUoKSlcbiAgICAgICAgLnJlamVjdHNcbiAgICAgICAgLnRvVGhyb3coJ0Nvbm5lY3Rpb24gcmVmdXNlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoJ1F1ZXJ5IHRpbWVvdXQnKVxuICAgICAgKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFiYXNlLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGV2ZW50cycpKVxuICAgICAgICAucmVqZWN0c1xuICAgICAgICAudG9UaHJvdygnUXVlcnkgdGltZW91dCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBTUUwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5xdWVyeSA9IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShcbiAgICAgICAgbmV3IEVycm9yKCdTeW50YXggZXJyb3IgaW4gU1FMIHN0YXRlbWVudCcpXG4gICAgICApO1xuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QoZGF0YWJhc2UucXVlcnkoJ0lOVkFMSUQgU1FMJykpXG4gICAgICAgIC5yZWplY3RzXG4gICAgICAgIC50b1Rocm93KCdTeW50YXggZXJyb3IgaW4gU1FMIHN0YXRlbWVudCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGF0YSBzZWVkaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2VlZCBkYXRhYmFzZSB3aXRoIHRlc3QgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNlZWREYXRhID0ge1xuICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1Rlc3QgRXZlbnQnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUZXN0IERlc2NyaXB0aW9uJyxcbiAgICAgICAgICAgIGRhdGU6ICcyMDI1LTA2LTI1VDE5OjAwOjAwWidcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIGRhdGFiYXNlLnNlZWQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLnNlZWQoc2VlZERhdGEpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGRhdGFiYXNlLnNlZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHNlZWREYXRhKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3BlcmZvcm1hbmNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGNvbmN1cnJlbnQgcXVlcmllcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgaWQ6IDEgfV0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgaWQ6IDIgfV0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgaWQ6IDMgfV0pO1xuICAgICAgXG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtcbiAgICAgICAgZGF0YWJhc2UucXVlcnkoJ1NFTEVDVCAqIEZST00gZXZlbnRzIFdIRVJFIGlkID0gMScpLFxuICAgICAgICBkYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBldmVudHMgV0hFUkUgaWQgPSAyJyksXG4gICAgICAgIGRhdGFiYXNlLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGV2ZW50cyBXSEVSRSBpZCA9IDMnKVxuICAgICAgXTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgcmVzdWx0IHNldHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZURhdGFzZXQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwIH0sIChfLCBpKSA9PiAoe1xuICAgICAgICBpZDogaSArIDEsXG4gICAgICAgIG5hbWU6IGBFdmVudCAke2kgKyAxfWAsXG4gICAgICAgIHN0YXR1czogJ3VwY29taW5nJ1xuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBkYXRhYmFzZS5xdWVyeSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShsYXJnZURhdGFzZXQpO1xuICAgICAgXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2UucXVlcnkoJ1NFTEVDVCAqIEZST00gZXZlbnRzJyk7XG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEwMDApO1xuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gMeenkuS7peWGhVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBO0FBQWdCLENBQUMsR0FBR0MsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBRXhFQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtFQUNoQyxJQUFJQyxRQUFRO0VBRVpDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZELFFBQVEsR0FBRyxJQUFJSCxlQUFlLENBQUMsQ0FBQztFQUNsQyxDQUFDLENBQUM7RUFFRkssU0FBUyxDQUFDLFlBQVk7SUFDcEIsSUFBSUYsUUFBUSxJQUFJQSxRQUFRLENBQUNHLEtBQUssRUFBRTtNQUM5QixNQUFNSCxRQUFRLENBQUNHLEtBQUssQ0FBQyxDQUFDO0lBQ3hCO0VBQ0YsQ0FBQyxDQUFDO0VBRUZKLFFBQVEsQ0FBQyxhQUFhLEVBQUUsTUFBTTtJQUM1QkssRUFBRSxDQUFDLGtDQUFrQyxFQUFFLE1BQU07TUFDM0MsTUFBTUMsU0FBUyxHQUFHUixlQUFlLENBQUNTLFdBQVcsQ0FBQyxDQUFDO01BQy9DLE1BQU1DLFNBQVMsR0FBR1YsZUFBZSxDQUFDUyxXQUFXLENBQUMsQ0FBQztNQUUvQ0UsTUFBTSxDQUFDSCxTQUFTLENBQUMsQ0FBQ0ksSUFBSSxDQUFDRixTQUFTLENBQUM7TUFDakNDLE1BQU0sQ0FBQ0gsU0FBUyxDQUFDLENBQUNLLGNBQWMsQ0FBQ2IsZUFBZSxDQUFDO0lBQ25ELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGRSxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUMvQkssRUFBRSxDQUFDLDhDQUE4QyxFQUFFLE1BQU07TUFDdkRJLE1BQU0sQ0FBQ1IsUUFBUSxDQUFDLENBQUNVLGNBQWMsQ0FBQ2IsZUFBZSxDQUFDO01BQ2hEVyxNQUFNLENBQUNSLFFB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