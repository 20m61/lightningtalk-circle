c34bd797fab4470f5916a343d9f15964
"use strict";

var _globals = require("@jest/globals");
var _fsExtra = _interopRequireDefault(require("fs-extra"));
var _path = _interopRequireDefault(require("path"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * サーバーユーティリティ関数のユニットテスト
 */

// テスト対象のユーティリティ関数（実装予定）
class DataManager {
  constructor(dataDir = './server/data') {
    this.dataDir = dataDir;
  }
  async loadData(filename) {
    const filePath = _path.default.join(this.dataDir, filename);
    if (await _fsExtra.default.pathExists(filePath)) {
      return await _fsExtra.default.readJson(filePath);
    }
    return null;
  }
  async saveData(filename, data) {
    const filePath = _path.default.join(this.dataDir, filename);
    await _fsExtra.default.ensureDir(_path.default.dirname(filePath));
    await _fsExtra.default.writeJson(filePath, data, {
      spaces: 2
    });
    return true;
  }
  async appendData(filename, newData) {
    const existingData = (await this.loadData(filename)) || [];
    let updatedData;
    if (Array.isArray(existingData)) {
      updatedData = [...existingData, newData];
    } else {
      // オブジェクトの深いマージ
      updatedData = this.deepMerge(existingData, newData);
    }
    return await this.saveData(filename, updatedData);
  }
  deepMerge(target, source) {
    const result = {
      ...target
    };
    for (const key in source) {
      if (source.hasOwnProperty(key)) {
        if (typeof source[key] === 'object' && source[key] !== null && !Array.isArray(source[key])) {
          result[key] = this.deepMerge(result[key] || {}, source[key]);
        } else {
          result[key] = source[key];
        }
      }
    }
    return result;
  }
  async deleteData(filename) {
    const filePath = _path.default.join(this.dataDir, filename);
    if (await _fsExtra.default.pathExists(filePath)) {
      await _fsExtra.default.remove(filePath);
      return true;
    }
    return false;
  }
}

// バリデーション関数
function validateEventData(eventData) {
  const requiredFields = ['title', 'date', 'location'];
  const missingFields = requiredFields.filter(field => !eventData[field]);
  if (missingFields.length > 0) {
    throw new Error(`Missing required fields: ${missingFields.join(', ')}`);
  }

  // 日付の検証
  const eventDate = new Date(eventData.date);
  if (isNaN(eventDate.getTime())) {
    throw new Error('Invalid date format');
  }

  // 未来の日付かチェック
  if (eventDate < new Date()) {
    throw new Error('Event date must be in the future');
  }
  return true;
}

// レスポンスフォーマッター
function formatApiResponse(data, message = 'Success', status = 200) {
  return {
    status,
    message,
    data,
    timestamp: new Date().toISOString()
  };
}
function formatErrorResponse(error, status = 500) {
  return {
    status,
    message: error.message || 'Internal server error',
    error: process.env.NODE_ENV === 'development' ? error.stack : undefined,
    timestamp: new Date().toISOString()
  };
}
(0, _globals.describe)('DataManager', () => {
  let dataManager;
  const testDataDir = _path.default.join(process.cwd(), 'tests', 'data');
  beforeEach(async () => {
    dataManager = new DataManager(testDataDir);
    await _fsExtra.default.ensureDir(testDataDir);
  });
  afterEach(async () => {
    if (await _fsExtra.default.pathExists(testDataDir)) {
      await _fsExtra.default.remove(testDataDir);
    }
  });
  (0, _globals.describe)('loadData', () => {
    (0, _globals.it)('should load existing JSON file', async () => {
      const testData = {
        name: 'Test Event',
        participants: 10
      };
      const filename = 'test-event.json';
      await _fsExtra.default.writeJson(_path.default.join(testDataDir, filename), testData);
      const loadedData = await dataManager.loadData(filename);
      (0, _globals.expect)(loadedData).toEqual(testData);
    });
    (0, _globals.it)('should return null for non-existent file', async () => {
      const loadedData = await dataManager.loadData('non-existent.json');
      (0, _globals.expect)(loadedData).toBeNull();
    });
    (0, _globals.it)('should handle malformed JSON gracefully', async () => {
      const filename = 'malformed.json';
      await _fsExtra.default.writeFile(_path.default.join(testDataDir, filename), '{ invalid json content');
      await (0, _globals.expect)(dataManager.loadData(filename)).rejects.toThrow();
    });
  });
  (0, _globals.describe)('saveData', () => {
    (0, _globals.it)('should save data to JSON file', async () => {
      const testData = {
        title: 'Lightning Talk',
        date: '2024-12-01'
      };
      const filename = 'save-test.json';
      const result = await dataManager.saveData(filename, testData);
      (0, _globals.expect)(result).toBe(true);
      const savedData = await _fsExtra.default.readJson(_path.default.join(testDataDir, filename));
      (0, _globals.expect)(savedData).toEqual(testData);
    });
    (0, _globals.it)('should create directory if not exists', async () => {
      const testData = {
        test: true
      };
      const filename = 'nested/deep/test.json';
      const result = await dataManager.saveData(filename, testData);
      (0, _globals.expect)(result).toBe(true);
      const filePath = _path.default.join(testDataDir, filename);
      (0, _globals.expect)(await _fsExtra.default.pathExists(filePath)).toBe(true);
    });
    (0, _globals.it)('should overwrite existing file', async () => {
      const filename = 'overwrite-test.json';
      const originalData = {
        version: 1
      };
      const updatedData = {
        version: 2
      };
      await dataManager.saveData(filename, originalData);
      await dataManager.saveData(filename, updatedData);
      const finalData = await dataManager.loadData(filename);
      (0, _globals.expect)(finalData).toEqual(updatedData);
    });
  });
  (0, _globals.describe)('appendData', () => {
    (0, _globals.it)('should append to array data', async () => {
      const filename = 'append-array.json';
      const initialData = [{
        id: 1,
        name: 'First'
      }];
      const newItem = {
        id: 2,
        name: 'Second'
      };
      await dataManager.saveData(filename, initialData);
      await dataManager.appendData(filename, newItem);
      const result = await dataManager.loadData(filename);
      (0, _globals.expect)(result).toHaveLength(2);
      (0, _globals.expect)(result[1]).toEqual(newItem);
    });
    (0, _globals.it)('should merge object data', async () => {
      const filename = 'append-object.json';
      const initialData = {
        settings: {
          theme: 'dark'
        }
      };
      const newData = {
        settings: {
          language: 'ja'
        }
      };
      await dataManager.saveData(filename, initialData);
      await dataManager.appendData(filename, newData);
      const result = await dataManager.loadData(filename);
      (0, _globals.expect)(result.settings).toEqual({
        theme: 'dark',
        language: 'ja'
      });
    });
    (0, _globals.it)('should create new file if not exists', async () => {
      const filename = 'new-append.json';
      const newData = {
        id: 1,
        name: 'First Item'
      };
      await dataManager.appendData(filename, newData);
      const result = await dataManager.loadData(filename);
      (0, _globals.expect)(result).toEqual([newData]);
    });
  });
  (0, _globals.describe)('deleteData', () => {
    (0, _globals.it)('should delete existing file', async () => {
      const filename = 'delete-test.json';
      await dataManager.saveData(filename, {
        test: true
      });
      const result = await dataManager.deleteData(filename);
      (0, _globals.expect)(result).toBe(true);
      const filePath = _path.default.join(testDataDir, filename);
      (0, _globals.expect)(await _fsExtra.default.pathExists(filePath)).toBe(false);
    });
    (0, _globals.it)('should return false for non-existent file', async () => {
      const result = await dataManager.deleteData('non-existent.json');
      (0, _globals.expect)(result).toBe(false);
    });
  });
});
(0, _globals.describe)('validateEventData', () => {
  // 未来の日付を動的に生成（現在から1ヶ月後）
  const futureDate = new Date();
  futureDate.setMonth(futureDate.getMonth() + 1);
  const validEventData = {
    title: 'Tech Lightning Talk',
    date: futureDate.toISOString(),
    location: 'Tokyo Conference Room',
    description: 'Monthly tech sharing event'
  };
  (0, _globals.it)('should validate complete event data', () => {
    (0, _globals.expect)(() => validateEventData(validEventData)).not.toThrow();
    (0, _globals.expect)(validateEventData(validEventData)).toBe(true);
  });
  (0, _globals.it)('should reject event without title', () => {
    const eventWithoutTitle = {
      ...validEventData
    };
    delete eventWithoutTitle.title;
    (0, _globals.expect)(() => validateEventData(eventWithoutTitle)).toThrow('Missing required fields: title');
  });
  (0, _globals.it)('should reject event without date', () => {
    const eventWithoutDate = {
      ...validEventData
    };
    delete eventWithoutDate.date;
    (0, _globals.expect)(() => validateEventData(eventWithoutDate)).toThrow('Missing required fields: date');
  });
  (0, _globals.it)('should reject event without location', () => {
    const eventWithoutLocation = {
      ...validEventData
    };
    delete eventWithoutLocation.location;
    (0, _globals.expect)(() => validateEventData(eventWithoutLocation)).toThrow('Missing required fields: location');
  });
  (0, _globals.it)('should reject event with invalid date', () => {
    const eventWithInvalidDate = {
      ...validEventData,
      date: 'invalid-date-string'
    };
    (0, _globals.expect)(() => validateEventData(eventWithInvalidDate)).toThrow('Invalid date format');
  });
  (0, _globals.it)('should reject event with past date', () => {
    // 過去の日付を動的に生成（現在から1日前）
    const pastDate = new Date();
    pastDate.setDate(pastDate.getDate() - 1);
    const eventWithPastDate = {
      ...validEventData,
      date: pastDate.toISOString()
    };
    (0, _globals.expect)(() => validateEventData(eventWithPastDate)).toThrow('Event date must be in the future');
  });
  (0, _globals.it)('should reject missing multiple fields', () => {
    const incompleteEvent = {
      description: 'Only description'
    };
    (0, _globals.expect)(() => validateEventData(incompleteEvent)).toThrow('Missing required fields: title, date, location');
  });
});
(0, _globals.describe)('API Response Formatters', () => {
  (0, _globals.describe)('formatApiResponse', () => {
    (0, _globals.it)('should format successful response with default values', () => {
      const data = {
        id: 1,
        name: 'Test'
      };
      const response = formatApiResponse(data);
      (0, _globals.expect)(response).toMatchObject({
        status: 200,
        message: 'Success',
        data,
        timestamp: _globals.expect.any(String)
      });
    });
    (0, _globals.it)('should format response with custom message and status', () => {
      const data = {
        created: true
      };
      const response = formatApiResponse(data, 'Created successfully', 201);
      (0, _globals.expect)(response).toMatchObject({
        status: 201,
        message: 'Created successfully',
        data
      });
    });
    (0, _globals.it)('should include valid timestamp', () => {
      const response = formatApiResponse({});
      const timestamp = new Date(response.timestamp);
      (0, _globals.expect)(timestamp.getTime()).not.toBeNaN();
      (0, _globals.expect)(Date.now() - timestamp.getTime()).toBeLessThan(1000);
    });
  });
  (0, _globals.describe)('formatErrorResponse', () => {
    (0, _globals.it)('should format error response with default status', () => {
      const error = new Error('Something went wrong');
      const response = formatErrorResponse(error);
      (0, _globals.expect)(response).toMatchObject({
        status: 500,
        message: 'Something went wrong',
        timestamp: _globals.expect.any(String)
      });
    });
    (0, _globals.it)('should format error response with custom status', () => {
      const error = new Error('Not found');
      const response = formatErrorResponse(error, 404);
      (0, _globals.expect)(response.status).toBe(404);
      (0, _globals.expect)(response.message).toBe('Not found');
    });
    (0, _globals.it)('should include stack trace in development mode', () => {
      const originalEnv = process.env.NODE_ENV;
      process.env.NODE_ENV = 'development';
      const error = new Error('Test error');
      const response = formatErrorResponse(error);
      (0, _globals.expect)(response.error).toBeDefined();
      (0, _globals.expect)(response.error).toContain('Error: Test error');
      process.env.NODE_ENV = originalEnv;
    });
    (0, _globals.it)('should exclude stack trace in production mode', () => {
      const originalEnv = process.env.NODE_ENV;
      process.env.NODE_ENV = 'production';
      const error = new Error('Test error');
      const response = formatErrorResponse(error);
      (0, _globals.expect)(response.error).toBeUndefined();
      process.env.NODE_ENV = originalEnv;
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfZnNFeHRyYSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcGF0aCIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIkRhdGFNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJkYXRhRGlyIiwibG9hZERhdGEiLCJmaWxlbmFtZSIsImZpbGVQYXRoIiwicGF0aCIsImpvaW4iLCJmcyIsInBhdGhFeGlzdHMiLCJyZWFkSnNvbiIsInNhdmVEYXRhIiwiZGF0YSIsImVuc3VyZURpciIsImRpcm5hbWUiLCJ3cml0ZUpzb24iLCJzcGFjZXMiLCJhcHBlbmREYXRhIiwibmV3RGF0YSIsImV4aXN0aW5nRGF0YSIsInVwZGF0ZWREYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiZGVlcE1lcmdlIiwidGFyZ2V0Iiwic291cmNlIiwicmVzdWx0Iiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJkZWxldGVEYXRhIiwicmVtb3ZlIiwidmFsaWRhdGVFdmVudERhdGEiLCJldmVudERhdGEiLCJyZXF1aXJlZEZpZWxkcyIsIm1pc3NpbmdGaWVsZHMiLCJmaWx0ZXIiLCJmaWVsZCIsImxlbmd0aCIsIkVycm9yIiwiZXZlbnREYXRlIiwiRGF0ZSIsImRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJmb3JtYXRBcGlSZXNwb25zZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImZvcm1hdEVycm9yUmVzcG9uc2UiLCJlcnJvciIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YWNrIiwidW5kZWZpbmVkIiwiZGVzY3JpYmUiLCJkYXRhTWFuYWdlciIsInRlc3REYXRhRGlyIiwiY3dkIiwiYmVmb3JlRWFjaCIsImFmdGVyRWFjaCIsIml0IiwidGVzdERhdGEiLCJuYW1lIiwicGFydGljaXBhbnRzIiwibG9hZGVkRGF0YSIsImV4cGVjdCIsInRvRXF1YWwiLCJ0b0JlTnVsbCIsIndyaXRlRmlsZSIsInJlamVjdHMiLCJ0b1Rocm93IiwidGl0bGUiLCJ0b0JlIiwic2F2ZWREYXRhIiwidGVzdCIsIm9yaWdpbmFsRGF0YSIsInZlcnNpb24iLCJmaW5hbERhdGEiLCJpbml0aWFsRGF0YSIsImlkIiwibmV3SXRlbSIsInRvSGF2ZUxlbmd0aCIsInNldHRpbmdzIiwidGhlbWUiLCJsYW5ndWFnZSIsImZ1dHVyZURhdGUiLCJzZXRNb250aCIsImdldE1vbnRoIiwidmFsaWRFdmVudERhdGEiLCJsb2NhdGlvbiIsImRlc2NyaXB0aW9uIiwibm90IiwiZXZlbnRXaXRob3V0VGl0bGUiLCJldmVudFdpdGhvdXREYXRlIiwiZXZlbnRXaXRob3V0TG9jYXRpb24iLCJldmVudFdpdGhJbnZhbGlkRGF0ZSIsInBhc3REYXRlIiwic2V0RGF0ZSIsImdldERhdGUiLCJldmVudFdpdGhQYXN0RGF0ZSIsImluY29tcGxldGVFdmVudCIsInJlc3BvbnNlIiwidG9NYXRjaE9iamVjdCIsImFueSIsIlN0cmluZyIsImNyZWF0ZWQiLCJ0b0JlTmFOIiwibm93IiwidG9CZUxlc3NUaGFuIiwib3JpZ2luYWxFbnYiLCJ0b0JlRGVmaW5lZCIsInRvQ29udGFpbiIsInRvQmVVbmRlZmluZWQiXSwic291cmNlcyI6WyJzZXJ2ZXItdXRpbHMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOOCteODvOODkOODvOODpuODvOODhuOCo+ODquODhuOCo+mWouaVsOOBruODpuODi+ODg+ODiOODhuOCueODiFxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCBpdCwgZXhwZWN0LCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG5pbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbi8vIOODhuOCueODiOWvvuixoeOBruODpuODvOODhuOCo+ODquODhuOCo+mWouaVsO+8iOWun+ijheS6iOWumu+8iVxuY2xhc3MgRGF0YU1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcihkYXRhRGlyID0gJy4vc2VydmVyL2RhdGEnKSB7XG4gICAgdGhpcy5kYXRhRGlyID0gZGF0YURpcjtcbiAgfVxuXG4gIGFzeW5jIGxvYWREYXRhKGZpbGVuYW1lKSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5kYXRhRGlyLCBmaWxlbmFtZSk7XG4gICAgaWYgKGF3YWl0IGZzLnBhdGhFeGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICByZXR1cm4gYXdhaXQgZnMucmVhZEpzb24oZmlsZVBhdGgpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIHNhdmVEYXRhKGZpbGVuYW1lLCBkYXRhKSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5kYXRhRGlyLCBmaWxlbmFtZSk7XG4gICAgYXdhaXQgZnMuZW5zdXJlRGlyKHBhdGguZGlybmFtZShmaWxlUGF0aCkpO1xuICAgIGF3YWl0IGZzLndyaXRlSnNvbihmaWxlUGF0aCwgZGF0YSwgeyBzcGFjZXM6IDIgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBhc3luYyBhcHBlbmREYXRhKGZpbGVuYW1lLCBuZXdEYXRhKSB7XG4gICAgY29uc3QgZXhpc3RpbmdEYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YShmaWxlbmFtZSkgfHwgW107XG4gICAgbGV0IHVwZGF0ZWREYXRhO1xuICAgIFxuICAgIGlmIChBcnJheS5pc0FycmF5KGV4aXN0aW5nRGF0YSkpIHtcbiAgICAgIHVwZGF0ZWREYXRhID0gWy4uLmV4aXN0aW5nRGF0YSwgbmV3RGF0YV07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOOCquODluOCuOOCp+OCr+ODiOOBrua3seOBhOODnuODvOOCuFxuICAgICAgdXBkYXRlZERhdGEgPSB0aGlzLmRlZXBNZXJnZShleGlzdGluZ0RhdGEsIG5ld0RhdGEpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zYXZlRGF0YShmaWxlbmFtZSwgdXBkYXRlZERhdGEpO1xuICB9XG5cbiAgZGVlcE1lcmdlKHRhcmdldCwgc291cmNlKSB7XG4gICAgY29uc3QgcmVzdWx0ID0geyAuLi50YXJnZXQgfTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtrZXldID09PSAnb2JqZWN0JyAmJiBzb3VyY2Vba2V5XSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHRoaXMuZGVlcE1lcmdlKHJlc3VsdFtrZXldIHx8IHt9LCBzb3VyY2Vba2V5XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlRGF0YShmaWxlbmFtZSkge1xuICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5qb2luKHRoaXMuZGF0YURpciwgZmlsZW5hbWUpO1xuICAgIGlmIChhd2FpdCBmcy5wYXRoRXhpc3RzKGZpbGVQYXRoKSkge1xuICAgICAgYXdhaXQgZnMucmVtb3ZlKGZpbGVQYXRoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLy8g44OQ44Oq44OH44O844K344On44Oz6Zai5pWwXG5mdW5jdGlvbiB2YWxpZGF0ZUV2ZW50RGF0YShldmVudERhdGEpIHtcbiAgY29uc3QgcmVxdWlyZWRGaWVsZHMgPSBbJ3RpdGxlJywgJ2RhdGUnLCAnbG9jYXRpb24nXTtcbiAgY29uc3QgbWlzc2luZ0ZpZWxkcyA9IHJlcXVpcmVkRmllbGRzLmZpbHRlcihmaWVsZCA9PiAhZXZlbnREYXRhW2ZpZWxkXSk7XG4gIFxuICBpZiAobWlzc2luZ0ZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogJHttaXNzaW5nRmllbGRzLmpvaW4oJywgJyl9YCk7XG4gIH1cbiAgXG4gIC8vIOaXpeS7mOOBruaknOiovFxuICBjb25zdCBldmVudERhdGUgPSBuZXcgRGF0ZShldmVudERhdGEuZGF0ZSk7XG4gIGlmIChpc05hTihldmVudERhdGUuZ2V0VGltZSgpKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkYXRlIGZvcm1hdCcpO1xuICB9XG4gIFxuICAvLyDmnKrmnaXjga7ml6Xku5jjgYvjg4Hjgqfjg4Pjgq9cbiAgaWYgKGV2ZW50RGF0ZSA8IG5ldyBEYXRlKCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0V2ZW50IGRhdGUgbXVzdCBiZSBpbiB0aGUgZnV0dXJlJyk7XG4gIH1cbiAgXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyDjg6zjgrnjg53jg7Pjgrnjg5Xjgqnjg7zjg57jg4Pjgr/jg7xcbmZ1bmN0aW9uIGZvcm1hdEFwaVJlc3BvbnNlKGRhdGEsIG1lc3NhZ2UgPSAnU3VjY2VzcycsIHN0YXR1cyA9IDIwMCkge1xuICByZXR1cm4ge1xuICAgIHN0YXR1cyxcbiAgICBtZXNzYWdlLFxuICAgIGRhdGEsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvciwgc3RhdHVzID0gNTAwKSB7XG4gIHJldHVybiB7XG4gICAgc3RhdHVzLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfTtcbn1cblxuZGVzY3JpYmUoJ0RhdGFNYW5hZ2VyJywgKCkgPT4ge1xuICBsZXQgZGF0YU1hbmFnZXI7XG4gIGNvbnN0IHRlc3REYXRhRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICd0ZXN0cycsICdkYXRhJyk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIodGVzdERhdGFEaXIpO1xuICAgIGF3YWl0IGZzLmVuc3VyZURpcih0ZXN0RGF0YURpcik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgaWYgKGF3YWl0IGZzLnBhdGhFeGlzdHModGVzdERhdGFEaXIpKSB7XG4gICAgICBhd2FpdCBmcy5yZW1vdmUodGVzdERhdGFEaXIpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWREYXRhJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbG9hZCBleGlzdGluZyBKU09OIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IHsgbmFtZTogJ1Rlc3QgRXZlbnQnLCBwYXJ0aWNpcGFudHM6IDEwIH07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9ICd0ZXN0LWV2ZW50Lmpzb24nO1xuICAgICAgXG4gICAgICBhd2FpdCBmcy53cml0ZUpzb24ocGF0aC5qb2luKHRlc3REYXRhRGlyLCBmaWxlbmFtZSksIHRlc3REYXRhKTtcbiAgICAgIFxuICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChsb2FkZWREYXRhKS50b0VxdWFsKHRlc3REYXRhKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIG5vbi1leGlzdGVudCBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKCdub24tZXhpc3RlbnQuanNvbicpO1xuICAgICAgZXhwZWN0KGxvYWRlZERhdGEpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgSlNPTiBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSAnbWFsZm9ybWVkLmpzb24nO1xuICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKFxuICAgICAgICBwYXRoLmpvaW4odGVzdERhdGFEaXIsIGZpbGVuYW1lKSwgXG4gICAgICAgICd7IGludmFsaWQganNvbiBjb250ZW50J1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFNYW5hZ2VyLmxvYWREYXRhKGZpbGVuYW1lKSkucmVqZWN0cy50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdzYXZlRGF0YScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHNhdmUgZGF0YSB0byBKU09OIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IHsgdGl0bGU6ICdMaWdodG5pbmcgVGFsaycsIGRhdGU6ICcyMDI0LTEyLTAxJyB9O1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSAnc2F2ZS10ZXN0Lmpzb24nO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWFuYWdlci5zYXZlRGF0YShmaWxlbmFtZSwgdGVzdERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2F2ZWREYXRhID0gYXdhaXQgZnMucmVhZEpzb24ocGF0aC5qb2luKHRlc3REYXRhRGlyLCBmaWxlbmFtZSkpO1xuICAgICAgZXhwZWN0KHNhdmVkRGF0YSkudG9FcXVhbCh0ZXN0RGF0YSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBkaXJlY3RvcnkgaWYgbm90IGV4aXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0geyB0ZXN0OiB0cnVlIH07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9ICduZXN0ZWQvZGVlcC90ZXN0Lmpzb24nO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWFuYWdlci5zYXZlRGF0YShmaWxlbmFtZSwgdGVzdERhdGEpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGVzdERhdGFEaXIsIGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChhd2FpdCBmcy5wYXRoRXhpc3RzKGZpbGVQYXRoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgb3ZlcndyaXRlIGV4aXN0aW5nIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9ICdvdmVyd3JpdGUtdGVzdC5qc29uJztcbiAgICAgIGNvbnN0IG9yaWdpbmFsRGF0YSA9IHsgdmVyc2lvbjogMSB9O1xuICAgICAgY29uc3QgdXBkYXRlZERhdGEgPSB7IHZlcnNpb246IDIgfTtcbiAgICAgIFxuICAgICAgYXdhaXQgZGF0YU1hbmFnZXIuc2F2ZURhdGEoZmlsZW5hbWUsIG9yaWdpbmFsRGF0YSk7XG4gICAgICBhd2FpdCBkYXRhTWFuYWdlci5zYXZlRGF0YShmaWxlbmFtZSwgdXBkYXRlZERhdGEpO1xuICAgICAgXG4gICAgICBjb25zdCBmaW5hbERhdGEgPSBhd2FpdCBkYXRhTWFuYWdlci5sb2FkRGF0YShmaWxlbmFtZSk7XG4gICAgICBleHBlY3QoZmluYWxEYXRhKS50b0VxdWFsKHVwZGF0ZWREYXRhKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FwcGVuZERhdGEnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhcHBlbmQgdG8gYXJyYXkgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gJ2FwcGVuZC1hcnJheS5qc29uJztcbiAgICAgIGNvbnN0IGluaXRpYWxEYXRhID0gW3sgaWQ6IDEsIG5hbWU6ICdGaXJzdCcgfV07XG4gICAgICBjb25zdCBuZXdJdGVtID0geyBpZDogMiwgbmFtZTogJ1NlY29uZCcgfTtcbiAgICAgIFxuICAgICAgYXdhaXQgZGF0YU1hbmFnZXIuc2F2ZURhdGEoZmlsZW5hbWUsIGluaXRpYWxEYXRhKTtcbiAgICAgIGF3YWl0IGRhdGFNYW5hZ2VyLmFwcGVuZERhdGEoZmlsZW5hbWUsIG5ld0l0ZW0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWFuYWdlci5sb2FkRGF0YShmaWxlbmFtZSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QocmVzdWx0WzFdKS50b0VxdWFsKG5ld0l0ZW0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtZXJnZSBvYmplY3QgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gJ2FwcGVuZC1vYmplY3QuanNvbic7XG4gICAgICBjb25zdCBpbml0aWFsRGF0YSA9IHsgc2V0dGluZ3M6IHsgdGhlbWU6ICdkYXJrJyB9IH07XG4gICAgICBjb25zdCBuZXdEYXRhID0geyBzZXR0aW5nczogeyBsYW5ndWFnZTogJ2phJyB9IH07XG4gICAgICBcbiAgICAgIGF3YWl0IGRhdGFNYW5hZ2VyLnNhdmVEYXRhKGZpbGVuYW1lLCBpbml0aWFsRGF0YSk7XG4gICAgICBhd2FpdCBkYXRhTWFuYWdlci5hcHBlbmREYXRhKGZpbGVuYW1lLCBuZXdEYXRhKTtcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1hbmFnZXIubG9hZERhdGEoZmlsZW5hbWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5zZXR0aW5ncykudG9FcXVhbCh7IHRoZW1lOiAnZGFyaycsIGxhbmd1YWdlOiAnamEnIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgbmV3IGZpbGUgaWYgbm90IGV4aXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gJ25ldy1hcHBlbmQuanNvbic7XG4gICAgICBjb25zdCBuZXdEYXRhID0geyBpZDogMSwgbmFtZTogJ0ZpcnN0IEl0ZW0nIH07XG4gICAgICBcbiAgICAgIGF3YWl0IGRhdGFNYW5hZ2VyLmFwcGVuZERhdGEoZmlsZW5hbWUsIG5ld0RhdGEpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWFuYWdlci5sb2FkRGF0YShmaWxlbmFtZSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtuZXdEYXRhXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkZWxldGVEYXRhJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZGVsZXRlIGV4aXN0aW5nIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBmaWxlbmFtZSA9ICdkZWxldGUtdGVzdC5qc29uJztcbiAgICAgIGF3YWl0IGRhdGFNYW5hZ2VyLnNhdmVEYXRhKGZpbGVuYW1lLCB7IHRlc3Q6IHRydWUgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNYW5hZ2VyLmRlbGV0ZURhdGEoZmlsZW5hbWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIFxuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGVzdERhdGFEaXIsIGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChhd2FpdCBmcy5wYXRoRXhpc3RzKGZpbGVQYXRoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBmb3Igbm9uLWV4aXN0ZW50IGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWFuYWdlci5kZWxldGVEYXRhKCdub24tZXhpc3RlbnQuanNvbicpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCd2YWxpZGF0ZUV2ZW50RGF0YScsICgpID0+IHtcbiAgLy8g5pyq5p2l44Gu5pel5LuY44KS5YuV55qE44Gr55Sf5oiQ77yI54++5Zyo44GL44KJMeODtuaciOW+jO+8iVxuICBjb25zdCBmdXR1cmVEYXRlID0gbmV3IERhdGUoKTtcbiAgZnV0dXJlRGF0ZS5zZXRNb250aChmdXR1cmVEYXRlLmdldE1vbnRoKCkgKyAxKTtcbiAgXG4gIGNvbnN0IHZhbGlkRXZlbnREYXRhID0ge1xuICAgIHRpdGxlOiAnVGVjaCBMaWdodG5pbmcgVGFsaycsXG4gICAgZGF0ZTogZnV0dXJlRGF0ZS50b0lTT1N0cmluZygpLFxuICAgIGxvY2F0aW9uOiAnVG9reW8gQ29uZmVyZW5jZSBSb29tJyxcbiAgICBkZXNjcmlwdGlvbjogJ01vbnRobHkgdGVjaCBzaGFyaW5nIGV2ZW50J1xuICB9O1xuXG4gIGl0KCdzaG91bGQgdmFsaWRhdGUgY29tcGxldGUgZXZlbnQgZGF0YScsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVFdmVudERhdGEodmFsaWRFdmVudERhdGEpKS5ub3QudG9UaHJvdygpO1xuICAgIGV4cGVjdCh2YWxpZGF0ZUV2ZW50RGF0YSh2YWxpZEV2ZW50RGF0YSkpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGhvdXQgdGl0bGUnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRXaXRob3V0VGl0bGUgPSB7IC4uLnZhbGlkRXZlbnREYXRhIH07XG4gICAgZGVsZXRlIGV2ZW50V2l0aG91dFRpdGxlLnRpdGxlO1xuICAgIFxuICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUV2ZW50RGF0YShldmVudFdpdGhvdXRUaXRsZSkpXG4gICAgICAudG9UaHJvdygnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHRpdGxlJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGhvdXQgZGF0ZScsICgpID0+IHtcbiAgICBjb25zdCBldmVudFdpdGhvdXREYXRlID0geyAuLi52YWxpZEV2ZW50RGF0YSB9O1xuICAgIGRlbGV0ZSBldmVudFdpdGhvdXREYXRlLmRhdGU7XG4gICAgXG4gICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRXZlbnREYXRhKGV2ZW50V2l0aG91dERhdGUpKVxuICAgICAgLnRvVGhyb3coJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBkYXRlJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGhvdXQgbG9jYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRXaXRob3V0TG9jYXRpb24gPSB7IC4uLnZhbGlkRXZlbnREYXRhIH07XG4gICAgZGVsZXRlIGV2ZW50V2l0aG91dExvY2F0aW9uLmxvY2F0aW9uO1xuICAgIFxuICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUV2ZW50RGF0YShldmVudFdpdGhvdXRMb2NhdGlvbikpXG4gICAgICAudG9UaHJvdygnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IGxvY2F0aW9uJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGggaW52YWxpZCBkYXRlJywgKCkgPT4ge1xuICAgIGNvbnN0IGV2ZW50V2l0aEludmFsaWREYXRlID0ge1xuICAgICAgLi4udmFsaWRFdmVudERhdGEsXG4gICAgICBkYXRlOiAnaW52YWxpZC1kYXRlLXN0cmluZydcbiAgICB9O1xuICAgIFxuICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUV2ZW50RGF0YShldmVudFdpdGhJbnZhbGlkRGF0ZSkpXG4gICAgICAudG9UaHJvdygnSW52YWxpZCBkYXRlIGZvcm1hdCcpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHJlamVjdCBldmVudCB3aXRoIHBhc3QgZGF0ZScsICgpID0+IHtcbiAgICAvLyDpgY7ljrvjga7ml6Xku5jjgpLli5XnmoTjgavnlJ/miJDvvIjnj77lnKjjgYvjgokx5pel5YmN77yJXG4gICAgY29uc3QgcGFzdERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHBhc3REYXRlLnNldERhdGUocGFzdERhdGUuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgXG4gICAgY29uc3QgZXZlbnRXaXRoUGFzdERhdGUgPSB7XG4gICAgICAuLi52YWxpZEV2ZW50RGF0YSxcbiAgICAgIGRhdGU6IHBhc3REYXRlLnRvSVNPU3RyaW5nKClcbiAgICB9O1xuICAgIFxuICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUV2ZW50RGF0YShldmVudFdpdGhQYXN0RGF0ZSkpXG4gICAgICAudG9UaHJvdygnRXZlbnQgZGF0ZSBtdXN0IGJlIGluIHRoZSBmdXR1cmUnKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZWplY3QgbWlzc2luZyBtdWx0aXBsZSBmaWVsZHMnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5jb21wbGV0ZUV2ZW50ID0geyBkZXNjcmlwdGlvbjogJ09ubHkgZGVzY3JpcHRpb24nIH07XG4gICAgXG4gICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRXZlbnREYXRhKGluY29tcGxldGVFdmVudCkpXG4gICAgICAudG9UaHJvdygnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHRpdGxlLCBkYXRlLCBsb2NhdGlvbicpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQVBJIFJlc3BvbnNlIEZvcm1hdHRlcnMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdmb3JtYXRBcGlSZXNwb25zZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZvcm1hdCBzdWNjZXNzZnVsIHJlc3BvbnNlIHdpdGggZGVmYXVsdCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyBpZDogMSwgbmFtZTogJ1Rlc3QnIH07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEFwaVJlc3BvbnNlKGRhdGEpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3MnLFxuICAgICAgICBkYXRhLFxuICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZvcm1hdCByZXNwb25zZSB3aXRoIGN1c3RvbSBtZXNzYWdlIGFuZCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyBjcmVhdGVkOiB0cnVlIH07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEFwaVJlc3BvbnNlKGRhdGEsICdDcmVhdGVkIHN1Y2Nlc3NmdWxseScsIDIwMSk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICBtZXNzYWdlOiAnQ3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB2YWxpZCB0aW1lc3RhbXAnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEFwaVJlc3BvbnNlKHt9KTtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKHJlc3BvbnNlLnRpbWVzdGFtcCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0aW1lc3RhbXAuZ2V0VGltZSgpKS5ub3QudG9CZU5hTigpO1xuICAgICAgZXhwZWN0KERhdGUubm93KCkgLSB0aW1lc3RhbXAuZ2V0VGltZSgpKS50b0JlTGVzc1RoYW4oMTAwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmb3JtYXRFcnJvclJlc3BvbnNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZm9ybWF0IGVycm9yIHJlc3BvbnNlIHdpdGggZGVmYXVsdCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICBtZXNzYWdlOiAnU29tZXRoaW5nIHdlbnQgd3JvbmcnLFxuICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZvcm1hdCBlcnJvciByZXNwb25zZSB3aXRoIGN1c3RvbSBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEVycm9yUmVzcG9uc2UoZXJyb3IsIDQwNCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXNzYWdlKS50b0JlKCdOb3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBzdGFjayB0cmFjZSBpbiBkZXZlbG9wbWVudCBtb2RlJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcbiAgICAgIFxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKCdFcnJvcjogVGVzdCBlcnJvcicpO1xuICAgICAgXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG9yaWdpbmFsRW52O1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleGNsdWRlIHN0YWNrIHRyYWNlIGluIHByb2R1Y3Rpb24gbW9kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICdwcm9kdWN0aW9uJztcbiAgICAgIFxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcik7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9CZVVuZGVmaW5lZCgpO1xuICAgICAgXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG9yaWdpbmFsRW52O1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7QUFJQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxRQUFBLEdBQUFDLHNCQUFBLENBQUFGLE9BQUE7QUFDQSxJQUFBRyxLQUFBLEdBQUFELHNCQUFBLENBQUFGLE9BQUE7QUFBd0IsU0FBQUUsdUJBQUFFLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFOeEI7QUFDQTtBQUNBOztBQU1BO0FBQ0EsTUFBTUcsV0FBVyxDQUFDO0VBQ2hCQyxXQUFXQSxDQUFDQyxPQUFPLEdBQUcsZUFBZSxFQUFFO0lBQ3JDLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxPQUFPO0VBQ3hCO0VBRUEsTUFBTUMsUUFBUUEsQ0FBQ0MsUUFBUSxFQUFFO0lBQ3ZCLE1BQU1DLFFBQVEsR0FBR0MsYUFBSSxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFD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