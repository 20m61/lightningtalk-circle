{"version":3,"names":["describe","it","expect","jest","fs","path","DataManager","constructor","dataDir","loadData","filename","filePath","join","pathExists","readJson","saveData","data","ensureDir","dirname","writeJson","spaces","appendData","newData","existingData","updatedData","Array","isArray","deepMerge","target","source","result","key","hasOwnProperty","deleteData","remove","validateEventData","eventData","requiredFields","missingFields","filter","field","length","Error","eventDate","Date","date","isNaN","getTime","formatApiResponse","message","status","timestamp","toISOString","formatErrorResponse","error","process","env","NODE_ENV","stack","undefined","dataManager","testDataDir","cwd","beforeEach","afterEach","testData","name","participants","loadedData","toEqual","toBeNull","writeFile","rejects","toThrow","title","toBe","savedData","test","originalData","version","finalData","initialData","id","newItem","toHaveLength","settings","theme","language","futureDate","setMonth","getMonth","validEventData","location","description","not","eventWithoutTitle","eventWithoutDate","eventWithoutLocation","eventWithInvalidDate","pastDate","setDate","getDate","eventWithPastDate","incompleteEvent","response","toMatchObject","any","String","created","toBeNaN","now","toBeLessThan","originalEnv","toBeDefined","toContain","toBeUndefined"],"sources":["server-utils.test.js"],"sourcesContent":["/**\n * サーバーユーティリティ関数のユニットテスト\n */\n\nimport { describe, it, expect, jest } from '@jest/globals';\nimport fs from 'fs-extra';\nimport path from 'path';\n\n// テスト対象のユーティリティ関数（実装予定）\nclass DataManager {\n  constructor(dataDir = './server/data') {\n    this.dataDir = dataDir;\n  }\n\n  async loadData(filename) {\n    const filePath = path.join(this.dataDir, filename);\n    if (await fs.pathExists(filePath)) {\n      return await fs.readJson(filePath);\n    }\n    return null;\n  }\n\n  async saveData(filename, data) {\n    const filePath = path.join(this.dataDir, filename);\n    await fs.ensureDir(path.dirname(filePath));\n    await fs.writeJson(filePath, data, { spaces: 2 });\n    return true;\n  }\n\n  async appendData(filename, newData) {\n    const existingData = (await this.loadData(filename)) || [];\n    let updatedData;\n\n    if (Array.isArray(existingData)) {\n      updatedData = [...existingData, newData];\n    } else {\n      // オブジェクトの深いマージ\n      updatedData = this.deepMerge(existingData, newData);\n    }\n\n    return await this.saveData(filename, updatedData);\n  }\n\n  deepMerge(target, source) {\n    const result = { ...target };\n\n    for (const key in source) {\n      if (source.hasOwnProperty(key)) {\n        if (\n          typeof source[key] === 'object' &&\n          source[key] !== null &&\n          !Array.isArray(source[key])\n        ) {\n          result[key] = this.deepMerge(result[key] || {}, source[key]);\n        } else {\n          result[key] = source[key];\n        }\n      }\n    }\n\n    return result;\n  }\n\n  async deleteData(filename) {\n    const filePath = path.join(this.dataDir, filename);\n    if (await fs.pathExists(filePath)) {\n      await fs.remove(filePath);\n      return true;\n    }\n    return false;\n  }\n}\n\n// バリデーション関数\nfunction validateEventData(eventData) {\n  const requiredFields = ['title', 'date', 'location'];\n  const missingFields = requiredFields.filter(field => !eventData[field]);\n\n  if (missingFields.length > 0) {\n    throw new Error(`Missing required fields: ${missingFields.join(', ')}`);\n  }\n\n  // 日付の検証\n  const eventDate = new Date(eventData.date);\n  if (isNaN(eventDate.getTime())) {\n    throw new Error('Invalid date format');\n  }\n\n  // 未来の日付かチェック\n  if (eventDate < new Date()) {\n    throw new Error('Event date must be in the future');\n  }\n\n  return true;\n}\n\n// レスポンスフォーマッター\nfunction formatApiResponse(data, message = 'Success', status = 200) {\n  return {\n    status,\n    message,\n    data,\n    timestamp: new Date().toISOString()\n  };\n}\n\nfunction formatErrorResponse(error, status = 500) {\n  return {\n    status,\n    message: error.message || 'Internal server error',\n    error: process.env.NODE_ENV === 'development' ? error.stack : undefined,\n    timestamp: new Date().toISOString()\n  };\n}\n\ndescribe('DataManager', () => {\n  let dataManager;\n  const testDataDir = path.join(process.cwd(), 'tests', 'data');\n\n  beforeEach(async () => {\n    dataManager = new DataManager(testDataDir);\n    await fs.ensureDir(testDataDir);\n  });\n\n  afterEach(async () => {\n    if (await fs.pathExists(testDataDir)) {\n      await fs.remove(testDataDir);\n    }\n  });\n\n  describe('loadData', () => {\n    it('should load existing JSON file', async () => {\n      const testData = { name: 'Test Event', participants: 10 };\n      const filename = 'test-event.json';\n\n      await fs.writeJson(path.join(testDataDir, filename), testData);\n\n      const loadedData = await dataManager.loadData(filename);\n      expect(loadedData).toEqual(testData);\n    });\n\n    it('should return null for non-existent file', async () => {\n      const loadedData = await dataManager.loadData('non-existent.json');\n      expect(loadedData).toBeNull();\n    });\n\n    it('should handle malformed JSON gracefully', async () => {\n      const filename = 'malformed.json';\n      await fs.writeFile(path.join(testDataDir, filename), '{ invalid json content');\n\n      await expect(dataManager.loadData(filename)).rejects.toThrow();\n    });\n  });\n\n  describe('saveData', () => {\n    it('should save data to JSON file', async () => {\n      const testData = { title: 'Lightning Talk', date: '2024-12-01' };\n      const filename = 'save-test.json';\n\n      const result = await dataManager.saveData(filename, testData);\n      expect(result).toBe(true);\n\n      const savedData = await fs.readJson(path.join(testDataDir, filename));\n      expect(savedData).toEqual(testData);\n    });\n\n    it('should create directory if not exists', async () => {\n      const testData = { test: true };\n      const filename = 'nested/deep/test.json';\n\n      const result = await dataManager.saveData(filename, testData);\n      expect(result).toBe(true);\n\n      const filePath = path.join(testDataDir, filename);\n      expect(await fs.pathExists(filePath)).toBe(true);\n    });\n\n    it('should overwrite existing file', async () => {\n      const filename = 'overwrite-test.json';\n      const originalData = { version: 1 };\n      const updatedData = { version: 2 };\n\n      await dataManager.saveData(filename, originalData);\n      await dataManager.saveData(filename, updatedData);\n\n      const finalData = await dataManager.loadData(filename);\n      expect(finalData).toEqual(updatedData);\n    });\n  });\n\n  describe('appendData', () => {\n    it('should append to array data', async () => {\n      const filename = 'append-array.json';\n      const initialData = [{ id: 1, name: 'First' }];\n      const newItem = { id: 2, name: 'Second' };\n\n      await dataManager.saveData(filename, initialData);\n      await dataManager.appendData(filename, newItem);\n\n      const result = await dataManager.loadData(filename);\n      expect(result).toHaveLength(2);\n      expect(result[1]).toEqual(newItem);\n    });\n\n    it('should merge object data', async () => {\n      const filename = 'append-object.json';\n      const initialData = { settings: { theme: 'dark' } };\n      const newData = { settings: { language: 'ja' } };\n\n      await dataManager.saveData(filename, initialData);\n      await dataManager.appendData(filename, newData);\n\n      const result = await dataManager.loadData(filename);\n      expect(result.settings).toEqual({ theme: 'dark', language: 'ja' });\n    });\n\n    it('should create new file if not exists', async () => {\n      const filename = 'new-append.json';\n      const newData = { id: 1, name: 'First Item' };\n\n      await dataManager.appendData(filename, newData);\n\n      const result = await dataManager.loadData(filename);\n      expect(result).toEqual([newData]);\n    });\n  });\n\n  describe('deleteData', () => {\n    it('should delete existing file', async () => {\n      const filename = 'delete-test.json';\n      await dataManager.saveData(filename, { test: true });\n\n      const result = await dataManager.deleteData(filename);\n      expect(result).toBe(true);\n\n      const filePath = path.join(testDataDir, filename);\n      expect(await fs.pathExists(filePath)).toBe(false);\n    });\n\n    it('should return false for non-existent file', async () => {\n      const result = await dataManager.deleteData('non-existent.json');\n      expect(result).toBe(false);\n    });\n  });\n});\n\ndescribe('validateEventData', () => {\n  // 未来の日付を動的に生成（現在から1ヶ月後）\n  const futureDate = new Date();\n  futureDate.setMonth(futureDate.getMonth() + 1);\n\n  const validEventData = {\n    title: 'Tech Lightning Talk',\n    date: futureDate.toISOString(),\n    location: 'Tokyo Conference Room',\n    description: 'Monthly tech sharing event'\n  };\n\n  it('should validate complete event data', () => {\n    expect(() => validateEventData(validEventData)).not.toThrow();\n    expect(validateEventData(validEventData)).toBe(true);\n  });\n\n  it('should reject event without title', () => {\n    const eventWithoutTitle = { ...validEventData };\n    delete eventWithoutTitle.title;\n\n    expect(() => validateEventData(eventWithoutTitle)).toThrow('Missing required fields: title');\n  });\n\n  it('should reject event without date', () => {\n    const eventWithoutDate = { ...validEventData };\n    delete eventWithoutDate.date;\n\n    expect(() => validateEventData(eventWithoutDate)).toThrow('Missing required fields: date');\n  });\n\n  it('should reject event without location', () => {\n    const eventWithoutLocation = { ...validEventData };\n    delete eventWithoutLocation.location;\n\n    expect(() => validateEventData(eventWithoutLocation)).toThrow(\n      'Missing required fields: location'\n    );\n  });\n\n  it('should reject event with invalid date', () => {\n    const eventWithInvalidDate = {\n      ...validEventData,\n      date: 'invalid-date-string'\n    };\n\n    expect(() => validateEventData(eventWithInvalidDate)).toThrow('Invalid date format');\n  });\n\n  it('should reject event with past date', () => {\n    // 過去の日付を動的に生成（現在から1日前）\n    const pastDate = new Date();\n    pastDate.setDate(pastDate.getDate() - 1);\n\n    const eventWithPastDate = {\n      ...validEventData,\n      date: pastDate.toISOString()\n    };\n\n    expect(() => validateEventData(eventWithPastDate)).toThrow('Event date must be in the future');\n  });\n\n  it('should reject missing multiple fields', () => {\n    const incompleteEvent = { description: 'Only description' };\n\n    expect(() => validateEventData(incompleteEvent)).toThrow(\n      'Missing required fields: title, date, location'\n    );\n  });\n});\n\ndescribe('API Response Formatters', () => {\n  describe('formatApiResponse', () => {\n    it('should format successful response with default values', () => {\n      const data = { id: 1, name: 'Test' };\n      const response = formatApiResponse(data);\n\n      expect(response).toMatchObject({\n        status: 200,\n        message: 'Success',\n        data,\n        timestamp: expect.any(String)\n      });\n    });\n\n    it('should format response with custom message and status', () => {\n      const data = { created: true };\n      const response = formatApiResponse(data, 'Created successfully', 201);\n\n      expect(response).toMatchObject({\n        status: 201,\n        message: 'Created successfully',\n        data\n      });\n    });\n\n    it('should include valid timestamp', () => {\n      const response = formatApiResponse({});\n      const timestamp = new Date(response.timestamp);\n\n      expect(timestamp.getTime()).not.toBeNaN();\n      expect(Date.now() - timestamp.getTime()).toBeLessThan(1000);\n    });\n  });\n\n  describe('formatErrorResponse', () => {\n    it('should format error response with default status', () => {\n      const error = new Error('Something went wrong');\n      const response = formatErrorResponse(error);\n\n      expect(response).toMatchObject({\n        status: 500,\n        message: 'Something went wrong',\n        timestamp: expect.any(String)\n      });\n    });\n\n    it('should format error response with custom status', () => {\n      const error = new Error('Not found');\n      const response = formatErrorResponse(error, 404);\n\n      expect(response.status).toBe(404);\n      expect(response.message).toBe('Not found');\n    });\n\n    it('should include stack trace in development mode', () => {\n      const originalEnv = process.env.NODE_ENV;\n      process.env.NODE_ENV = 'development';\n\n      const error = new Error('Test error');\n      const response = formatErrorResponse(error);\n\n      expect(response.error).toBeDefined();\n      expect(response.error).toContain('Error: Test error');\n\n      process.env.NODE_ENV = originalEnv;\n    });\n\n    it('should exclude stack trace in production mode', () => {\n      const originalEnv = process.env.NODE_ENV;\n      process.env.NODE_ENV = 'production';\n\n      const error = new Error('Test error');\n      const response = formatErrorResponse(error);\n\n      expect(response.error).toBeUndefined();\n\n      process.env.NODE_ENV = originalEnv;\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}