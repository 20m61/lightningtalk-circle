543eb16919e587e241c960150d34acd0
/**
 * サーバーユーティリティ関数のユニットテスト
 */

import { describe, it, expect, jest } from '@jest/globals';
import fs from 'fs-extra';
import path from 'path';

// テスト対象のユーティリティ関数（実装予定）
class DataManager {
  constructor(dataDir = './server/data') {
    this.dataDir = dataDir;
  }
  async loadData(filename) {
    const filePath = path.join(this.dataDir, filename);
    if (await fs.pathExists(filePath)) {
      return await fs.readJson(filePath);
    }
    return null;
  }
  async saveData(filename, data) {
    const filePath = path.join(this.dataDir, filename);
    await fs.ensureDir(path.dirname(filePath));
    await fs.writeJson(filePath, data, {
      spaces: 2
    });
    return true;
  }
  async appendData(filename, newData) {
    const existingData = (await this.loadData(filename)) || [];
    let updatedData;
    if (Array.isArray(existingData)) {
      updatedData = [...existingData, newData];
    } else {
      // オブジェクトの深いマージ
      updatedData = this.deepMerge(existingData, newData);
    }
    return await this.saveData(filename, updatedData);
  }
  deepMerge(target, source) {
    const result = {
      ...target
    };
    for (const key in source) {
      if (source.hasOwnProperty(key)) {
        if (typeof source[key] === 'object' && source[key] !== null && !Array.isArray(source[key])) {
          result[key] = this.deepMerge(result[key] || {}, source[key]);
        } else {
          result[key] = source[key];
        }
      }
    }
    return result;
  }
  async deleteData(filename) {
    const filePath = path.join(this.dataDir, filename);
    if (await fs.pathExists(filePath)) {
      await fs.remove(filePath);
      return true;
    }
    return false;
  }
}

// バリデーション関数
function validateEventData(eventData) {
  const requiredFields = ['title', 'date', 'location'];
  const missingFields = requiredFields.filter(field => !eventData[field]);
  if (missingFields.length > 0) {
    throw new Error(`Missing required fields: ${missingFields.join(', ')}`);
  }

  // 日付の検証
  const eventDate = new Date(eventData.date);
  if (isNaN(eventDate.getTime())) {
    throw new Error('Invalid date format');
  }

  // 未来の日付かチェック
  if (eventDate < new Date()) {
    throw new Error('Event date must be in the future');
  }
  return true;
}

// レスポンスフォーマッター
function formatApiResponse(data, message = 'Success', status = 200) {
  return {
    status,
    message,
    data,
    timestamp: new Date().toISOString()
  };
}
function formatErrorResponse(error, status = 500) {
  return {
    status,
    message: error.message || 'Internal server error',
    error: process.env.NODE_ENV === 'development' ? error.stack : undefined,
    timestamp: new Date().toISOString()
  };
}
describe('DataManager', () => {
  let dataManager;
  const testDataDir = path.join(process.cwd(), 'tests', 'data');
  beforeEach(async () => {
    dataManager = new DataManager(testDataDir);
    await fs.ensureDir(testDataDir);
  });
  afterEach(async () => {
    if (await fs.pathExists(testDataDir)) {
      await fs.remove(testDataDir);
    }
  });
  describe('loadData', () => {
    it('should load existing JSON file', async () => {
      const testData = {
        name: 'Test Event',
        participants: 10
      };
      const filename = 'test-event.json';
      await fs.writeJson(path.join(testDataDir, filename), testData);
      const loadedData = await dataManager.loadData(filename);
      expect(loadedData).toEqual(testData);
    });
    it('should return null for non-existent file', async () => {
      const loadedData = await dataManager.loadData('non-existent.json');
      expect(loadedData).toBeNull();
    });
    it('should handle malformed JSON gracefully', async () => {
      const filename = 'malformed.json';
      await fs.writeFile(path.join(testDataDir, filename), '{ invalid json content');
      await expect(dataManager.loadData(filename)).rejects.toThrow();
    });
  });
  describe('saveData', () => {
    it('should save data to JSON file', async () => {
      const testData = {
        title: 'Lightning Talk',
        date: '2024-12-01'
      };
      const filename = 'save-test.json';
      const result = await dataManager.saveData(filename, testData);
      expect(result).toBe(true);
      const savedData = await fs.readJson(path.join(testDataDir, filename));
      expect(savedData).toEqual(testData);
    });
    it('should create directory if not exists', async () => {
      const testData = {
        test: true
      };
      const filename = 'nested/deep/test.json';
      const result = await dataManager.saveData(filename, testData);
      expect(result).toBe(true);
      const filePath = path.join(testDataDir, filename);
      expect(await fs.pathExists(filePath)).toBe(true);
    });
    it('should overwrite existing file', async () => {
      const filename = 'overwrite-test.json';
      const originalData = {
        version: 1
      };
      const updatedData = {
        version: 2
      };
      await dataManager.saveData(filename, originalData);
      await dataManager.saveData(filename, updatedData);
      const finalData = await dataManager.loadData(filename);
      expect(finalData).toEqual(updatedData);
    });
  });
  describe('appendData', () => {
    it('should append to array data', async () => {
      const filename = 'append-array.json';
      const initialData = [{
        id: 1,
        name: 'First'
      }];
      const newItem = {
        id: 2,
        name: 'Second'
      };
      await dataManager.saveData(filename, initialData);
      await dataManager.appendData(filename, newItem);
      const result = await dataManager.loadData(filename);
      expect(result).toHaveLength(2);
      expect(result[1]).toEqual(newItem);
    });
    it('should merge object data', async () => {
      const filename = 'append-object.json';
      const initialData = {
        settings: {
          theme: 'dark'
        }
      };
      const newData = {
        settings: {
          language: 'ja'
        }
      };
      await dataManager.saveData(filename, initialData);
      await dataManager.appendData(filename, newData);
      const result = await dataManager.loadData(filename);
      expect(result.settings).toEqual({
        theme: 'dark',
        language: 'ja'
      });
    });
    it('should create new file if not exists', async () => {
      const filename = 'new-append.json';
      const newData = {
        id: 1,
        name: 'First Item'
      };
      await dataManager.appendData(filename, newData);
      const result = await dataManager.loadData(filename);
      expect(result).toEqual([newData]);
    });
  });
  describe('deleteData', () => {
    it('should delete existing file', async () => {
      const filename = 'delete-test.json';
      await dataManager.saveData(filename, {
        test: true
      });
      const result = await dataManager.deleteData(filename);
      expect(result).toBe(true);
      const filePath = path.join(testDataDir, filename);
      expect(await fs.pathExists(filePath)).toBe(false);
    });
    it('should return false for non-existent file', async () => {
      const result = await dataManager.deleteData('non-existent.json');
      expect(result).toBe(false);
    });
  });
});
describe('validateEventData', () => {
  // 未来の日付を動的に生成（現在から1ヶ月後）
  const futureDate = new Date();
  futureDate.setMonth(futureDate.getMonth() + 1);
  const validEventData = {
    title: 'Tech Lightning Talk',
    date: futureDate.toISOString(),
    location: 'Tokyo Conference Room',
    description: 'Monthly tech sharing event'
  };
  it('should validate complete event data', () => {
    expect(() => validateEventData(validEventData)).not.toThrow();
    expect(validateEventData(validEventData)).toBe(true);
  });
  it('should reject event without title', () => {
    const eventWithoutTitle = {
      ...validEventData
    };
    delete eventWithoutTitle.title;
    expect(() => validateEventData(eventWithoutTitle)).toThrow('Missing required fields: title');
  });
  it('should reject event without date', () => {
    const eventWithoutDate = {
      ...validEventData
    };
    delete eventWithoutDate.date;
    expect(() => validateEventData(eventWithoutDate)).toThrow('Missing required fields: date');
  });
  it('should reject event without location', () => {
    const eventWithoutLocation = {
      ...validEventData
    };
    delete eventWithoutLocation.location;
    expect(() => validateEventData(eventWithoutLocation)).toThrow('Missing required fields: location');
  });
  it('should reject event with invalid date', () => {
    const eventWithInvalidDate = {
      ...validEventData,
      date: 'invalid-date-string'
    };
    expect(() => validateEventData(eventWithInvalidDate)).toThrow('Invalid date format');
  });
  it('should reject event with past date', () => {
    // 過去の日付を動的に生成（現在から1日前）
    const pastDate = new Date();
    pastDate.setDate(pastDate.getDate() - 1);
    const eventWithPastDate = {
      ...validEventData,
      date: pastDate.toISOString()
    };
    expect(() => validateEventData(eventWithPastDate)).toThrow('Event date must be in the future');
  });
  it('should reject missing multiple fields', () => {
    const incompleteEvent = {
      description: 'Only description'
    };
    expect(() => validateEventData(incompleteEvent)).toThrow('Missing required fields: title, date, location');
  });
});
describe('API Response Formatters', () => {
  describe('formatApiResponse', () => {
    it('should format successful response with default values', () => {
      const data = {
        id: 1,
        name: 'Test'
      };
      const response = formatApiResponse(data);
      expect(response).toMatchObject({
        status: 200,
        message: 'Success',
        data,
        timestamp: expect.any(String)
      });
    });
    it('should format response with custom message and status', () => {
      const data = {
        created: true
      };
      const response = formatApiResponse(data, 'Created successfully', 201);
      expect(response).toMatchObject({
        status: 201,
        message: 'Created successfully',
        data
      });
    });
    it('should include valid timestamp', () => {
      const response = formatApiResponse({});
      const timestamp = new Date(response.timestamp);
      expect(timestamp.getTime()).not.toBeNaN();
      expect(Date.now() - timestamp.getTime()).toBeLessThan(1000);
    });
  });
  describe('formatErrorResponse', () => {
    it('should format error response with default status', () => {
      const error = new Error('Something went wrong');
      const response = formatErrorResponse(error);
      expect(response).toMatchObject({
        status: 500,
        message: 'Something went wrong',
        timestamp: expect.any(String)
      });
    });
    it('should format error response with custom status', () => {
      const error = new Error('Not found');
      const response = formatErrorResponse(error, 404);
      expect(response.status).toBe(404);
      expect(response.message).toBe('Not found');
    });
    it('should include stack trace in development mode', () => {
      const originalEnv = process.env.NODE_ENV;
      process.env.NODE_ENV = 'development';
      const error = new Error('Test error');
      const response = formatErrorResponse(error);
      expect(response.error).toBeDefined();
      expect(response.error).toContain('Error: Test error');
      process.env.NODE_ENV = originalEnv;
    });
    it('should exclude stack trace in production mode', () => {
      const originalEnv = process.env.NODE_ENV;
      process.env.NODE_ENV = 'production';
      const error = new Error('Test error');
      const response = formatErrorResponse(error);
      expect(response.error).toBeUndefined();
      process.env.NODE_ENV = originalEnv;
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwiamVzdCIsImZzIiwicGF0aCIsIkRhdGFNYW5hZ2VyIiwiY29uc3RydWN0b3IiLCJkYXRhRGlyIiwibG9hZERhdGEiLCJmaWxlbmFtZSIsImZpbGVQYXRoIiwiam9pbiIsInBhdGhFeGlzdHMiLCJyZWFkSnNvbiIsInNhdmVEYXRhIiwiZGF0YSIsImVuc3VyZURpciIsImRpcm5hbWUiLCJ3cml0ZUpzb24iLCJzcGFjZXMiLCJhcHBlbmREYXRhIiwibmV3RGF0YSIsImV4aXN0aW5nRGF0YSIsInVwZGF0ZWREYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiZGVlcE1lcmdlIiwidGFyZ2V0Iiwic291cmNlIiwicmVzdWx0Iiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJkZWxldGVEYXRhIiwicmVtb3ZlIiwidmFsaWRhdGVFdmVudERhdGEiLCJldmVudERhdGEiLCJyZXF1aXJlZEZpZWxkcyIsIm1pc3NpbmdGaWVsZHMiLCJmaWx0ZXIiLCJmaWVsZCIsImxlbmd0aCIsIkVycm9yIiwiZXZlbnREYXRlIiwiRGF0ZSIsImRhdGUiLCJpc05hTiIsImdldFRpbWUiLCJmb3JtYXRBcGlSZXNwb25zZSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImZvcm1hdEVycm9yUmVzcG9uc2UiLCJlcnJvciIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInN0YWNrIiwidW5kZWZpbmVkIiwiZGF0YU1hbmFnZXIiLCJ0ZXN0RGF0YURpciIsImN3ZCIsImJlZm9yZUVhY2giLCJhZnRlckVhY2giLCJ0ZXN0RGF0YSIsIm5hbWUiLCJwYXJ0aWNpcGFudHMiLCJsb2FkZWREYXRhIiwidG9FcXVhbCIsInRvQmVOdWxsIiwid3JpdGVGaWxlIiwicmVqZWN0cyIsInRvVGhyb3ciLCJ0aXRsZSIsInRvQmUiLCJzYXZlZERhdGEiLCJ0ZXN0Iiwib3JpZ2luYWxEYXRhIiwidmVyc2lvbiIsImZpbmFsRGF0YSIsImluaXRpYWxEYXRhIiwiaWQiLCJuZXdJdGVtIiwidG9IYXZlTGVuZ3RoIiwic2V0dGluZ3MiLCJ0aGVtZSIsImxhbmd1YWdlIiwiZnV0dXJlRGF0ZSIsInNldE1vbnRoIiwiZ2V0TW9udGgiLCJ2YWxpZEV2ZW50RGF0YSIsImxvY2F0aW9uIiwiZGVzY3JpcHRpb24iLCJub3QiLCJldmVudFdpdGhvdXRUaXRsZSIsImV2ZW50V2l0aG91dERhdGUiLCJldmVudFdpdGhvdXRMb2NhdGlvbiIsImV2ZW50V2l0aEludmFsaWREYXRlIiwicGFzdERhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImV2ZW50V2l0aFBhc3REYXRlIiwiaW5jb21wbGV0ZUV2ZW50IiwicmVzcG9uc2UiLCJ0b01hdGNoT2JqZWN0IiwiYW55IiwiU3RyaW5nIiwiY3JlYXRlZCIsInRvQmVOYU4iLCJub3ciLCJ0b0JlTGVzc1RoYW4iLCJvcmlnaW5hbEVudiIsInRvQmVEZWZpbmVkIiwidG9Db250YWluIiwidG9CZVVuZGVmaW5lZCJdLCJzb3VyY2VzIjpbInNlcnZlci11dGlscy50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog44K144O844OQ44O844Om44O844OG44Kj44Oq44OG44Kj6Zai5pWw44Gu44Om44OL44OD44OI44OG44K544OIXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCBmcyBmcm9tICdmcy1leHRyYSc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuLy8g44OG44K544OI5a++6LGh44Gu44Om44O844OG44Kj44Oq44OG44Kj6Zai5pWw77yI5a6f6KOF5LqI5a6a77yJXG5jbGFzcyBEYXRhTWFuYWdlciB7XG4gIGNvbnN0cnVjdG9yKGRhdGFEaXIgPSAnLi9zZXJ2ZXIvZGF0YScpIHtcbiAgICB0aGlzLmRhdGFEaXIgPSBkYXRhRGlyO1xuICB9XG5cbiAgYXN5bmMgbG9hZERhdGEoZmlsZW5hbWUpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0aGlzLmRhdGFEaXIsIGZpbGVuYW1lKTtcbiAgICBpZiAoYXdhaXQgZnMucGF0aEV4aXN0cyhmaWxlUGF0aCkpIHtcbiAgICAgIHJldHVybiBhd2FpdCBmcy5yZWFkSnNvbihmaWxlUGF0aCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgYXN5bmMgc2F2ZURhdGEoZmlsZW5hbWUsIGRhdGEpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0aGlzLmRhdGFEaXIsIGZpbGVuYW1lKTtcbiAgICBhd2FpdCBmcy5lbnN1cmVEaXIocGF0aC5kaXJuYW1lKGZpbGVQYXRoKSk7XG4gICAgYXdhaXQgZnMud3JpdGVKc29uKGZpbGVQYXRoLCBkYXRhLCB7IHNwYWNlczogMiB9KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGFzeW5jIGFwcGVuZERhdGEoZmlsZW5hbWUsIG5ld0RhdGEpIHtcbiAgICBjb25zdCBleGlzdGluZ0RhdGEgPSAoYXdhaXQgdGhpcy5sb2FkRGF0YShmaWxlbmFtZSkpIHx8IFtdO1xuICAgIGxldCB1cGRhdGVkRGF0YTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGV4aXN0aW5nRGF0YSkpIHtcbiAgICAgIHVwZGF0ZWREYXRhID0gWy4uLmV4aXN0aW5nRGF0YSwgbmV3RGF0YV07XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIOOCquODluOCuOOCp+OCr+ODiOOBrua3seOBhOODnuODvOOCuFxuICAgICAgdXBkYXRlZERhdGEgPSB0aGlzLmRlZXBNZXJnZShleGlzdGluZ0RhdGEsIG5ld0RhdGEpO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnNhdmVEYXRhKGZpbGVuYW1lLCB1cGRhdGVkRGF0YSk7XG4gIH1cblxuICBkZWVwTWVyZ2UodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBjb25zdCByZXN1bHQgPSB7IC4uLnRhcmdldCB9O1xuXG4gICAgZm9yIChjb25zdCBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBzb3VyY2Vba2V5XSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICBzb3VyY2Vba2V5XSAhPT0gbnVsbCAmJlxuICAgICAgICAgICFBcnJheS5pc0FycmF5KHNvdXJjZVtrZXldKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXN1bHRba2V5XSA9IHRoaXMuZGVlcE1lcmdlKHJlc3VsdFtrZXldIHx8IHt9LCBzb3VyY2Vba2V5XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBhc3luYyBkZWxldGVEYXRhKGZpbGVuYW1lKSB7XG4gICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odGhpcy5kYXRhRGlyLCBmaWxlbmFtZSk7XG4gICAgaWYgKGF3YWl0IGZzLnBhdGhFeGlzdHMoZmlsZVBhdGgpKSB7XG4gICAgICBhd2FpdCBmcy5yZW1vdmUoZmlsZVBhdGgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyDjg5Djg6rjg4fjg7zjgrfjg6fjg7PplqLmlbBcbmZ1bmN0aW9uIHZhbGlkYXRlRXZlbnREYXRhKGV2ZW50RGF0YSkge1xuICBjb25zdCByZXF1aXJlZEZpZWxkcyA9IFsndGl0bGUnLCAnZGF0ZScsICdsb2NhdGlvbiddO1xuICBjb25zdCBtaXNzaW5nRmllbGRzID0gcmVxdWlyZWRGaWVsZHMuZmlsdGVyKGZpZWxkID0+ICFldmVudERhdGFbZmllbGRdKTtcblxuICBpZiAobWlzc2luZ0ZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogJHttaXNzaW5nRmllbGRzLmpvaW4oJywgJyl9YCk7XG4gIH1cblxuICAvLyDml6Xku5jjga7mpJzoqLxcbiAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnREYXRhLmRhdGUpO1xuICBpZiAoaXNOYU4oZXZlbnREYXRlLmdldFRpbWUoKSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZGF0ZSBmb3JtYXQnKTtcbiAgfVxuXG4gIC8vIOacquadpeOBruaXpeS7mOOBi+ODgeOCp+ODg+OCr1xuICBpZiAoZXZlbnREYXRlIDwgbmV3IERhdGUoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgZGF0ZSBtdXN0IGJlIGluIHRoZSBmdXR1cmUnKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyDjg6zjgrnjg53jg7Pjgrnjg5Xjgqnjg7zjg57jg4Pjgr/jg7xcbmZ1bmN0aW9uIGZvcm1hdEFwaVJlc3BvbnNlKGRhdGEsIG1lc3NhZ2UgPSAnU3VjY2VzcycsIHN0YXR1cyA9IDIwMCkge1xuICByZXR1cm4ge1xuICAgIHN0YXR1cyxcbiAgICBtZXNzYWdlLFxuICAgIGRhdGEsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvciwgc3RhdHVzID0gNTAwKSB7XG4gIHJldHVybiB7XG4gICAgc3RhdHVzLFxuICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfHwgJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXG4gICAgZXJyb3I6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWQsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfTtcbn1cblxuZGVzY3JpYmUoJ0RhdGFNYW5hZ2VyJywgKCkgPT4ge1xuICBsZXQgZGF0YU1hbmFnZXI7XG4gIGNvbnN0IHRlc3REYXRhRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICd0ZXN0cycsICdkYXRhJyk7XG5cbiAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgZGF0YU1hbmFnZXIgPSBuZXcgRGF0YU1hbmFnZXIodGVzdERhdGFEaXIpO1xuICAgIGF3YWl0IGZzLmVuc3VyZURpcih0ZXN0RGF0YURpcik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgaWYgKGF3YWl0IGZzLnBhdGhFeGlzdHModGVzdERhdGFEaXIpKSB7XG4gICAgICBhd2FpdCBmcy5yZW1vdmUodGVzdERhdGFEaXIpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2xvYWREYXRhJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbG9hZCBleGlzdGluZyBKU09OIGZpbGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0ZXN0RGF0YSA9IHsgbmFtZTogJ1Rlc3QgRXZlbnQnLCBwYXJ0aWNpcGFudHM6IDEwIH07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9ICd0ZXN0LWV2ZW50Lmpzb24nO1xuXG4gICAgICBhd2FpdCBmcy53cml0ZUpzb24ocGF0aC5qb2luKHRlc3REYXRhRGlyLCBmaWxlbmFtZSksIHRlc3REYXRhKTtcblxuICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChsb2FkZWREYXRhKS50b0VxdWFsKHRlc3REYXRhKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgZm9yIG5vbi1leGlzdGVudCBmaWxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbG9hZGVkRGF0YSA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKCdub24tZXhpc3RlbnQuanNvbicpO1xuICAgICAgZXhwZWN0KGxvYWRlZERhdGEpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgSlNPTiBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSAnbWFsZm9ybWVkLmpzb24nO1xuICAgICAgYXdhaXQgZnMud3JpdGVGaWxlKHBhdGguam9pbih0ZXN0RGF0YURpciwgZmlsZW5hbWUpLCAneyBpbnZhbGlkIGpzb24gY29udGVudCcpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGF0YU1hbmFnZXIubG9hZERhdGEoZmlsZW5hbWUpKS5yZWplY3RzLnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3NhdmVEYXRhJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2F2ZSBkYXRhIHRvIEpTT04gZmlsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0geyB0aXRsZTogJ0xpZ2h0bmluZyBUYWxrJywgZGF0ZTogJzIwMjQtMTItMDEnIH07XG4gICAgICBjb25zdCBmaWxlbmFtZSA9ICdzYXZlLXRlc3QuanNvbic7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNYW5hZ2VyLnNhdmVEYXRhKGZpbGVuYW1lLCB0ZXN0RGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuXG4gICAgICBjb25zdCBzYXZlZERhdGEgPSBhd2FpdCBmcy5yZWFkSnNvbihwYXRoLmpvaW4odGVzdERhdGFEaXIsIGZpbGVuYW1lKSk7XG4gICAgICBleHBlY3Qoc2F2ZWREYXRhKS50b0VxdWFsKHRlc3REYXRhKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgY3JlYXRlIGRpcmVjdG9yeSBpZiBub3QgZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdERhdGEgPSB7IHRlc3Q6IHRydWUgfTtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gJ25lc3RlZC9kZWVwL3Rlc3QuanNvbic7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNYW5hZ2VyLnNhdmVEYXRhKGZpbGVuYW1lLCB0ZXN0RGF0YSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuXG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0ZXN0RGF0YURpciwgZmlsZW5hbWUpO1xuICAgICAgZXhwZWN0KGF3YWl0IGZzLnBhdGhFeGlzdHMoZmlsZVBhdGgpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBvdmVyd3JpdGUgZXhpc3RpbmcgZmlsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gJ292ZXJ3cml0ZS10ZXN0Lmpzb24nO1xuICAgICAgY29uc3Qgb3JpZ2luYWxEYXRhID0geyB2ZXJzaW9uOiAxIH07XG4gICAgICBjb25zdCB1cGRhdGVkRGF0YSA9IHsgdmVyc2lvbjogMiB9O1xuXG4gICAgICBhd2FpdCBkYXRhTWFuYWdlci5zYXZlRGF0YShmaWxlbmFtZSwgb3JpZ2luYWxEYXRhKTtcbiAgICAgIGF3YWl0IGRhdGFNYW5hZ2VyLnNhdmVEYXRhKGZpbGVuYW1lLCB1cGRhdGVkRGF0YSk7XG5cbiAgICAgIGNvbnN0IGZpbmFsRGF0YSA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChmaW5hbERhdGEpLnRvRXF1YWwodXBkYXRlZERhdGEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnYXBwZW5kRGF0YScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGFwcGVuZCB0byBhcnJheSBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSAnYXBwZW5kLWFycmF5Lmpzb24nO1xuICAgICAgY29uc3QgaW5pdGlhbERhdGEgPSBbeyBpZDogMSwgbmFtZTogJ0ZpcnN0JyB9XTtcbiAgICAgIGNvbnN0IG5ld0l0ZW0gPSB7IGlkOiAyLCBuYW1lOiAnU2Vjb25kJyB9O1xuXG4gICAgICBhd2FpdCBkYXRhTWFuYWdlci5zYXZlRGF0YShmaWxlbmFtZSwgaW5pdGlhbERhdGEpO1xuICAgICAgYXdhaXQgZGF0YU1hbmFnZXIuYXBwZW5kRGF0YShmaWxlbmFtZSwgbmV3SXRlbSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMV0pLnRvRXF1YWwobmV3SXRlbSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIG1lcmdlIG9iamVjdCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSAnYXBwZW5kLW9iamVjdC5qc29uJztcbiAgICAgIGNvbnN0IGluaXRpYWxEYXRhID0geyBzZXR0aW5nczogeyB0aGVtZTogJ2RhcmsnIH0gfTtcbiAgICAgIGNvbnN0IG5ld0RhdGEgPSB7IHNldHRpbmdzOiB7IGxhbmd1YWdlOiAnamEnIH0gfTtcblxuICAgICAgYXdhaXQgZGF0YU1hbmFnZXIuc2F2ZURhdGEoZmlsZW5hbWUsIGluaXRpYWxEYXRhKTtcbiAgICAgIGF3YWl0IGRhdGFNYW5hZ2VyLmFwcGVuZERhdGEoZmlsZW5hbWUsIG5ld0RhdGEpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhTWFuYWdlci5sb2FkRGF0YShmaWxlbmFtZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnNldHRpbmdzKS50b0VxdWFsKHsgdGhlbWU6ICdkYXJrJywgbGFuZ3VhZ2U6ICdqYScgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBuZXcgZmlsZSBpZiBub3QgZXhpc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSAnbmV3LWFwcGVuZC5qc29uJztcbiAgICAgIGNvbnN0IG5ld0RhdGEgPSB7IGlkOiAxLCBuYW1lOiAnRmlyc3QgSXRlbScgfTtcblxuICAgICAgYXdhaXQgZGF0YU1hbmFnZXIuYXBwZW5kRGF0YShmaWxlbmFtZSwgbmV3RGF0YSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNYW5hZ2VyLmxvYWREYXRhKGZpbGVuYW1lKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW25ld0RhdGFdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2RlbGV0ZURhdGEnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZWxldGUgZXhpc3RpbmcgZmlsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gJ2RlbGV0ZS10ZXN0Lmpzb24nO1xuICAgICAgYXdhaXQgZGF0YU1hbmFnZXIuc2F2ZURhdGEoZmlsZW5hbWUsIHsgdGVzdDogdHJ1ZSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YU1hbmFnZXIuZGVsZXRlRGF0YShmaWxlbmFtZSk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpO1xuXG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbih0ZXN0RGF0YURpciwgZmlsZW5hbWUpO1xuICAgICAgZXhwZWN0KGF3YWl0IGZzLnBhdGhFeGlzdHMoZmlsZVBhdGgpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBub24tZXhpc3RlbnQgZmlsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFNYW5hZ2VyLmRlbGV0ZURhdGEoJ25vbi1leGlzdGVudC5qc29uJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ3ZhbGlkYXRlRXZlbnREYXRhJywgKCkgPT4ge1xuICAvLyDmnKrmnaXjga7ml6Xku5jjgpLli5XnmoTjgavnlJ/miJDvvIjnj77lnKjjgYvjgokx44O25pyI5b6M77yJXG4gIGNvbnN0IGZ1dHVyZURhdGUgPSBuZXcgRGF0ZSgpO1xuICBmdXR1cmVEYXRlLnNldE1vbnRoKGZ1dHVyZURhdGUuZ2V0TW9udGgoKSArIDEpO1xuXG4gIGNvbnN0IHZhbGlkRXZlbnREYXRhID0ge1xuICAgIHRpdGxlOiAnVGVjaCBMaWdodG5pbmcgVGFsaycsXG4gICAgZGF0ZTogZnV0dXJlRGF0ZS50b0lTT1N0cmluZygpLFxuICAgIGxvY2F0aW9uOiAnVG9reW8gQ29uZmVyZW5jZSBSb29tJyxcbiAgICBkZXNjcmlwdGlvbjogJ01vbnRobHkgdGVjaCBzaGFyaW5nIGV2ZW50J1xuICB9O1xuXG4gIGl0KCdzaG91bGQgdmFsaWRhdGUgY29tcGxldGUgZXZlbnQgZGF0YScsICgpID0+IHtcbiAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVFdmVudERhdGEodmFsaWRFdmVudERhdGEpKS5ub3QudG9UaHJvdygpO1xuICAgIGV4cGVjdCh2YWxpZGF0ZUV2ZW50RGF0YSh2YWxpZEV2ZW50RGF0YSkpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGhvdXQgdGl0bGUnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRXaXRob3V0VGl0bGUgPSB7IC4uLnZhbGlkRXZlbnREYXRhIH07XG4gICAgZGVsZXRlIGV2ZW50V2l0aG91dFRpdGxlLnRpdGxlO1xuXG4gICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRXZlbnREYXRhKGV2ZW50V2l0aG91dFRpdGxlKSkudG9UaHJvdygnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHRpdGxlJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGhvdXQgZGF0ZScsICgpID0+IHtcbiAgICBjb25zdCBldmVudFdpdGhvdXREYXRlID0geyAuLi52YWxpZEV2ZW50RGF0YSB9O1xuICAgIGRlbGV0ZSBldmVudFdpdGhvdXREYXRlLmRhdGU7XG5cbiAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVFdmVudERhdGEoZXZlbnRXaXRob3V0RGF0ZSkpLnRvVGhyb3coJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzOiBkYXRlJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGhvdXQgbG9jYXRpb24nLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRXaXRob3V0TG9jYXRpb24gPSB7IC4uLnZhbGlkRXZlbnREYXRhIH07XG4gICAgZGVsZXRlIGV2ZW50V2l0aG91dExvY2F0aW9uLmxvY2F0aW9uO1xuXG4gICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRXZlbnREYXRhKGV2ZW50V2l0aG91dExvY2F0aW9uKSkudG9UaHJvdyhcbiAgICAgICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkczogbG9jYXRpb24nXG4gICAgKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCByZWplY3QgZXZlbnQgd2l0aCBpbnZhbGlkIGRhdGUnLCAoKSA9PiB7XG4gICAgY29uc3QgZXZlbnRXaXRoSW52YWxpZERhdGUgPSB7XG4gICAgICAuLi52YWxpZEV2ZW50RGF0YSxcbiAgICAgIGRhdGU6ICdpbnZhbGlkLWRhdGUtc3RyaW5nJ1xuICAgIH07XG5cbiAgICBleHBlY3QoKCkgPT4gdmFsaWRhdGVFdmVudERhdGEoZXZlbnRXaXRoSW52YWxpZERhdGUpKS50b1Rocm93KCdJbnZhbGlkIGRhdGUgZm9ybWF0Jyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IGV2ZW50IHdpdGggcGFzdCBkYXRlJywgKCkgPT4ge1xuICAgIC8vIOmBjuWOu+OBruaXpeS7mOOCkuWLleeahOOBq+eUn+aIkO+8iOePvuWcqOOBi+OCiTHml6XliY3vvIlcbiAgICBjb25zdCBwYXN0RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgcGFzdERhdGUuc2V0RGF0ZShwYXN0RGF0ZS5nZXREYXRlKCkgLSAxKTtcblxuICAgIGNvbnN0IGV2ZW50V2l0aFBhc3REYXRlID0ge1xuICAgICAgLi4udmFsaWRFdmVudERhdGEsXG4gICAgICBkYXRlOiBwYXN0RGF0ZS50b0lTT1N0cmluZygpXG4gICAgfTtcblxuICAgIGV4cGVjdCgoKSA9PiB2YWxpZGF0ZUV2ZW50RGF0YShldmVudFdpdGhQYXN0RGF0ZSkpLnRvVGhyb3coJ0V2ZW50IGRhdGUgbXVzdCBiZSBpbiB0aGUgZnV0dXJlJyk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgcmVqZWN0IG1pc3NpbmcgbXVsdGlwbGUgZmllbGRzJywgKCkgPT4ge1xuICAgIGNvbnN0IGluY29tcGxldGVFdmVudCA9IHsgZGVzY3JpcHRpb246ICdPbmx5IGRlc2NyaXB0aW9uJyB9O1xuXG4gICAgZXhwZWN0KCgpID0+IHZhbGlkYXRlRXZlbnREYXRhKGluY29tcGxldGVFdmVudCkpLnRvVGhyb3coXG4gICAgICAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IHRpdGxlLCBkYXRlLCBsb2NhdGlvbidcbiAgICApO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQVBJIFJlc3BvbnNlIEZvcm1hdHRlcnMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdmb3JtYXRBcGlSZXNwb25zZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGZvcm1hdCBzdWNjZXNzZnVsIHJlc3BvbnNlIHdpdGggZGVmYXVsdCB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyBpZDogMSwgbmFtZTogJ1Rlc3QnIH07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEFwaVJlc3BvbnNlKGRhdGEpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3MnLFxuICAgICAgICBkYXRhLFxuICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZvcm1hdCByZXNwb25zZSB3aXRoIGN1c3RvbSBtZXNzYWdlIGFuZCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0geyBjcmVhdGVkOiB0cnVlIH07XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEFwaVJlc3BvbnNlKGRhdGEsICdDcmVhdGVkIHN1Y2Nlc3NmdWxseScsIDIwMSk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICBtZXNzYWdlOiAnQ3JlYXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSB2YWxpZCB0aW1lc3RhbXAnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEFwaVJlc3BvbnNlKHt9KTtcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKHJlc3BvbnNlLnRpbWVzdGFtcCk7XG5cbiAgICAgIGV4cGVjdCh0aW1lc3RhbXAuZ2V0VGltZSgpKS5ub3QudG9CZU5hTigpO1xuICAgICAgZXhwZWN0KERhdGUubm93KCkgLSB0aW1lc3RhbXAuZ2V0VGltZSgpKS50b0JlTGVzc1RoYW4oMTAwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmb3JtYXRFcnJvclJlc3BvbnNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZm9ybWF0IGVycm9yIHJlc3BvbnNlIHdpdGggZGVmYXVsdCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcnKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcik7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICBtZXNzYWdlOiAnU29tZXRoaW5nIHdlbnQgd3JvbmcnLFxuICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGZvcm1hdCBlcnJvciByZXNwb25zZSB3aXRoIGN1c3RvbSBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignTm90IGZvdW5kJyk7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGZvcm1hdEVycm9yUmVzcG9uc2UoZXJyb3IsIDQwNCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoNDA0KTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5tZXNzYWdlKS50b0JlKCdOb3QgZm91bmQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5jbHVkZSBzdGFjayB0cmFjZSBpbiBkZXZlbG9wbWVudCBtb2RlJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gJ2RldmVsb3BtZW50JztcblxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcik7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9Db250YWluKCdFcnJvcjogVGVzdCBlcnJvcicpO1xuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG9yaWdpbmFsRW52O1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleGNsdWRlIHN0YWNrIHRyYWNlIGluIHByb2R1Y3Rpb24gbW9kZScsICgpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRW52ID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICdwcm9kdWN0aW9uJztcblxuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gZm9ybWF0RXJyb3JSZXNwb25zZShlcnJvcik7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5lcnJvcikudG9CZVVuZGVmaW5lZCgpO1xuXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG9yaWdpbmFsRW52O1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7O0FBRUEsU0FBU0EsUUFBUSxFQUFFQyxFQUFFLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxRQUFRLGVBQWU7QUFDMUQsT0FBT0MsRUFBRSxNQUFNLFVBQVU7QUFDekIsT0FBT0MsSUFBSSxNQUFNLE1BQU07O0FBRXZCO0FBQ0EsTUFBTUMsV0FBVyxDQUFDO0VBQ2hCQyxXQUFXQSxDQUFDQyxPQUFPLEdBQUcsZUFBZSxFQUFFO0lBQ3JDLElBQUksQ0FBQ0EsT0FBTyxHQUFHQSxPQUFPO0VBQ3hCO0VBRUEsTUFBTUMsUUFBUUEsQ0FBQ0MsUUFBUSxFQUFFO0lBQ3ZCLE1BQU1DLFFBQVEsR0FBR04sSUFBSSxDQUFDTyxJQUFJLENBQUMsSUFBSSxDQUFDSixPQUFPLEVBQUVFLFFBQVEsQ0FBQztJQUNsRCxJQUFJLE1BQU1OLEVBQUUsQ0FBQ1MsVUFBVSxDQUFDRixRQUFRLENBQUMsRUFBRTtNQUNqQyxPQUFPLE1BQU1QLEVBQUUsQ0FBQ1UsUUFBUSxDQUFDSCxRQUFRLENBQUM7SUFDcEM7SUFDQSxPQUFPLElBQUk7RUFDYjtFQUVBLE1BQU1JLFFBQVFBLENBQUNMLFFBQVEsRUFBRU0sSUFBSSxFQUFFO0lBQzdCLE1BQU1MLFFBQVEsR0FBR04sSUFBSSxDQUFDTyxJQUFJLENBQUMsSUFBSSxDQUFDSixPQUFPLEVBQUVFLFFBQVEsQ0FBQztJQUNsRCxNQUFNTixFQUFFLENBQUNhLFNBQVMsQ0FBQ1osSUFBSSxDQUFDYSxPQUFPLENBQUNQLFFBQVEsQ0FBQyxDQUFDO0lBQzFDLE1BQU1QLEVBQUUsQ0FBQ2UsU0FBUyxDQUFDUixRQUFRLEVBQUVLLElBQUksRUFBRTtNQUFFSSxNQUFNLEVBQUU7SUFBRSxDQUFDLENBQUM7SUFDakQsT0FBTyxJQUFJO0VBQ2I7RUFFQSxNQUFNQyxVQUFVQSxDQUFDWCxRQUFRLEVBQUVZLE9BQU8sRUFBRTtJQUNsQyxNQUFNQyxZQUFZLEdBQUcsQ0FBQyxNQUFNLElBQUksQ0FBQ2QsUUFBUSxDQUFDQyxRQUFRLENBQUMsS0FBSyxFQUFFO0lBQzFELElBQUljLFdBQVc7SUFFZixJQUFJQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0gsWUFBWSxDQUFDLEVBQUU7TUFDL0JDLFdBQVcsR0FBRyxDQUFDLEdBQUdELFlBQVksRUFBRUQsT0FBTyxDQUFDO0lBQzFDLENBQUMsTUFBTTtNQUNMO01BQ0FFLFdBQVcsR0FBRyxJQUFJLENBQUNHLFNBQVMsQ0FBQ0osWUFBWSxFQUFFRCxPQUFPLENBQUM7SUFDckQ7SUFFQSxPQUFPLE1BQU0sSUFBSSxDQUFDUCxRQUFRLENBQUNMLFFBQVEsRUFBRWMsV0FBVyxDQUFDO0VBQ25EO0VBRUFHLFNBQVNBLENBQUNDLE1BQU0sRUFBRUMsTUFBTSxFQUFFO0lBQ3hCLE1BQU1DLE1BQU0sR0FBRztNQUFFLEdBQUdGO0lBQU8sQ0FBQztJQUU1QixLQUFLLE1BQU1HLEdBQUcsSUFBSUYsTUFBTSxFQUFFO01BQ3hCLElBQUlBLE1BQU0sQ0FBQ0csY0FBYyxDQUFDRCxHQUFHLENBQUMsRUFBRTtRQUM5QixJQUNFLE9BQU9GLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLEtBQUssUUFBUSxJQUMvQkYsTUFBTSxDQUFDRSxHQUFHLENBQUMsS0FBSyxJQUFJLElBQ3BCLENBQUNOLEtBQUssQ0FBQ0MsT0FBTyxDQUFDRyxNQUFNLENBQUNFLEdBQUcsQ0FBQyxDQUFDLEVBQzNCO1VBQ0FELE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDSixTQUFTLENBQUNHLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUVGLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDLENBQUM7UUFDOUQsQ0FBQyxNQUFNO1VBQ0xELE1BQU0sQ0FBQ0MsR0FBRyxDQUFDLEdBQUdGLE1BQU0sQ0FBQ0UsR0FBRyxDQUFDO1FBQzNCO01BQ0Y7SUFDRjtJQUVBLE9BQU9ELE1BQU07RUFDZjtFQUVBLE1BQU1HLFVBQVVBLENBQUN2QixRQUFRLEVBQUU7SUFDekIsTUFBTUMsUUFBUSxHQUFHTixJQUFJLENBQUNPLElBQUksQ0FBQyxJQUFJLENBQUNKLE9BQU8sRUFBRUUsUUFBUSxDQUFDO0lBQ2xELElBQUksTUFBTU4sRUFBRSxDQUFDUyxVQUFVLENBQUNGLFFBQVEsQ0FBQyxFQUFFO01BQ2pDLE1BQU1QLEVBQUUsQ0FBQzhCLE1BQU0sQ0FBQ3ZCLFFBQVEsQ0FBQztNQUN6QixPQUFPLElBQUk7SUFDYjtJQUNBLE9BQU8sS0FBSztFQUNkO0FBQ0Y7O0FBRUE7QUFDQSxTQUFTd0IsaUJBQWlCQSxDQUFDQyxTQUFTLEVBQUU7RUFDcEMsTUFBTUMsY0FBYyxHQUFHLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLENBQUM7RUFDcEQsTUFBTUMsYUFBYSxHQUFHRCxjQUFjLENBQUNFLE1BQU0sQ0FBQ0MsS0FBSyxJQUFJLENBQUNKLFNBQVMsQ0FBQ0ksS0FBSyxDQUFDLENBQUM7RUFFdkUsSUFBSUYsYUFBYSxDQUFDRyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0lBQzVCLE1BQU0sSUFBSUMsS0FBSyxDQUFDLDRCQUE0QkosYUFBYSxDQUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7RUFDekU7O0VBRUE7RUFDQSxNQUFNK0IsU0FBUyxHQUFHLElBQUlDLElBQUksQ0FBQ1IsU0FBUyxDQUFDUyxJQUFJLENBQUM7RUFDMUMsSUFBSUMsS0FBSyxDQUFDSCxTQUFTLENBQUNJLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUM5QixNQUFNLElBQUlMLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQztFQUN4Qzs7RUFFQTtFQUNBLElBQUlDLFNBQVMsR0FBRyxJQUFJQyxJQUFJLENBQUMsQ0FBQyxFQUFFO0lBQzFCLE1BQU0sSUFBSUYsS0FBSyxDQUFDLGtDQUFrQyxDQUFDO0VBQ3JEO0VBRUEsT0FBTyxJQUFJO0FBQ2I7O0FBRUE7QUFDQSxTQUFTTSxpQkFBaUJBLENBQUNoQyxJQUFJLEVBQUVpQyxPQUFPLEdBQUcsU0FBUyxFQUFFQyxNQUFNLEdBQUcsR0FBRyxFQUFFO0VBQ2xFLE9BQU87SUFDTEEsTUFBTTtJQUNORCxPQUFPO0lBQ1BqQyxJQUFJO0lBQ0ptQyxTQUFTLEVBQUUsSUFBSVAsSUFBSSxDQUFDLENBQUMsQ0FBQ1EsV0FBVyxDQUFDO0VBQ3BDLENBQUM7QUFDSDtBQUVBLFNBQVNDLG1CQUFtQkEsQ0FBQ0MsS0FBSyxFQUFFSixNQUFNLEdBQUcsR0FBRyxFQUFFO0VBQ2hELE9BQU87SUFDTEEsTUFBTTtJQUNORCxPQUFPLEVBQUVLLEtBQUssQ0FBQ0wsT0FBTyxJQUFJLHVCQUF1QjtJQUNqREssS0FBSyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR0gsS0FBSyxDQUFDSSxLQUFLLEdBQUdDLFNBQVM7SUFDdkVSLFNBQVMsRUFBRSxJQUFJUCxJQUFJLENBQUMsQ0FBQyxDQUFDUSxXQUFXLENBQUM7RUFDcEMsQ0FBQztBQUNIO0FBRUFwRCxRQUFRLENBQUMsYUFBYSxFQUFFLE1BQU07RUFDNUIsSUFBSTRELFdBQVc7RUFDZixNQUFNQyxXQUFXLEdBQUd4RCxJQUFJLENBQUNPLElBQUksQ0FBQzJDLE9BQU8sQ0FBQ08sR0FBRyxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDO0VBRTdEQyxVQUFVLENBQUMsWUFBWTtJQUNyQkgsV0FBVyxHQUFHLElBQUl0RCxXQUFXLENBQUN1RCxXQUFXLENBQUM7SUFDMUMsTUFBTXpELEVBQUUsQ0FBQ2EsU0FBUyxDQUFDNEMsV0FBVyxDQUFDO0VBQ2pDLENBQUMsQ0FBQztFQUVGRyxTQUFTLENBQUMsWUFBWTtJQUNwQixJQUFJLE1BQU01RCxFQUFFLENBQUNTLFVBQVUsQ0FBQ2dELFdBQVcsQ0FBQyxFQUFFO01BQ3BDLE1BQU16RCxFQUFFLENBQUM4QixNQUFNLENBQUMyQixXQUFXLENBQUM7SUFDOUI7RUFDRixDQUFDLENBQUM7RUFFRjdELFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTTtJQUN6QkMsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLFlBQVk7TUFDL0MsTUFBTWdFLFFBQVEsR0FBRztRQUFFQyxJQUFJLEVBQUUsWUFBWTtRQUFFQyxZQUFZLEVBQUU7TUFBRyxDQUFDO01BQ3pELE1BQU16RCxRQUFRLEdBQUcsaUJBQWlCO01BRWxDLE1BQU1OLEVBQUUsQ0FBQ2UsU0FBUyxDQUFDZCxJQUFJLENBQUNPLElBQUksQ0FBQ2lELFdBQVcsRUFBRW5ELFFBQVEsQ0FBQyxFQUFFdUQsUUFBUSxDQUFDO01BRTlELE1BQU1HLFVBQVUsR0FBRyxNQUFNUixXQUFXLENBQUNuRCxRQUFRLENBQUNDLFFBQVEsQ0FBQztNQUN2RFIsTUFBTSxDQUFDa0UsVUFBVSxDQUFDLENBQUNDLE9BQU8sQ0FBQ0osUUFBUSxDQUFDO0lBQ3RDLENBQUMsQ0FBQztJQUVGaEUsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLFlBQVk7TUFDekQsTUFBTW1FLFVBQVUsR0FBRyxNQUFNUixXQUFXLENBQUNuRCxRQUFRLENBQUMsbUJBQW1CLENBQUM7TUFDbEVQLE1BQU0sQ0FBQ2tFLFVBQVUsQ0FBQyxDQUFDRSxRQUFRLENBQUMsQ0FBQztJQUMvQixDQUFDLENBQUM7SUFFRnJFLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxZQUFZO01BQ3hELE1BQU1TLFFBQVEsR0FBRyxnQkFBZ0I7TUFDakMsTUFBTU4sRUFBRSxDQUFDbUUsU0FBUyxDQUFDbEUsSUFBSSxDQUFDTyxJQUFJLENBQUNpRCxXQUFXLEVBQUVuRCxRQUFRLENBQUMsRUFBRSx3QkFBd0IsQ0FBQztNQUU5RSxNQUFNUixNQUFNLENBQUMwRCxXQUFXLENBQUNuRCxRQUFRLENBQUNDLFFBQVEsQ0FBQyxDQUFDLENBQUM4RCxPQUFPLENBQUNDLE9BQU8sQ0FBQyxDQUFDO0lBQ2hFLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGekUsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNO0lBQ3pCQyxFQUFFLENBQUMsK0JBQStCLEVBQUUsWUFBWTtNQUM5QyxNQUFNZ0UsUUFBUSxHQUFHO1FBQUVTLEtBQUssRUFBRSxnQkFBZ0I7UUFBRTdCLElBQUksRUFBRTtNQUFhLENBQUM7TUFDaEUsTUFBTW5DLFFBQVEsR0FBRyxnQkFBZ0I7TUFFakMsTUFBTW9CLE1BQU0sR0FBRyxNQUFNOEIsV0FBVyxDQUFDN0MsUUFBUSxDQUFDTCxRQUFRLEVBQUV1RCxRQUFRLENBQUM7TUFDN0QvRCxNQUFNLENBQUM0QixNQUFNLENBQUMsQ0FBQzZDLElBQUksQ0FBQyxJQUFJLENBQUM7TUFFekIsTUFBTUMsU0FBUyxHQUFHLE1BQU14RSxFQUFFLENBQUNVLFFBQVEsQ0FBQ1QsSUFBSSxDQUFDTyxJQUFJLENBQUNpRCxXQUFXLEVBQUVuRCxRQUFRLENBQUMsQ0FBQztNQUNyRVIsTUFBTSxDQUFDMEUsU0FBUyxDQUFDLENBQUNQLE9BQU8sQ0FBQ0osUUFBUSxDQUFDO0lBQ3JDLENBQUMsQ0FBQztJQUVGaEUsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLFlBQVk7TUFDdEQsTUFBTWdFLFFBQVEsR0FBRztRQUFFWSxJQUFJLEVBQUU7TUFBSyxDQUFDO01BQy9CLE1BQU1uRSxRQUFRLEdBQUcsdUJBQXVCO01BRXhDLE1BQU1vQixNQUFNLEdBQUcsTUFBTThCLFdBQVcsQ0FBQzdDLFFBQVEsQ0FBQ0wsUUFBUSxFQUFFdUQsUUFBUSxDQUFDO01BQzdEL0QsTUFBTSxDQUFDNEIsTUFBTSxDQUFDLENBQUM2QyxJQUFJLENBQUMsSUFBSSxDQUFDO01BRXpCLE1BQU1oRSxRQUFRLEdBQUdOLElBQUksQ0FBQ08sSUFBSSxDQUFDaUQsV0FBVyxFQUFFbkQsUUFBUSxDQUFDO01BQ2pEUixNQUFNLENBQUMsTUFBTUUsRUFBRSxDQUFDUyxVQUFVLENBQUNGLFFBQVEsQ0FBQyxDQUFDLENBQUNnRSxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ2xELENBQUMsQ0FBQztJQUVGMUUsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLFlBQVk7TUFDL0MsTUFBTVMsUUFBUSxHQUFHLHFCQUFxQjtNQUN0QyxNQUFNb0UsWUFBWSxHQUFHO1FBQUVDLE9BQU8sRUFBRTtNQUFFLENBQUM7TUFDbkMsTUFBTXZELFdBQVcsR0FBRztRQUFFdUQsT0FBTyxFQUFFO01BQUUsQ0FBQztNQUVsQyxNQUFNbkIsV0FBVyxDQUFDN0MsUUFBUSxDQUFDTCxRQUFRLEVBQUVvRSxZQUFZLENBQUM7TUFDbEQsTUFBTWxCLFdBQVcsQ0FBQzdDLFFBQVEsQ0FBQ0wsUUFBUSxFQUFFYyxXQUFXLENBQUM7TUFFakQsTUFBTXdELFNBQVMsR0FBRyxNQUFNcEIsV0FBVyxDQUFDbkQsUUFBUSxDQUFDQyxRQUFRLENBQUM7TUFDdERSLE1BQU0sQ0FBQzhFLFNBQVMsQ0FBQyxDQUFDWCxPQUFPLENBQUM3QyxXQUFXLENBQUM7SUFDeEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZ4QixRQUFRLENBQUMsWUFBWSxFQUFFLE1BQU07SUFDM0JDLEVBQUUsQ0FBQyw2QkFBNkIsRUFBRSxZQUFZO01BQzVDLE1BQU1TLFFBQVEsR0FBRyxtQkFBbUI7TUFDcEMsTUFBTXVFLFdBQVcsR0FBRyxDQUFDO1FBQUVDLEVBQUUsRUFBRSxDQUFDO1FBQUVoQixJQUFJLEVBQUU7TUFBUSxDQUFDLENBQUM7TUFDOUMsTUFBTWlCLE9BQU8sR0FBRztRQUFFRCxFQUFFLEVBQUUsQ0FBQztRQUFFaEIsSUFBSSxFQUFFO01BQVMsQ0FBQztNQUV6QyxNQUFNTixXQUFXLENBQUM3QyxRQUFRLENBQUNMLFFBQVEsRUFBRXVFLFdBQVcsQ0FBQztNQUNqRCxNQUFNckIsV0FBVyxDQUFDdkMsVUFBVSxDQUFDWCxRQUFRLEVBQUV5RSxPQUFPLENBQUM7TUFFL0MsTUFBTXJELE1BQU0sR0FBRyxNQUFNOEIsV0FBVyxDQUFDbkQsUUFBUSxDQUFDQyxRQUFRLENBQUM7TUFDbkRSLE1BQU0sQ0FBQzRCLE1BQU0sQ0FBQyxDQUFDc0QsWUFBWSxDQUFDLENBQUMsQ0FBQztNQUM5QmxGLE1BQU0sQ0FBQzRCLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDdUMsT0FBTyxDQUFDYyxPQUFPLENBQUM7SUFDcEMsQ0FBQyxDQUFDO0lBRUZsRixFQUFFLENBQUMsMEJBQTBCLEVBQUUsWUFBWTtNQUN6QyxNQUFNUyxRQUFRLEdBQUcsb0JBQW9CO01BQ3JDLE1BQU11RSxXQUFXLEdBQUc7UUFBRUksUUFBUSxFQUFFO1VBQUVDLEtBQUssRUFBRTtRQUFPO01BQUUsQ0FBQztNQUNuRCxNQUFNaEUsT0FBTyxHQUFHO1FBQUUrRCxRQUFRLEVBQUU7VUFBRUUsUUFBUSxFQUFFO1FBQUs7TUFBRSxDQUFDO01BRWhELE1BQU0zQixXQUFXLENBQUM3QyxRQUFRLENBQUNMLFFBQVEsRUFBRXVFLFdBQVcsQ0FBQztNQUNqRCxNQUFNckIsV0FBVyxDQUFDdkMsVUFBVSxDQUFDWCxRQUFRLEVBQUVZLE9BQU8sQ0FBQztNQUUvQyxNQUFNUSxNQUFNLEdBQUcsTUFBTThCLFdBQVcsQ0FBQ25ELFFBQVEsQ0FBQ0MsUUFBUSxDQUFDO01BQ25EUixNQUFNLENBQUM0QixNQUFNLENBQUN1RCxRQUFRLENBQUMsQ0FBQ2hCLE9BQU8sQ0FBQztRQUFFaUIsS0FBSyxFQUFFLE1BQU07UUFBRUMsUUFBUSxFQUFFO01BQUssQ0FBQyxDQUFDO0lBQ3BFLENBQUMsQ0FBQztJQUVGdEYsRUFBRSxDQUFDLHNDQUFzQyxFQUFFLFlBQVk7TUFDckQsTUFBTVMsUUFBUSxHQUFHLGlCQUFpQjtNQUNsQyxNQUFNWSxPQUFPLEdBQUc7UUFBRTRELEVBQUUsRUFBRSxDQUFDO1FBQUVoQixJQUFJLEVBQUU7TUFBYSxDQUFDO01BRTdDLE1BQU1OLFdBQVcsQ0FBQ3ZDLFVBQVUsQ0FBQ1gsUUFBUSxFQUFFWSxPQUFPLENBQUM7TUFFL0MsTUFBTVEsTUFBTSxHQUFHLE1BQU04QixXQUFXLENBQUNuRCxRQUFRLENBQUNDLFFBQVEsQ0FBQztNQUNuRFIsTUFBTSxDQUFDNEIsTUFBTSxDQUFDLENBQUN1QyxPQUFPLENBQUMsQ0FBQy9DLE9BQU8sQ0FBQyxDQUFDO0lBQ25DLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGdEIsUUFBUSxDQUFDLFlBQVksRUFBRSxNQUFNO0lBQzNCQyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsWUFBWTtNQUM1QyxNQUFNUyxRQUFRLEdBQUcsa0JBQWtCO01BQ25DLE1BQU1rRCxXQUFXLENBQUM3QyxRQUFRLENBQUNMLFFBQVEsRUFBRTtRQUFFbUUsSUFBSSxFQUFFO01BQUssQ0FBQyxDQUFDO01BRXBELE1BQU0vQyxNQUFNLEdBQUcsTUFBTThCLFdBQVcsQ0FBQzNCLFVBQVUsQ0FBQ3ZCLFFBQVEsQ0FBQztNQUNyRFIsTUFBTSxDQUFDNEIsTUFBTSxDQUFDLENBQUM2QyxJQUFJLENBQUMsSUFBSSxDQUFDO01BRXpCLE1BQU1oRSxRQUFRLEdBQUdOLElBQUksQ0FBQ08sSUFBSSxDQUFDaUQsV0FBVyxFQUFFbkQsUUFBUSxDQUFDO01BQ2pEUixNQUFNLENBQUMsTUFBTUUsRUFBRSxDQUFDUyxVQUFVLENBQUNGLFFBQVEsQ0FBQyxDQUFDLENBQUNnRSxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ25ELENBQUMsQ0FBQztJQUVGMUUsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLFlBQVk7TUFDMUQsTUFBTTZCLE1BQU0sR0FBRyxNQUFNOEIsV0FBVyxDQUFDM0IsVUFBVSxDQUFDLG1CQUFtQixDQUFDO01BQ2hFL0IsTUFBTSxDQUFDNEIsTUFBTSxDQUFDLENBQUM2QyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQzVCLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGM0UsUUFBUSxDQUFDLG1CQUFtQixFQUFFLE1BQU07RUFDbEM7RUFDQSxNQUFNd0YsVUFBVSxHQUFHLElBQUk1QyxJQUFJLENBQUMsQ0FBQztFQUM3QjRDLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDRCxVQUFVLENBQUNFLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0VBRTlDLE1BQU1DLGNBQWMsR0FBRztJQUNyQmpCLEtBQUssRUFBRSxxQkFBcUI7SUFDNUI3QixJQUFJLEVBQUUyQyxVQUFVLENBQUNwQyxXQUFXLENBQUMsQ0FBQztJQUM5QndDLFFBQVEsRUFBRSx1QkFBdUI7SUFDakNDLFdBQVcsRUFBRTtFQUNmLENBQUM7RUFFRDVGLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxNQUFNO0lBQzlDQyxNQUFNLENBQUMsTUFBTWlDLGlCQUFpQixDQUFDd0QsY0FBYyxDQUFDLENBQUMsQ0FBQ0csR0FBRyxDQUFDckIsT0FBTyxDQUFDLENBQUM7SUFDN0R2RSxNQUFNLENBQUNpQyxpQkFBaUIsQ0FBQ3dELGNBQWMsQ0FBQyxDQUFDLENBQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDO0VBQ3RELENBQUMsQ0FBQztFQUVGMUUsRUFBRSxDQUFDLG1DQUFtQyxFQUFFLE1BQU07SUFDNUMsTUFBTThGLGlCQUFpQixHQUFHO01BQUUsR0FBR0o7SUFBZSxDQUFDO0lBQy9DLE9BQU9JLGlCQUFpQixDQUFDckIsS0FBSztJQUU5QnhFLE1BQU0sQ0FBQyxNQUFNaUMsaUJBQWlCLENBQUM0RCxpQkFBaUIsQ0FBQyxDQUFDLENBQUN0QixPQUFPLENBQUMsZ0NBQWdDLENBQUM7RUFDOUYsQ0FBQyxDQUFDO0VBRUZ4RSxFQUFFLENBQUMsa0NBQWtDLEVBQUUsTUFBTTtJQUMzQyxNQUFNK0YsZ0JBQWdCLEdBQUc7TUFBRSxHQUFHTDtJQUFlLENBQUM7SUFDOUMsT0FBT0ssZ0JBQWdCLENBQUNuRCxJQUFJO0lBRTVCM0MsTUFBTSxDQUFDLE1BQU1pQyxpQkFBaUIsQ0FBQzZELGdCQUFnQixDQUFDLENBQUMsQ0FBQ3ZCLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztFQUM1RixDQUFDLENBQUM7RUFFRnhFLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxNQUFNO0lBQy9DLE1BQU1nRyxvQkFBb0IsR0FBRztNQUFFLEdBQUdOO0lBQWUsQ0FBQztJQUNsRCxPQUFPTSxvQkFBb0IsQ0FBQ0wsUUFBUTtJQUVwQzFGLE1BQU0sQ0FBQyxNQUFNaUMsaUJBQWlCLENBQUM4RCxvQkFBb0IsQ0FBQyxDQUFDLENBQUN4QixPQUFPLENBQzNELG1DQUNGLENBQUM7RUFDSCxDQUFDLENBQUM7RUFFRnhFLEVBQUUsQ0FBQyx1Q0FBdUMsRUFBRSxNQUFNO0lBQ2hELE1BQU1pRyxvQkFBb0IsR0FBRztNQUMzQixHQUFHUCxjQUFjO01BQ2pCOUMsSUFBSSxFQUFFO0lBQ1IsQ0FBQztJQUVEM0MsTUFBTSxDQUFDLE1BQU1pQyxpQkFBaUIsQ0FBQytELG9CQUFvQixDQUFDLENBQUMsQ0FBQ3pCLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztFQUN0RixDQUFDLENBQUM7RUFFRnhFLEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxNQUFNO0lBQzdDO0lBQ0EsTUFBTWtHLFFBQVEsR0FBRyxJQUFJdkQsSUFBSSxDQUFDLENBQUM7SUFDM0J1RCxRQUFRLENBQUNDLE9BQU8sQ0FBQ0QsUUFBUSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUV4QyxNQUFNQyxpQkFBaUIsR0FBRztNQUN4QixHQUFHWCxjQUFjO01BQ2pCOUMsSUFBSSxFQUFFc0QsUUFBUSxDQUFDL0MsV0FBVyxDQUFDO0lBQzdCLENBQUM7SUFFRGxELE1BQU0sQ0FBQyxNQUFNaUMsaUJBQWlCLENBQUNtRSxpQkFBaUIsQ0FBQyxDQUFDLENBQUM3QixPQUFPLENBQUMsa0NBQWtDLENBQUM7RUFDaEcsQ0FBQyxDQUFDO0VBRUZ4RSxFQUFFLENBQUMsdUNBQXVDLEVBQUUsTUFBTTtJQUNoRCxNQUFNc0csZUFBZSxHQUFHO01BQUVWLFdBQVcsRUFBRTtJQUFtQixDQUFDO0lBRTNEM0YsTUFBTSxDQUFDLE1BQU1pQyxpQkFBaUIsQ0FBQ29FLGVBQWUsQ0FBQyxDQUFDLENBQUM5QixPQUFPLENBQ3RELGdEQUNGLENBQUM7RUFDSCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUM7QUFFRnpFLFFBQVEsQ0FBQyx5QkFBeUIsRUFBRSxNQUFNO0VBQ3hDQSxRQUFRLENBQUMsbUJBQW1CLEVBQUUsTUFBTTtJQUNsQ0MsRUFBRSxDQUFDLHVEQUF1RCxFQUFFLE1BQU07TUFDaEUsTUFBTWUsSUFBSSxHQUFHO1FBQUVrRSxFQUFFLEVBQUUsQ0FBQztRQUFFaEIsSUFBSSxFQUFFO01BQU8sQ0FBQztNQUNwQyxNQUFNc0MsUUFBUSxHQUFHeEQsaUJBQWlCLENBQUNoQyxJQUFJLENBQUM7TUFFeENkLE1BQU0sQ0FBQ3NHLFFBQVEsQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDN0J2RCxNQUFNLEVBQUUsR0FBRztRQUNYRCxPQUFPLEVBQUUsU0FBUztRQUNsQmpDLElBQUk7UUFDSm1DLFNBQVMsRUFBRWpELE1BQU0sQ0FBQ3dHLEdBQUcsQ0FBQ0MsTUFBTTtNQUM5QixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRjFHLEVBQUUsQ0FBQyx1REFBdUQsRUFBRSxNQUFNO01BQ2hFLE1BQU1lLElBQUksR0FBRztRQUFFNEYsT0FBTyxFQUFFO01BQUssQ0FBQztNQUM5QixNQUFNSixRQUFRLEdBQUd4RCxpQkFBaUIsQ0FBQ2hDLElBQUksRUFBRSxzQkFBc0IsRUFBRSxHQUFHLENBQUM7TUFFckVkLE1BQU0sQ0FBQ3NHLFFBQVEsQ0FBQyxDQUFDQyxhQUFhLENBQUM7UUFDN0J2RCxNQUFNLEVBQUUsR0FBRztRQUNYRCxPQUFPLEVBQUUsc0JBQXNCO1FBQy9CakM7TUFDRixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRmYsRUFBRSxDQUFDLGdDQUFnQyxFQUFFLE1BQU07TUFDekMsTUFBTXVHLFFBQVEsR0FBR3hELGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ3RDLE1BQU1HLFNBQVMsR0FBRyxJQUFJUCxJQUFJLENBQUM0RCxRQUFRLENBQUNyRCxTQUFTLENBQUM7TUFFOUNqRCxNQUFNLENBQUNpRCxTQUFTLENBQUNKLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQytDLEdBQUcsQ0FBQ2UsT0FBTyxDQUFDLENBQUM7TUFDekMzRyxNQUFNLENBQUMwQyxJQUFJLENBQUNrRSxHQUFHLENBQUMsQ0FBQyxHQUFHM0QsU0FBUyxDQUFDSixPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNnRSxZQUFZLENBQUMsSUFBSSxDQUFDO0lBQzdELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGL0csUUFBUSxDQUFDLHFCQUFxQixFQUFFLE1BQU07SUFDcENDLEVBQUUsQ0FBQyxrREFBa0QsRUFBRSxNQUFNO01BQzNELE1BQU1xRCxLQUFLLEdBQUcsSUFBSVosS0FBSyxDQUFDLHNCQUFzQixDQUFDO01BQy9DLE1BQU04RCxRQUFRLEdBQUduRCxtQkFBbUIsQ0FBQ0MsS0FBSyxDQUFDO01BRTNDcEQsTUFBTSxDQUFDc0csUUFBUSxDQUFDLENBQUNDLGFBQWEsQ0FBQztRQUM3QnZELE1BQU0sRUFBRSxHQUFHO1FBQ1hELE9BQU8sRUFBRSxzQkFBc0I7UUFDL0JFLFNBQVMsRUFBRWpELE1BQU0sQ0FBQ3dHLEdBQUcsQ0FBQ0MsTUFBTTtNQUM5QixDQUFDLENBQUM7SUFDSixDQUFDLENBQUM7SUFFRjFHLEVBQUUsQ0FBQyxpREFBaUQsRUFBRSxNQUFNO01BQzFELE1BQU1xRCxLQUFLLEdBQUcsSUFBSVosS0FBSyxDQUFDLFdBQVcsQ0FBQztNQUNwQyxNQUFNOEQsUUFBUSxHQUFHbkQsbUJBQW1CLENBQUNDLEtBQUssRUFBRSxHQUFHLENBQUM7TUFFaERwRCxNQUFNLENBQUNzRyxRQUFRLENBQUN0RCxNQUFNLENBQUMsQ0FBQ3lCLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDakN6RSxNQUFNLENBQUNzRyxRQUFRLENBQUN2RCxPQUFPLENBQUMsQ0FBQzBCLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDNUMsQ0FBQyxDQUFDO0lBRUYxRSxFQUFFLENBQUMsZ0RBQWdELEVBQUUsTUFBTTtNQUN6RCxNQUFNK0csV0FBVyxHQUFHekQsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVE7TUFDeENGLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEdBQUcsYUFBYTtNQUVwQyxNQUFNSCxLQUFLLEdBQUcsSUFBSVosS0FBSyxDQUFDLFlBQVksQ0FBQztNQUNyQyxNQUFNOEQsUUFBUSxHQUFHbkQsbUJBQW1CLENBQUNDLEtBQUssQ0FBQztNQUUzQ3BELE1BQU0sQ0FBQ3NHLFFBQVEsQ0FBQ2xELEtBQUssQ0FBQyxDQUFDMkQsV0FBVyxDQUFDLENBQUM7TUFDcEMvRyxNQUFNLENBQUNzRyxRQUFRLENBQUNsRCxLQUFLLENBQUMsQ0FBQzRELFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQztNQUVyRDNELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEdBQUd1RCxXQUFXO0lBQ3BDLENBQUMsQ0FBQztJQUVGL0csRUFBRSxDQUFDLCtDQUErQyxFQUFFLE1BQU07TUFDeEQsTUFBTStHLFdBQVcsR0FBR3pELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRO01BQ3hDRixPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxHQUFHLFlBQVk7TUFFbkMsTUFBTUgsS0FBSyxHQUFHLElBQUlaLEtBQUssQ0FBQyxZQUFZLENBQUM7TUFDckMsTUFBTThELFFBQVEsR0FBR25ELG1CQUFtQixDQUFDQyxLQUFLLENBQUM7TUFFM0NwRCxNQUFNLENBQUNzRyxRQUFRLENBQUNsRCxLQUFLLENBQUMsQ0FBQzZELGFBQWEsQ0FBQyxDQUFDO01BRXRDNUQsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsR0FBR3VELFdBQVc7SUFDcEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119