ce3f56c571f8d22565b6d3f0b795e1ee
/**
 * Database Service Unit Tests
 * データベースサービスの単体テスト
 */

const {
  DatabaseService
} = require('../../../server/services/database');
describe('DatabaseService', () => {
  let database;
  beforeEach(() => {
    database = new DatabaseService();
  });
  afterEach(async () => {
    if (database && database.close) {
      await database.close();
    }
  });
  describe('getInstance', () => {
    it('should return singleton instance', () => {
      const instance1 = DatabaseService.getInstance();
      const instance2 = DatabaseService.getInstance();
      expect(instance1).toBe(instance2);
      expect(instance1).toBeInstanceOf(DatabaseService);
    });
  });
  describe('initialization', () => {
    it('should initialize with default configuration', () => {
      expect(database).toBeInstanceOf(DatabaseService);
      expect(database.connectionString).toBeDefined();
    });
    it('should handle custom configuration', () => {
      const customConfig = {
        host: 'localhost',
        port: 5432,
        database: 'test_db',
        user: 'test_user',
        password: 'test_pass'
      };
      const customDatabase = new DatabaseService(customConfig);
      expect(customDatabase.config).toEqual(expect.objectContaining(customConfig));
    });
  });
  describe('query method', () => {
    it('should handle simple queries', async () => {
      // モックデータベースクエリ
      database.query = jest.fn().mockResolvedValue([{
        id: 1,
        name: 'Test Event',
        status: 'upcoming'
      }, {
        id: 2,
        name: 'Another Event',
        status: 'completed'
      }]);
      const result = await database.query('SELECT * FROM events');
      expect(result).toHaveLength(2);
      expect(result[0]).toEqual(expect.objectContaining({
        id: 1,
        name: 'Test Event',
        status: 'upcoming'
      }));
      expect(database.query).toHaveBeenCalledWith('SELECT * FROM events');
    });
    it('should handle parameterized queries', async () => {
      database.query = jest.fn().mockResolvedValue([{
        id: 1,
        name: 'Test Event',
        status: 'upcoming'
      }]);
      const result = await database.query('SELECT * FROM events WHERE id = ?', [1]);
      expect(result).toHaveLength(1);
      expect(database.query).toHaveBeenCalledWith('SELECT * FROM events WHERE id = ?', [1]);
    });
    it('should handle query errors', async () => {
      database.query = jest.fn().mockRejectedValue(new Error('Database connection failed'));
      await expect(database.query('SELECT * FROM events')).rejects.toThrow('Database connection failed');
    });
  });
  describe('transaction support', () => {
    it('should support transactions', async () => {
      const mockTransaction = {
        query: jest.fn().mockResolvedValue([{
          id: 1
        }]),
        commit: jest.fn().mockResolvedValue(true),
        rollback: jest.fn().mockResolvedValue(true)
      };
      database.beginTransaction = jest.fn().mockResolvedValue(mockTransaction);
      const transaction = await database.beginTransaction();
      expect(transaction).toEqual(mockTransaction);
      expect(database.beginTransaction).toHaveBeenCalled();
    });
  });
  describe('connection management', () => {
    it('should initialize connection', async () => {
      database.initialize = jest.fn().mockResolvedValue(true);
      const result = await database.initialize();
      expect(result).toBe(true);
      expect(database.initialize).toHaveBeenCalled();
    });
    it('should wait for connection', async () => {
      database.waitForConnection = jest.fn().mockResolvedValue(true);
      const result = await database.waitForConnection();
      expect(result).toBe(true);
      expect(database.waitForConnection).toHaveBeenCalled();
    });
    it('should close connection gracefully', async () => {
      database.close = jest.fn().mockResolvedValue(true);
      const result = await database.close();
      expect(result).toBe(true);
      expect(database.close).toHaveBeenCalled();
    });
  });
  describe('data operations', () => {
    beforeEach(() => {
      // 共通のモックメソッドを設定
      database.query = jest.fn();
    });
    it('should insert data', async () => {
      database.query.mockResolvedValue([{
        insertId: 1
      }]);
      const result = await database.query('INSERT INTO events (title, description) VALUES (?, ?)', ['Test Event', 'Test Description']);
      expect(result[0].insertId).toBe(1);
    });
    it('should update data', async () => {
      database.query.mockResolvedValue([{
        affectedRows: 1
      }]);
      const result = await database.query('UPDATE events SET title = ? WHERE id = ?', ['Updated Title', 1]);
      expect(result[0].affectedRows).toBe(1);
    });
    it('should delete data', async () => {
      database.query.mockResolvedValue([{
        affectedRows: 1
      }]);
      const result = await database.query('DELETE FROM events WHERE id = ?', [1]);
      expect(result[0].affectedRows).toBe(1);
    });
  });
  describe('error handling', () => {
    it('should handle connection errors', async () => {
      database.initialize = jest.fn().mockRejectedValue(new Error('Connection refused'));
      await expect(database.initialize()).rejects.toThrow('Connection refused');
    });
    it('should handle query timeout', async () => {
      database.query = jest.fn().mockRejectedValue(new Error('Query timeout'));
      await expect(database.query('SELECT * FROM events')).rejects.toThrow('Query timeout');
    });
    it('should handle invalid SQL', async () => {
      database.query = jest.fn().mockRejectedValue(new Error('Syntax error in SQL statement'));
      await expect(database.query('INVALID SQL')).rejects.toThrow('Syntax error in SQL statement');
    });
  });
  describe('data seeding', () => {
    it('should seed database with test data', async () => {
      const seedData = {
        events: [{
          title: 'Test Event',
          description: 'Test Description',
          date: '2025-06-25T19:00:00Z'
        }]
      };
      database.seed = jest.fn().mockResolvedValue(true);
      const result = await database.seed(seedData);
      expect(result).toBe(true);
      expect(database.seed).toHaveBeenCalledWith(seedData);
    });
  });
  describe('performance', () => {
    it('should handle multiple concurrent queries', async () => {
      database.query = jest.fn().mockResolvedValueOnce([{
        id: 1
      }]).mockResolvedValueOnce([{
        id: 2
      }]).mockResolvedValueOnce([{
        id: 3
      }]);
      const promises = [database.query('SELECT * FROM events WHERE id = 1'), database.query('SELECT * FROM events WHERE id = 2'), database.query('SELECT * FROM events WHERE id = 3')];
      const results = await Promise.all(promises);
      expect(results).toHaveLength(3);
      expect(database.query).toHaveBeenCalledTimes(3);
    });
    it('should handle large result sets efficiently', async () => {
      const largeDataset = Array.from({
        length: 1000
      }, (_, i) => ({
        id: i + 1,
        name: `Event ${i + 1}`,
        status: 'upcoming'
      }));
      database.query = jest.fn().mockResolvedValue(largeDataset);
      const startTime = Date.now();
      const result = await database.query('SELECT * FROM events');
      const endTime = Date.now();
      expect(result).toHaveLength(1000);
      expect(endTime - startTime).toBeLessThan(1000); // 1秒以内
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEYXRhYmFzZVNlcnZpY2UiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJkYXRhYmFzZSIsImJlZm9yZUVhY2giLCJhZnRlckVhY2giLCJjbG9zZSIsIml0IiwiaW5zdGFuY2UxIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZTIiLCJleHBlY3QiLCJ0b0JlIiwidG9CZUluc3RhbmNlT2YiLCJjb25uZWN0aW9uU3RyaW5nIiwidG9CZURlZmluZWQiLCJjdXN0b21Db25maWciLCJob3N0IiwicG9ydCIsInVzZXIiLCJwYXNzd29yZCIsImN1c3RvbURhdGFiYXNlIiwiY29uZmlnIiwidG9FcXVhbCIsIm9iamVjdENvbnRhaW5pbmciLCJxdWVyeSIsImplc3QiLCJmbiIsIm1vY2tSZXNvbHZlZFZhbHVlIiwiaWQiLCJuYW1lIiwic3RhdHVzIiwicmVzdWx0IiwidG9IYXZlTGVuZ3RoIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJtb2NrUmVqZWN0ZWRWYWx1ZSIsIkVycm9yIiwicmVqZWN0cyIsInRvVGhyb3ciLCJtb2NrVHJhbnNhY3Rpb24iLCJjb21taXQiLCJyb2xsYmFjayIsImJlZ2luVHJhbnNhY3Rpb24iLCJ0cmFuc2FjdGlvbiIsInRvSGF2ZUJlZW5DYWxsZWQiLCJpbml0aWFsaXplIiwid2FpdEZvckNvbm5lY3Rpb24iLCJpbnNlcnRJZCIsImFmZmVjdGVkUm93cyIsInNlZWREYXRhIiwiZXZlbnRzIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImRhdGUiLCJzZWVkIiwibW9ja1Jlc29sdmVkVmFsdWVPbmNlIiwicHJvbWlzZXMiLCJyZXN1bHRzIiwiUHJvbWlzZSIsImFsbCIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImxhcmdlRGF0YXNldCIsIkFycmF5IiwiZnJvbSIsImxlbmd0aCIsIl8iLCJpIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImVuZFRpbWUiLCJ0b0JlTGVzc1RoYW4iXSwic291cmNlcyI6WyJkYXRhYmFzZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRGF0YWJhc2UgU2VydmljZSBVbml0IFRlc3RzXG4gKiDjg4fjg7zjgr/jg5njg7zjgrnjgrXjg7zjg5Pjgrnjga7ljZjkvZPjg4bjgrnjg4hcbiAqL1xuXG5jb25zdCB7IERhdGFiYXNlU2VydmljZSB9ID0gcmVxdWlyZSgnLi4vLi4vLi4vc2VydmVyL3NlcnZpY2VzL2RhdGFiYXNlJyk7XG5cbmRlc2NyaWJlKCdEYXRhYmFzZVNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBkYXRhYmFzZTtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBkYXRhYmFzZSA9IG5ldyBEYXRhYmFzZVNlcnZpY2UoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBpZiAoZGF0YWJhc2UgJiYgZGF0YWJhc2UuY2xvc2UpIHtcbiAgICAgIGF3YWl0IGRhdGFiYXNlLmNsb3NlKCk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0SW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gc2luZ2xldG9uIGluc3RhbmNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5zdGFuY2UxID0gRGF0YWJhc2VTZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgICBjb25zdCBpbnN0YW5jZTIgPSBEYXRhYmFzZVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcblxuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZShpbnN0YW5jZTIpO1xuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZUluc3RhbmNlT2YoRGF0YWJhc2VTZXJ2aWNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2luaXRpYWxpemF0aW9uJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgY29uZmlndXJhdGlvbicsICgpID0+IHtcbiAgICAgIGV4cGVjdChkYXRhYmFzZSkudG9CZUluc3RhbmNlT2YoRGF0YWJhc2VTZXJ2aWNlKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5jb25uZWN0aW9uU3RyaW5nKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY3VzdG9tIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjdXN0b21Db25maWcgPSB7XG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgICBwb3J0OiA1NDMyLFxuICAgICAgICBkYXRhYmFzZTogJ3Rlc3RfZGInLFxuICAgICAgICB1c2VyOiAndGVzdF91c2VyJyxcbiAgICAgICAgcGFzc3dvcmQ6ICd0ZXN0X3Bhc3MnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBjdXN0b21EYXRhYmFzZSA9IG5ldyBEYXRhYmFzZVNlcnZpY2UoY3VzdG9tQ29uZmlnKTtcbiAgICAgIGV4cGVjdChjdXN0b21EYXRhYmFzZS5jb25maWcpLnRvRXF1YWwoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoY3VzdG9tQ29uZmlnKSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdxdWVyeSBtZXRob2QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2ltcGxlIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDjg6Ljg4Pjgq/jg4fjg7zjgr/jg5njg7zjgrnjgq/jgqjjg6pcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFtcbiAgICAgICAgeyBpZDogMSwgbmFtZTogJ1Rlc3QgRXZlbnQnLCBzdGF0dXM6ICd1cGNvbWluZycgfSxcbiAgICAgICAgeyBpZDogMiwgbmFtZTogJ0Fub3RoZXIgRXZlbnQnLCBzdGF0dXM6ICdjb21wbGV0ZWQnIH1cbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBldmVudHMnKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDIpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9FcXVhbChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgIG5hbWU6ICdUZXN0IEV2ZW50JyxcbiAgICAgICAgICBzdGF0dXM6ICd1cGNvbWluZydcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgICBleHBlY3QoZGF0YWJhc2UucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdTRUxFQ1QgKiBGUk9NIGV2ZW50cycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGFyYW1ldGVyaXplZCBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UucXVlcnkgPSBqZXN0XG4gICAgICAgIC5mbigpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZShbeyBpZDogMSwgbmFtZTogJ1Rlc3QgRXZlbnQnLCBzdGF0dXM6ICd1cGNvbWluZycgfV0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBldmVudHMgV0hFUkUgaWQgPSA/JywgWzFdKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGRhdGFiYXNlLnF1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnU0VMRUNUICogRlJPTSBldmVudHMgV0hFUkUgaWQgPSA/JywgWzFdKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHF1ZXJ5IGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChkYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBldmVudHMnKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnRGF0YWJhc2UgY29ubmVjdGlvbiBmYWlsZWQnXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndHJhbnNhY3Rpb24gc3VwcG9ydCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHN1cHBvcnQgdHJhbnNhY3Rpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1RyYW5zYWN0aW9uID0ge1xuICAgICAgICBxdWVyeTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKFt7IGlkOiAxIH1dKSxcbiAgICAgICAgY29tbWl0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gICAgICAgIHJvbGxiYWNrOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSlcbiAgICAgIH07XG5cbiAgICAgIGRhdGFiYXNlLmJlZ2luVHJhbnNhY3Rpb24gPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RyYW5zYWN0aW9uKTtcblxuICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBhd2FpdCBkYXRhYmFzZS5iZWdpblRyYW5zYWN0aW9uKCk7XG5cbiAgICAgIGV4cGVjdCh0cmFuc2FjdGlvbikudG9FcXVhbChtb2NrVHJhbnNhY3Rpb24pO1xuICAgICAgZXhwZWN0KGRhdGFiYXNlLmJlZ2luVHJhbnNhY3Rpb24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Nvbm5lY3Rpb24gbWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluaXRpYWxpemUgY29ubmVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLmluaXRpYWxpemUgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLmluaXRpYWxpemUoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5pbml0aWFsaXplKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHdhaXQgZm9yIGNvbm5lY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS53YWl0Rm9yQ29ubmVjdGlvbiA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2Uud2FpdEZvckNvbm5lY3Rpb24oKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS53YWl0Rm9yQ29ubmVjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbG9zZSBjb25uZWN0aW9uIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5jbG9zZSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2UuY2xvc2UoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5jbG9zZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGF0YSBvcGVyYXRpb25zJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgLy8g5YWx6YCa44Gu44Oi44OD44Kv44Oh44K944OD44OJ44KS6Kit5a6aXG4gICAgICBkYXRhYmFzZS5xdWVyeSA9IGplc3QuZm4oKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaW5zZXJ0IGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyBpbnNlcnRJZDogMSB9XSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLnF1ZXJ5KCdJTlNFUlQgSU5UTyBldmVudHMgKHRpdGxlLCBkZXNjcmlwdGlvbikgVkFMVUVTICg/LCA/KScsIFtcbiAgICAgICAgJ1Rlc3QgRXZlbnQnLFxuICAgICAgICAnVGVzdCBEZXNjcmlwdGlvbidcbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmluc2VydElkKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1cGRhdGUgZGF0YScsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IGFmZmVjdGVkUm93czogMSB9XSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRhdGFiYXNlLnF1ZXJ5KCdVUERBVEUgZXZlbnRzIFNFVCB0aXRsZSA9ID8gV0hFUkUgaWQgPSA/JywgW1xuICAgICAgICAnVXBkYXRlZCBUaXRsZScsXG4gICAgICAgIDFcbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0WzBdLmFmZmVjdGVkUm93cykudG9CZSgxKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgZGVsZXRlIGRhdGEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyBhZmZlY3RlZFJvd3M6IDEgfV0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYXRhYmFzZS5xdWVyeSgnREVMRVRFIEZST00gZXZlbnRzIFdIRVJFIGlkID0gPycsIFsxXSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHRbMF0uYWZmZWN0ZWRSb3dzKS50b0JlKDEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZXJyb3IgaGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgY29ubmVjdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBkYXRhYmFzZS5pbml0aWFsaXplID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQ29ubmVjdGlvbiByZWZ1c2VkJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoZGF0YWJhc2UuaW5pdGlhbGl6ZSgpKS5yZWplY3RzLnRvVGhyb3coJ0Nvbm5lY3Rpb24gcmVmdXNlZCcpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgdGltZW91dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGRhdGFiYXNlLnF1ZXJ5ID0gamVzdC5mbigpLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUXVlcnkgdGltZW91dCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFiYXNlLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGV2ZW50cycpKS5yZWplY3RzLnRvVGhyb3coJ1F1ZXJ5IHRpbWVvdXQnKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGludmFsaWQgU1FMJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UucXVlcnkgPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdTeW50YXggZXJyb3IgaW4gU1FMIHN0YXRlbWVudCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGRhdGFiYXNlLnF1ZXJ5KCdJTlZBTElEIFNRTCcpKS5yZWplY3RzLnRvVGhyb3coJ1N5bnRheCBlcnJvciBpbiBTUUwgc3RhdGVtZW50Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYXRhIHNlZWRpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzZWVkIGRhdGFiYXNlIHdpdGggdGVzdCBkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VlZERhdGEgPSB7XG4gICAgICAgIGV2ZW50czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnVGVzdCBFdmVudCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3QgRGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgZGF0ZTogJzIwMjUtMDYtMjVUMTk6MDA6MDBaJ1xuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfTtcblxuICAgICAgZGF0YWJhc2Uuc2VlZCA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2Uuc2VlZChzZWVkRGF0YSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoZGF0YWJhc2Uuc2VlZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoc2VlZERhdGEpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncGVyZm9ybWFuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbXVsdGlwbGUgY29uY3VycmVudCBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgZGF0YWJhc2UucXVlcnkgPSBqZXN0XG4gICAgICAgIC5mbigpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgaWQ6IDEgfV0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgaWQ6IDIgfV0pXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgaWQ6IDMgfV0pO1xuXG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtcbiAgICAgICAgZGF0YWJhc2UucXVlcnkoJ1NFTEVDVCAqIEZST00gZXZlbnRzIFdIRVJFIGlkID0gMScpLFxuICAgICAgICBkYXRhYmFzZS5xdWVyeSgnU0VMRUNUICogRlJPTSBldmVudHMgV0hFUkUgaWQgPSAyJyksXG4gICAgICAgIGRhdGFiYXNlLnF1ZXJ5KCdTRUxFQ1QgKiBGUk9NIGV2ZW50cyBXSEVSRSBpZCA9IDMnKVxuICAgICAgXTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgzKTtcbiAgICAgIGV4cGVjdChkYXRhYmFzZS5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbGFyZ2UgcmVzdWx0IHNldHMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBsYXJnZURhdGFzZXQgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwIH0sIChfLCBpKSA9PiAoe1xuICAgICAgICBpZDogaSArIDEsXG4gICAgICAgIG5hbWU6IGBFdmVudCAke2kgKyAxfWAsXG4gICAgICAgIHN0YXR1czogJ3VwY29taW5nJ1xuICAgICAgfSkpO1xuXG4gICAgICBkYXRhYmFzZS5xdWVyeSA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShsYXJnZURhdGFzZXQpO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGF0YWJhc2UucXVlcnkoJ1NFTEVDVCAqIEZST00gZXZlbnRzJyk7XG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEwMDApO1xuICAgICAgZXhwZWN0KGVuZFRpbWUgLSBzdGFydFRpbWUpLnRvQmVMZXNzVGhhbigxMDAwKTsgLy8gMeenkuS7peWGhVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBO0FBQWdCLENBQUMsR0FBR0MsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0FBRXhFQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtFQUNoQyxJQUFJQyxRQUFRO0VBRVpDLFVBQVUsQ0FBQyxNQUFNO0lBQ2ZELFFBQVEsR0FBRyxJQUFJSCxlQUFlLENBQUMsQ0FBQztFQUNsQyxDQUFDLENBQUM7RUFFRkssU0FBUyxDQUFDLFlBQVk7SUFDcEIsSUFBSUYsUUFBUSxJQUFJQSxRQUFRLENBQUNHLEtBQUssRUFBRTtNQUM5QixNQUFNSCxRQUFRLENBQUNHLEtBQUssQ0FBQyxDQUFDO0lBQ3hCO0VBQ0YsQ0FBQyxDQUFDO0VBRUZKLFFBQVEsQ0FBQyxhQUFhLEVBQUUsTUFBTTtJQUM1QkssRUFBRSxDQUFDLGtDQUFrQyxFQUFFLE1BQU07TUFDM0MsTUFBTUMsU0FBUyxHQUFHUixlQUFlLENBQUNTLFdBQVcsQ0FBQyxDQUFDO01BQy9DLE1BQU1DLFNBQVMsR0FBR1YsZUFBZSxDQUFDUyxXQUFXLENBQUMsQ0FBQztNQUUvQ0UsTUFBTSxDQUFDSCxTQUFTLENBQUMsQ0FBQ0ksSUFBSSxDQUFDRixTQUFTLENBQUM7TUFDakNDLE1BQU0sQ0FBQ0gsU0FBUyxDQUFDLENBQUNLLGNBQWMsQ0FBQ2IsZUFBZSxDQUFDO0lBQ25ELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGRSxRQUFRLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtJQUMvQkssRUFBRSxDQUFDLDhDQUE4QyxFQUFFLE1BQU07TUFDdkRJLE1BQU0sQ0FBQ1IsUUFBUSxDQUFDLENBQUNVLGNBQWMsQ0FBQ2IsZUFBZSxDQUFDO01BQ2hEVyxNQUFNLENBQUNSLFFBQVEsQ0FBQ1csZ0JBQWdCLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUM7SUFDakQsQ0FBQyxDQUFDO0lBRUZSLEVBQUUsQ0FBQyxvQ0FBb0MsRUFBRSxNQUFNO01BQzdDLE1BQU1TLFlBQVksR0FBRztRQUNuQkMsSUFBSSxFQUFFLFdBQVc7UUFDakJDLElBQUksRUFBRSxJQUFJO1FBQ1ZmLFFBQVEsRUFBRSxTQUFTO1FBQ25CZ0IsSUFBSSxFQUFFLFdBQVc7UUFDakJDLFFBQVEsRUFBRTtNQUNaLENBQUM7TUFFRCxNQUFNQyxjQUFjLEdBQUcsSUFBSXJCLGVBQWUsQ0FBQ2dCLFlBQVksQ0FBQztNQUN4REwsTUFBTSxDQUFDVSxjQUFjLENBQUNDLE1BQU0sQ0FBQyxDQUFDQyxPQUFPLENBQUNaLE1BQU0sQ0FBQ2EsZ0JBQWdCLENBQUNSLFlBQVksQ0FBQyxDQUFDO0lBQzlFLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGZCxRQUFRLENBQUMsY0FBYyxFQUFFLE1BQU07SUFDN0JLLEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxZQUFZO01BQzdDO01BQ0FKLFFBQVEsQ0FBQ3NCLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxDQUMzQztRQUFFQyxFQUFFLEVBQUUsQ0FBQztRQUFFQyxJQUFJLEVBQUUsWUFBWTtRQUFFQyxNQUFNLEVBQUU7TUFBVyxDQUFDLEVBQ2pEO1FBQUVGLEVBQUUsRUFBRSxDQUFDO1FBQUVDLElBQUksRUFBRSxlQUFlO1FBQUVDLE1BQU0sRUFBRTtNQUFZLENBQUMsQ0FDdEQsQ0FBQztNQUVGLE1BQU1DLE1BQU0sR0FBRyxNQUFNN0IsUUFBUSxDQUFDc0IsS0FBSyxDQUFDLHNCQUFzQixDQUFDO01BRTNEZCxNQUFNLENBQUNxQixNQUFNLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLENBQUMsQ0FBQztNQUM5QnRCLE1BQU0sQ0FBQ3FCLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDVCxPQUFPLENBQ3ZCWixNQUFNLENBQUNhLGdCQUFnQixDQUFDO1FBQ3RCSyxFQUFFLEVBQUUsQ0FBQztRQUNMQyxJQUFJLEVBQUUsWUFBWTtRQUNsQkMsTUFBTSxFQUFFO01BQ1YsQ0FBQyxDQUNILENBQUM7TUFDRHBCLE1BQU0sQ0FBQ1IsUUFBUSxDQUFDc0IsS0FBSyxDQUFDLENBQUNTLG9CQUFvQixDQUFDLHNCQUFzQixDQUFDO0lBQ3JFLENBQUMsQ0FBQztJQUVGM0IsRUFBRSxDQUFDLHFDQUFxQyxFQUFFLFlBQVk7TUFDcERKLFFBQVEsQ0FBQ3NCLEtBQUssR0FBR0MsSUFBSSxDQUNsQkMsRUFBRSxDQUFDLENBQUMsQ0FDSkMsaUJBQWlCLENBQUMsQ0FBQztRQUFFQyxFQUFFLEVBQUUsQ0FBQztRQUFFQyxJQUFJLEVBQUUsWUFBWTtRQUFFQyxNQUFNLEVBQUU7TUFBVyxDQUFDLENBQUMsQ0FBQztNQUV6RSxNQUFNQyxNQUFNLEdBQUcsTUFBTTdCLFFBQVEsQ0FBQ3NCLEtBQUssQ0FBQyxtQ0FBbUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BRTdFZCxNQUFNLENBQUNxQixNQUFNLENBQUMsQ0FBQ0MsWUFBWSxDQUFDLENBQUMsQ0FBQztNQUM5QnRCLE1BQU0sQ0FBQ1IsUUFBUSxDQUFDc0IsS0FBSyxDQUFDLENBQUNTLG9CQUFvQixDQUFDLG1DQUFtQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkYsQ0FBQyxDQUFDO0lBRUYzQixFQUFFLENBQUMsNEJBQTRCLEVBQUUsWUFBWTtNQUMzQ0osUUFBUSxDQUFDc0IsS0FBSyxHQUFHQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNRLGlCQUFpQixDQUFDLElBQUlDLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO01BRXJGLE1BQU16QixNQUFNLENBQUNSLFFBQVEsQ0FBQ3NCLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUNZLE9BQU8sQ0FBQ0MsT0FBTyxDQUNsRSw0QkFDRixDQUFDO0lBQ0gsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZwQyxRQUFRLENBQUMscUJBQXFCLEVBQUUsTUFBTTtJQUNwQ0ssRUFBRSxDQUFDLDZCQUE2QixFQUFFLFlBQVk7TUFDNUMsTUFBTWdDLGVBQWUsR0FBRztRQUN0QmQsS0FBSyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLENBQUM7VUFBRUMsRUFBRSxFQUFFO1FBQUUsQ0FBQyxDQUFDLENBQUM7UUFDL0NXLE1BQU0sRUFBRWQsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7UUFDekNhLFFBQVEsRUFBRWYsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJO01BQzVDLENBQUM7TUFFRHpCLFFBQVEsQ0FBQ3VDLGdCQUFnQixHQUFHaEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQ1csZUFBZSxDQUFDO01BRXhFLE1BQU1JLFdBQVcsR0FBRyxNQUFNeEMsUUFBUSxDQUFDdUMsZ0JBQWdCLENBQUMsQ0FBQztNQUVyRC9CLE1BQU0sQ0FBQ2dDLFdBQVcsQ0FBQyxDQUFDcEIsT0FBTyxDQUFDZ0IsZUFBZSxDQUFDO01BQzVDNUIsTUFBTSxDQUFDUixRQUFRLENBQUN1QyxnQkFBZ0IsQ0FBQyxDQUFDRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3RELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGMUMsUUFBUSxDQUFDLHVCQUF1QixFQUFFLE1BQU07SUFDdENLLEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxZQUFZO01BQzdDSixRQUFRLENBQUMwQyxVQUFVLEdBQUduQixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztNQUV2RCxNQUFNSSxNQUFNLEdBQUcsTUFBTTdCLFFBQVEsQ0FBQzBDLFVBQVUsQ0FBQyxDQUFDO01BRTFDbEMsTUFBTSxDQUFDcUIsTUFBTSxDQUFDLENBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3pCRCxNQUFNLENBQUNSLFFBQVEsQ0FBQzBDLFVBQVUsQ0FBQyxDQUFDRCxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ2hELENBQUMsQ0FBQztJQUVGckMsRUFBRSxDQUFDLDRCQUE0QixFQUFFLFlBQVk7TUFDM0NKLFFBQVEsQ0FBQzJDLGlCQUFpQixHQUFHcEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7TUFFOUQsTUFBTUksTUFBTSxHQUFHLE1BQU03QixRQUFRLENBQUMyQyxpQkFBaUIsQ0FBQyxDQUFDO01BRWpEbkMsTUFBTSxDQUFDcUIsTUFBTSxDQUFDLENBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3pCRCxNQUFNLENBQUNSLFFBQVEsQ0FBQzJDLGlCQUFpQixDQUFDLENBQUNGLGdCQUFnQixDQUFDLENBQUM7SUFDdkQsQ0FBQyxDQUFDO0lBRUZyQyxFQUFFLENBQUMsb0NBQW9DLEVBQUUsWUFBWTtNQUNuREosUUFBUSxDQUFDRyxLQUFLLEdBQUdvQixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztNQUVsRCxNQUFNSSxNQUFNLEdBQUcsTUFBTTdCLFFBQVEsQ0FBQ0csS0FBSyxDQUFDLENBQUM7TUFFckNLLE1BQU0sQ0FBQ3FCLE1BQU0sQ0FBQyxDQUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQztNQUN6QkQsTUFBTSxDQUFDUixRQUFRLENBQUNHLEtBQUssQ0FBQyxDQUFDc0MsZ0JBQWdCLENBQUMsQ0FBQztJQUMzQyxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRjFDLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxNQUFNO0lBQ2hDRSxVQUFVLENBQUMsTUFBTTtNQUNmO01BQ0FELFFBQVEsQ0FBQ3NCLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztJQUM1QixDQUFDLENBQUM7SUFFRnBCLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZO01BQ25DSixRQUFRLENBQUNzQixLQUFLLENBQUNHLGlCQUFpQixDQUFDLENBQUM7UUFBRW1CLFFBQVEsRUFBRTtNQUFFLENBQUMsQ0FBQyxDQUFDO01BRW5ELE1BQU1mLE1BQU0sR0FBRyxNQUFNN0IsUUFBUSxDQUFDc0IsS0FBSyxDQUFDLHVEQUF1RCxFQUFFLENBQzNGLFlBQVksRUFDWixrQkFBa0IsQ0FDbkIsQ0FBQztNQUVGZCxNQUFNLENBQUNxQixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNlLFFBQVEsQ0FBQyxDQUFDbkMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNwQyxDQUFDLENBQUM7SUFFRkwsRUFBRSxDQUFDLG9CQUFvQixFQUFFLFlBQVk7TUFDbkNKLFFBQVEsQ0FBQ3NCLEtBQUssQ0FBQ0csaUJBQWlCLENBQUMsQ0FBQztRQUFFb0IsWUFBWSxFQUFFO01BQUUsQ0FBQyxDQUFDLENBQUM7TUFFdkQsTUFBTWhCLE1BQU0sR0FBRyxNQUFNN0IsUUFBUSxDQUFDc0IsS0FBSyxDQUFDLDBDQUEwQyxFQUFFLENBQzlFLGVBQWUsRUFDZixDQUFDLENBQ0YsQ0FBQztNQUVGZCxNQUFNLENBQUNxQixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNnQixZQUFZLENBQUMsQ0FBQ3BDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDeEMsQ0FBQyxDQUFDO0lBRUZMLEVBQUUsQ0FBQyxvQkFBb0IsRUFBRSxZQUFZO01BQ25DSixRQUFRLENBQUNzQixLQUFLLENBQUNHLGlCQUFpQixDQUFDLENBQUM7UUFBRW9CLFlBQVksRUFBRTtNQUFFLENBQUMsQ0FBQyxDQUFDO01BRXZELE1BQU1oQixNQUFNLEdBQUcsTUFBTTdCLFFBQVEsQ0FBQ3NCLEtBQUssQ0FBQyxpQ0FBaUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO01BRTNFZCxNQUFNLENBQUNxQixNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNnQixZQUFZLENBQUMsQ0FBQ3BDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDeEMsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZWLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNO0lBQy9CSyxFQUFFLENBQUMsaUNBQWlDLEVBQUUsWUFBWTtNQUNoREosUUFBUSxDQUFDMEMsVUFBVSxHQUFHbkIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDUSxpQkFBaUIsQ0FBQyxJQUFJQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQztNQUVsRixNQUFNekIsTUFBTSxDQUFDUixRQUFRLENBQUMwQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUNSLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0lBQzNFLENBQUMsQ0FBQztJQUVGL0IsRUFBRSxDQUFDLDZCQUE2QixFQUFFLFlBQVk7TUFDNUNKLFFBQVEsQ0FBQ3NCLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDUSxpQkFBaUIsQ0FBQyxJQUFJQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUM7TUFFeEUsTUFBTXpCLE1BQU0sQ0FBQ1IsUUFBUSxDQUFDc0IsS0FBSyxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQ1ksT0FBTyxDQUFDQyxPQUFPLENBQUMsZUFBZSxDQUFDO0lBQ3ZGLENBQUMsQ0FBQztJQUVGL0IsRUFBRSxDQUFDLDJCQUEyQixFQUFFLFlBQVk7TUFDMUNKLFFBQVEsQ0FBQ3NCLEtBQUssR0FBR0MsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDUSxpQkFBaUIsQ0FBQyxJQUFJQyxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztNQUV4RixNQUFNekIsTUFBTSxDQUFDUixRQUFRLENBQUNzQixLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQ1ksT0FBTyxDQUFDQyxPQUFPLENBQUMsK0JBQStCLENBQUM7SUFDOUYsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUZwQyxRQUFRLENBQUMsY0FBYyxFQUFFLE1BQU07SUFDN0JLLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxZQUFZO01BQ3BELE1BQU0wQyxRQUFRLEdBQUc7UUFDZkMsTUFBTSxFQUFFLENBQ047VUFDRUMsS0FBSyxFQUFFLFlBQVk7VUFDbkJDLFdBQVcsRUFBRSxrQkFBa0I7VUFDL0JDLElBQUksRUFBRTtRQUNSLENBQUM7TUFFTCxDQUFDO01BRURsRCxRQUFRLENBQUNtRCxJQUFJLEdBQUc1QixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGlCQUFpQixDQUFDLElBQUksQ0FBQztNQUVqRCxNQUFNSSxNQUFNLEdBQUcsTUFBTTdCLFFBQVEsQ0FBQ21ELElBQUksQ0FBQ0wsUUFBUSxDQUFDO01BRTVDdEMsTUFBTSxDQUFDcUIsTUFBTSxDQUFDLENBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDO01BQ3pCRCxNQUFNLENBQUNSLFFBQVEsQ0FBQ21ELElBQUksQ0FBQyxDQUFDcEIsb0JBQW9CLENBQUNlLFFBQVEsQ0FBQztJQUN0RCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRi9DLFFBQVEsQ0FBQyxhQUFhLEVBQUUsTUFBTTtJQUM1QkssRUFBRSxDQUFDLDJDQUEyQyxFQUFFLFlBQVk7TUFDMURKLFFBQVEsQ0FBQ3NCLEtBQUssR0FBR0MsSUFBSSxDQUNsQkMsRUFBRSxDQUFDLENBQUMsQ0FDSjRCLHFCQUFxQixDQUFDLENBQUM7UUFBRTFCLEVBQUUsRUFBRTtNQUFFLENBQUMsQ0FBQyxDQUFDLENBQ2xDMEIscUJBQXFCLENBQUMsQ0FBQztRQUFFMUIsRUFBRSxFQUFFO01BQUUsQ0FBQyxDQUFDLENBQUMsQ0FDbEMwQixxQkFBcUIsQ0FBQyxDQUFDO1FBQUUxQixFQUFFLEVBQUU7TUFBRSxDQUFDLENBQUMsQ0FBQztNQUVyQyxNQUFNMkIsUUFBUSxHQUFHLENBQ2ZyRCxRQUFRLENBQUNzQixLQUFLLENBQUMsbUNBQW1DLENBQUMsRUFDbkR0QixRQUFRLENBQUNzQixLQUFLLENBQUMsbUNBQW1DLENBQUMsRUFDbkR0QixRQUFRLENBQUNzQixLQUFLLENBQUMsbUNBQW1DLENBQUMsQ0FDcEQ7TUFFRCxNQUFNZ0MsT0FBTyxHQUFHLE1BQU1DLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxRQUFRLENBQUM7TUFFM0M3QyxNQUFNLENBQUM4QyxPQUFPLENBQUMsQ0FBQ3hCLFlBQVksQ0FBQyxDQUFDLENBQUM7TUFDL0J0QixNQUFNLENBQUNSLFFBQVEsQ0FBQ3NCLEtBQUssQ0FBQyxDQUFDbUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDO0lBQ2pELENBQUMsQ0FBQztJQUVGckQsRUFBRSxDQUFDLDZDQUE2QyxFQUFFLFlBQVk7TUFDNUQsTUFBTXNELFlBQVksR0FBR0MsS0FBSyxDQUFDQyxJQUFJLENBQUM7UUFBRUMsTUFBTSxFQUFFO01BQUssQ0FBQyxFQUFFLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxNQUFNO1FBQzNEckMsRUFBRSxFQUFFcUMsQ0FBQyxHQUFHLENBQUM7UUFDVHBDLElBQUksRUFBRSxTQUFTb0MsQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUN0Qm5DLE1BQU0sRUFBRTtNQUNWLENBQUMsQ0FBQyxDQUFDO01BRUg1QixRQUFRLENBQUNzQixLQUFLLEdBQUdDLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0MsaUJBQWlCLENBQUNpQyxZQUFZLENBQUM7TUFFMUQsTUFBTU0sU0FBUyxHQUFHQyxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO01BQzVCLE1BQU1yQyxNQUFNLEdBQUcsTUFBTTdCLFFBQVEsQ0FBQ3NCLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQztNQUMzRCxNQUFNNkMsT0FBTyxHQUFHRixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDO01BRTFCMUQsTUFBTSxDQUFDcUIsTUFBTSxDQUFDLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUM7TUFDakN0QixNQUFNLENBQUMyRCxPQUFPLEdBQUdILFNBQVMsQ0FBQyxDQUFDSSxZQUFZLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNsRCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=